(self.webpackChunkportal=self.webpackChunkportal||[]).push([[56742],{56742:(k,h,r)=>{r.r(h),r.d(h,{AccountLayoutComponent:()=>$,AccountLayoutModule:()=>j,AuthWrapperComponent:()=>f,TenantBoxComponent:()=>C});var e=r(11705),b=r(70533),i=r(81011),p=r(27437),T=r(80014),u=r(82830),v=r(63613),g=r(28675),d=r(62411),m=r(32070);let _=(()=>{class n{get isMultiTenancyEnabled$(){return this.configState.getDeep$("multiTenancy.isEnabled")}get languages$(){return this.configState.getDeep$("localization.languages")}get enableLocalLogin$(){return this.configState.getSetting$("Abp.Account.EnableLocalLogin").pipe((0,m.map)(t=>"false"!==t?.toLowerCase()))}get isTenantBoxVisible(){return this.tenantBoxVisible&&this.multiTenancy.isTenantBoxVisible}set isTenantBoxVisible(t){this.multiTenancy.isTenantBoxVisible=t}get defaultLanguage$(){return this.languages$.pipe((0,m.map)(t=>{const a=t?.find(o=>o.cultureName===this.selectedLangCulture)||{};return{displayName:a.displayName||"",flagIcon:a.flagIcon}}))}get dropdownLanguages$(){return this.languages$.pipe((0,m.map)(t=>t?.filter(a=>a.cultureName!==this.selectedLangCulture)||[]))}get selectedLangCulture(){return this.sessionState.getLanguage()}get appInfo(){return this.environment.getEnvironment().application}get pageLabel(){const t=(0,i.getRoutePath)(this.router);return this.routes.search({path:t})?.name||""}get tenantBoxVisible(){return this.getMostInnerChild().data.tenantBoxVisible??!0}constructor(t){this.injector=t,this.tenantBoxKey="Account.TenantBoxComponent",this.logoKey="Account.LogoComponent",this.multiTenancy=t.get(i.MultiTenancyService),this.router=t.get(g.Router),this.route=t.get(g.ActivatedRoute),this.routes=t.get(i.RoutesService),this.configState=t.get(i.ConfigStateService),this.sessionState=t.get(i.SessionStateService),this.environment=t.get(i.EnvironmentService),this.subscription=t.get(i.SubscriptionService),this.routerEvents=t.get(i.RouterEvents)}onChangeLang(t){this.sessionState.setLanguage(t)}getMostInnerChild(){let t=this.route.snapshot,a=0;for(;t.firstChild&&a<10;)t=t.firstChild,a++;return t}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(e.Injector))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),x=(()=>{class n{constructor(t,a,o,s){this.toasterService=t,this.tenantService=a,this.sessionState=o,this.configState=s,this.currentTenant$=this.sessionState.getTenant$()}onSwitch(){const t=this.sessionState.getTenant();this.name=t?.name,this.isModalVisible=!0}save(){if(!this.name)return this.setTenant(null),void(this.isModalVisible=!1);this.modalBusy=!0,this.tenantService.findTenantByName(this.name).pipe((0,m.finalize)(()=>this.modalBusy=!1)).subscribe(({success:t,isActive:a,tenantId:o,...s})=>{t&&a?(this.setTenant({...s,id:o,isAvailable:!0}),this.isModalVisible=!1):this.showError()})}setTenant(t){this.sessionState.setTenant(t),this.configState.refreshAppState().subscribe()}showError(){this.toasterService.error("AbpUiMultiTenancy::GivenTenantIsNotAvailable","AbpUi::Error",{messageLocalizationParams:[this.name]})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(p.ToasterService),e.\u0275\u0275inject(i.AbpTenantService),e.\u0275\u0275inject(i.SessionStateService),e.\u0275\u0275inject(i.ConfigStateService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})();var c=r(36394);function S(n,l){1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1,"Switch Tenant"),e.\u0275\u0275elementEnd())}function w(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",11),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.service.save())}),e.\u0275\u0275elementStart(1,"div",12)(2,"div",13)(3,"label",14),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"input",15),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.service.name=o)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"p"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,3,"AbpUiMultiTenancy::Name")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.service.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,5,"AbpUiMultiTenancy::SwitchTenantHint"))}}function M(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",16),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"abp-button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.service.save())}),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,"AbpAccount::Cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",(null==t?null:t.name)===a.service.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,5,"AbpAccount::Save")," ")}}function A(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"hr"),e.\u0275\u0275elementStart(2,"div")(3,"div",1)(4,"div",2)(5,"div",3)(6,"h6",4),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"i"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",5)(13,"a",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.service.onSwitch())}),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"abpLocalization"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(16,"hr"),e.\u0275\u0275elementStart(17,"abp-modal",7),e.\u0275\u0275listener("visibleChange",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.service.isModalVisible=o)}),e.\u0275\u0275template(18,S,2,0,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(20,w,10,7,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(22,M,6,7,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=l.ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,5,"AbpUiMultiTenancy::Tenant")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.name||e.\u0275\u0275pipeBind1(11,7,"AbpUiMultiTenancy::NotSelected")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,9,"AbpUiMultiTenancy::Switch")),e.\u0275\u0275advance(3),e.\u0275\u0275property("visible",a.service.isModalVisible)("busy",a.service.modalBusy)}}const L=function(){return{}};function B(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275element(1,"i",16),e.\u0275\u0275elementStart(2,"span",17),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&n){const t=l.ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.displayName)}}function E(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",18),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,z=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(z.service.onChangeLang(s.cultureName))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&n){const t=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null==t?null:t.displayName," ")}}function I(n,l){1&n&&e.\u0275\u0275element(0,"abp-tenant-box")}const y=function(n){return{componentKey:n}};function V(n,l){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,I,1,0,"abp-tenant-box",19),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("abpReplaceableTemplate",e.\u0275\u0275pureFunction1(1,y,t.service.tenantBoxKey))}}function D(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd())}function N(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"strong"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"AbpAccount::InvalidLoginRequest")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"AbpAccount::ThereAreNoLoginSchemesConfiguredForThisClient")," "))}const F=["*"];function R(n,l){1&n&&(e.\u0275\u0275elementStart(0,"abp-auth-wrapper"),e.\u0275\u0275element(1,"router-outlet"),e.\u0275\u0275elementEnd())}let C=(()=>{class n{constructor(){this.service=(0,e.inject)(x)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-tenant-box"]],standalone:!0,features:[e.\u0275\u0275ProvidersFeature([x]),e.\u0275\u0275StandaloneFeature],decls:2,vars:4,consts:[[4,"ngIf"],[1,"tenant-switch-box"],[1,"row"],[1,"col","pr-1","pb-2"],[1,"m0"],[1,"col-auto","pl-1"],["id","abp-tenant-switch-link","href","javascript:void(0)",1,"btn","btn-sm","btn-outline-primary","float-end","pointer",3,"click"],["size","md",3,"visible","busy","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[3,"ngSubmit"],[1,"mt-2"],[1,"form-group"],["for","name"],["type","text","id","name","name","tenant","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["abpClose","","type","button",1,"btn","btn-secondary"],["type","abp-button","iconClass","fa fa-check",3,"disabled","click"]],template:function(a,o){1&a&&(e.\u0275\u0275template(0,A,24,11,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&a&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.service.currentTenant$)||e.\u0275\u0275pureFunction0(3,L))},dependencies:[d.NgIf,d.AsyncPipe,i.CoreModule,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.NgModel,c.NgForm,i.LocalizationPipe,i.AutofocusDirective,p.ThemeSharedModule,p.ButtonComponent,p.ModalComponent,p.ModalCloseDirective],encapsulation:2})}return n})(),f=(()=>{class n{constructor(){this.service=(0,e.inject)(_)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-auth-wrapper"]],standalone:!0,features:[e.\u0275\u0275ProvidersFeature([_]),e.\u0275\u0275StandaloneFeature],ngContentSelectors:F,decls:27,vars:16,consts:[[1,"card","mx-auto",2,"max-width","30rem"],[1,"card-body","p-3","p-sm-4"],[1,"align-items-start","d-flex","justify-content-between","mb-2"],[1,"lpx-main-title","lpx-login-title","m-0","me-auto"],["ngbDropdown","",1,"dropdown","btn-group","ms-auto"],["ngbDropdownToggle","","type","button","id","dropdownMenuLink","class","btn btn-sm btn-light dropdown-toggle","aria-expanded","false","data-bs-toggle","dropdown",4,"ngIf"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item pointer",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["disableLocalLoginTemplate",""],[1,"copyright","text-center","my-3"],[1,"copyright-text"],["href","https://leptontheme.com/","target","_blank",1,"text-dark","text-decoration-none"],["href","https://abp.io/","target","_blank",1,"text-brand","text-decoration-none"],["ngbDropdownToggle","","type","button","id","dropdownMenuLink","aria-expanded","false","data-bs-toggle","dropdown",1,"btn","btn-sm","btn-light","dropdown-toggle"],[1,"bi","bi-translate","me-1"],[1,"ml-2"],[1,"dropdown-item","pointer",3,"click"],[4,"abpReplaceableTemplate"],[1,"alert","alert-warning"]],template:function(a,o){if(1&a&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275template(7,B,4,1,"button",5),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementStart(9,"ul",6)(10,"li"),e.\u0275\u0275template(11,E,2,1,"a",7),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(13,V,2,3,"ng-container",8),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275template(15,D,2,0,"div",9),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275template(17,N,6,6,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",11)(20,"span",12),e.\u0275\u0275text(21,"2023 \xa9 "),e.\u0275\u0275elementStart(22,"a",13),e.\u0275\u0275text(23,"LeptonX Theme"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24," by "),e.\u0275\u0275elementStart(25,"a",14),e.\u0275\u0275text(26,"ABP Platform"),e.\u0275\u0275elementEnd()()()),2&a){const s=e.\u0275\u0275reference(18);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,6,o.service.pageLabel)," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,8,o.service.defaultLanguage$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(12,10,o.service.dropdownLanguages$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(14,12,o.service.isMultiTenancyEnabled$)&&o.service.isTenantBoxVisible),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(16,14,o.service.enableLocalLogin$))("ngIfElse",s)}},dependencies:[d.NgIf,d.NgFor,d.AsyncPipe,i.CoreModule,i.LocalizationPipe,i.ReplaceableTemplateDirective,C,u.NgbDropdownModule,u.NgbDropdown,u.NgbDropdownToggle,u.NgbDropdownMenu],encapsulation:2})}return n})(),$=(()=>{class n{constructor(){this.authWrapperKey="Account.AuthWrapper"}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-account-layout"]],decls:3,vars:3,consts:[[4,"abpReplaceableTemplate"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"lpx-auth-layout"),e.\u0275\u0275element(1,"abp-page-alert-container"),e.\u0275\u0275template(2,R,2,0,"abp-auth-wrapper",0),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("abpReplaceableTemplate",e.\u0275\u0275pureFunction1(1,y,o.authWrapperKey)))},dependencies:[b.J1,v.fB,g.RouterOutlet,i.ReplaceableTemplateDirective,f],encapsulation:2})}return n})(),j=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[]}}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[b.R2,T.km,v.SQ,i.CoreModule,p.ThemeSharedModule,u.NgbDropdownModule,f]})}return n})()}}]);