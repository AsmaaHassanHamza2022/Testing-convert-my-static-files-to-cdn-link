(self.webpackChunkportal=self.webpackChunkportal||[]).push([[65255],{92134:(A,w,m)=>{m.d(w,{b:()=>V});var e=m(81011),g=m(92482),p=m(78570),C=m(37385),u=m(82830),_=m(31093),F=m(62411),c=m(11705);let V=(()=>{class v{static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275mod=c.\u0275\u0275defineNgModule({type:v});static#n=this.\u0275inj=c.\u0275\u0275defineInjector({imports:[e.CoreModule,g.SharedModule,p.AbpUtilsModule,C.NgScrollbarModule,e.CoreModule,p.AbpUtilsModule,g.SharedModule,u.NgbTooltipModule,_.NgSelectModule,F.CommonModule,C.NgScrollbarModule,u.NgbDropdownModule,u.NgbDatepickerModule]})}return v})()},65255:(A,w,m)=>{m.r(w),m.d(w,{TaskModule:()=>ft});var e=m(11705),y=m(28675),g=m(81011),d=m(97365),p=m(78570),T=m(4125),C=m(93018);let S=(()=>{class n extends p.ListFilterService{get currentUser(){return this._currentUser}constructor(t,a,o){super(),this.list=t,this._selectedFiltersBannerService=a,this._taskService=o,this._filterChanged$=new T.BehaviorSubject(void 0),this.filterChanged$=this._filterChanged$.asObservable(),this.isLoading=!1}init(t,a,o,s){this._changeMainTab$=new T.BehaviorSubject(t),this._changeServiceCategoryTab$=new T.BehaviorSubject(a),this._changeSubCategoryTab$=new T.BehaviorSubject(o),this._changeTodoTypeTab$=new T.BehaviorSubject(s),this.changeMainTab$=this._changeMainTab$.asObservable(),this.changeServiceCategoryTab$=this._changeServiceCategoryTab$.asObservable(),this.changeSubCategoryTab$=this._changeSubCategoryTab$.asObservable(),this.changeTodoTypeTab$=this._changeTodoTypeTab$.asObservable(),this.getUserInfo()}getList(t){let a;this.isLoading=!0;const o=this._filters;return a=o.tab===d.Ds.myTeamTask?this._taskService.getMyTeamList({...t,...o}):this._taskService.getList({...t,...o,isCompletedTasks:o.tab===d.Ds.myFinishedTask}),a.pipe((0,T.finalize)(()=>this.isLoading=!1))}getTasksListCount(){let t;const a=this._filters;return t=a.tab===d.Ds.myTeamTask?this._taskService.getTeamTasksListCount({...a,categoryId:null,subCategoryId:null}):this._taskService.getTasksListCount({...a,categoryId:null,subCategoryId:null,isCompletedTasks:a.tab===d.Ds.myFinishedTask}),t}getToDoList(t){return this.isLoading=!0,this._taskService.getToDoTaskList({...t,...this._filters}).pipe((0,T.finalize)(()=>this.isLoading=!1))}getToDoTaskListCount(){return this._taskService.getToDoTaskListCount({...this._filters,assignee:null})}getSubServiceCategoryLookup(t,a){return this._taskService.serviceSubCategoryLookUpByServiceCategoryIdAndInput(t,a)}getServiceLookup(t,a){return this._taskService.serviceLookUpByServiceSubCategoryIdAndInput(t,a)}getUsersLookUpLookup(t,a){return this._taskService.usersLookUpByDepartmentIdAndInput(t,a)}getUserInfo(){this._taskService.getUserInfo().subscribe(t=>{this._currentUser=t})}refresh(){this.getData()}getData(t=!0){super.getData(t),this._filterChanged$.next(!0)}changeTab(t){this._changeMainTab$.next(t)}changeServiceCategory(t){this._changeServiceCategoryTab$.next(t)}changeSubCategory(t){this._changeSubCategoryTab$.next(t)}changeTodoType(t){this._changeTodoTypeTab$.next(t)}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(g.ListService),e.\u0275\u0275inject(p.SelectedFiltersBannerService),e.\u0275\u0275inject(C.M))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u=function(n){return n[n.AssignedByMe=1]="AssignedByMe",n[n.AssignedToMe=2]="AssignedToMe",n}(u||{});(0,g.mapEnumToOptions)(u);var _=m(62411),I=m(42595),F=m(37385),r=m(36394),c=m(92482),h=function(n){return n[n.Complete=1]="Complete",n[n.UnComplete=2]="UnComplete",n}(h||{});(0,g.mapEnumToOptions)(h);var v=m(74478),b=m(82830);function M(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",9)(1,"div",35),e.\u0275\u0275element(2,"input",36),e.\u0275\u0275elementStart(3,"label",37),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()()),2&n){const t=i.$implicit;e.\u0275\u0275classProp("col-xl-12",!t)("col-xl-6",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t)("id","taskStatus"+t),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","taskStatus"+t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,8,t?"TaskService::TaskStatus:"+t:"TaskService::TaskFilter:All")," ")}}function D(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"label",38),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"app-ng-select-auto-complete",39),e.\u0275\u0275listener("valueChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.selectTaskFormDropDown(o,"assignedTo"))}),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,"TaskService::TaskFilter:AssignTo")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchUsersFn)}}function z(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",9)(8,"div",10)(9,"label",13),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",9)(14,"div",10)(15,"label",15),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",9)(20,"div",10)(21,"label",17),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",9)(26,"div",10)(27,"label",19),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"app-ng-select-auto-complete",20),e.\u0275\u0275listener("valueChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.selectTaskFormDropDown(o,"requestedBy"))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",21)(32,"label",22),e.\u0275\u0275text(33),e.\u0275\u0275pipe(34,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",23),e.\u0275\u0275template(36,M,6,10,"div",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",9)(38,"div",10)(39,"label",25),e.\u0275\u0275text(40),e.\u0275\u0275pipe(41,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275reference(44);return e.\u0275\u0275resetView(o.toggle())}),e.\u0275\u0275element(43,"input",27,28),e.\u0275\u0275elementStart(45,"div",29),e.\u0275\u0275element(46,"i",30),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(47,"div",9)(48,"div",10)(49,"label",31),e.\u0275\u0275text(50),e.\u0275\u0275pipe(51,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275reference(54);return e.\u0275\u0275resetView(o.toggle())}),e.\u0275\u0275element(53,"input",32,33),e.\u0275\u0275elementStart(55,"div",29),e.\u0275\u0275element(56,"i",30),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(57,D,6,4,"div",34),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,14,"TaskService::TaskFilter:TaskNo")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD058MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,16,"TaskService::TaskFilter:TaskName")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD058MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(17,18,"TaskService::TaskFilter:RequestNO")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD058MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(23,20,"TaskService::TaskFilter:RequestName")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,22,"TaskService::TaskFilter:RequesterName")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchUsersFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(34,24,"TaskService::TaskFilter:Status")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.TaskStatusEnumOption),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(41,26,"TaskService::TaskFilter:AssignDateFrom")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(51,28,"TaskService::TaskFilter:AssignDateTo")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.tab===t.TaskTabEnum.myTeamTask)}}function P(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"label",57),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"app-ng-select-auto-complete",58),e.\u0275\u0275listener("valueChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.selectTodoTaskFormDropDown(o,"assignedBy"))}),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,"TaskService::TodoTasksFilter:AssignerUser")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchUsersFn)}}function U(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"label",38),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"app-ng-select-auto-complete",59),e.\u0275\u0275listener("valueChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.selectTodoTaskFormDropDown(o,"assignedTo"))}),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,"TaskService::TodoTasksFilter:AssignedTo")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchUsersFn)}}function G(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",35),e.\u0275\u0275element(2,"input",36),e.\u0275\u0275elementStart(3,"label",37),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()()),2&n){const t=i.$implicit;e.\u0275\u0275classProp("w-100",!t),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t)("id","taskStatus"+t),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","taskStatus"+t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,6,t?"TaskService::TodoTaskStatus:"+t:"TaskService::TaskFilter:All")," ")}}function j(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"div",9)(2,"div",10)(3,"label",41),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,P,6,4,"div",34),e.\u0275\u0275template(8,U,6,4,"div",34),e.\u0275\u0275elementStart(9,"div",21)(10,"label",22),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",43),e.\u0275\u0275template(14,G,6,8,"div",44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",9)(16,"div",10)(17,"label",45),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275reference(22);return e.\u0275\u0275resetView(o.toggle())}),e.\u0275\u0275element(21,"input",46,47),e.\u0275\u0275elementStart(23,"div",29),e.\u0275\u0275element(24,"i",30),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(25,"div",9)(26,"div",10)(27,"label",48),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275reference(32);return e.\u0275\u0275resetView(o.toggle())}),e.\u0275\u0275element(31,"input",49,50),e.\u0275\u0275elementStart(33,"div",29),e.\u0275\u0275element(34,"i",30),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(35,"div",9)(36,"div",10)(37,"label",51),e.\u0275\u0275text(38),e.\u0275\u0275pipe(39,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275reference(42);return e.\u0275\u0275resetView(o.toggle())}),e.\u0275\u0275element(41,"input",52,53),e.\u0275\u0275elementStart(43,"div",29),e.\u0275\u0275element(44,"i",30),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(45,"div",9)(46,"div",10)(47,"label",54),e.\u0275\u0275text(48),e.\u0275\u0275pipe(49,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275reference(52);return e.\u0275\u0275resetView(o.toggle())}),e.\u0275\u0275element(51,"input",55,56),e.\u0275\u0275elementStart(53,"div",29),e.\u0275\u0275element(54,"i",30),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,10,"TaskService::TodoTasksFilter:TaskTitle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD058MaxLength),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.todoSubTab===t.ToDoAssignee.AssignedToMe),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.todoSubTab===t.ToDoAssignee.AssignedByMe),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,12,"TaskService::TodoTasksFilter:Status")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.TodoTaskStatusEnumOption),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,14,"TaskService::TodoTask:StartDateFrom")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,16,"TaskService::TodoTask:StartDateTo")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(39,18,"TaskService::TodoTask:EndDateFrom")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(49,20,"TaskService::TodoTask:EndDateTo"))}}function $(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",2),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submitFilterForm())}),e.\u0275\u0275elementStart(1,"div",3),e.\u0275\u0275template(2,z,58,30,"ng-template",4),e.\u0275\u0275template(3,j,55,22,"ng-template",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",5)(5,"button",6)(6,"span"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.clearFilterForm())}),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.filtersForm)("validateOnSubmit",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.tab!==t.TaskTabEnum.todoListTask),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.tab===t.TaskTabEnum.todoListTask),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(8,6,"::AdvancedFilter:Refresh")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,8,"::AdvancedFilter:Clear")," ")}}let W=(()=>{class n extends p.AbstractAdvancedFilterComponent{get tabForm(){return this.tab==d.Ds.todoListTask?this.todoTaskForm:this.taskForm}get taskForm(){return this.filtersForm.controls.taskForm}get todoTaskForm(){return this.filtersForm.controls.todoTaskForm}get _taskService(){return this.service}constructor(){super(),this.serviceCategories=[],this.ValidationConsts=c.ValidationConsts,this.ToDoAssignee=u,this.TaskStatusEnum=d.H3,this.TaskTabEnum=d.Ds,this.TodoTaskStatusEnum=h,this.TaskStatusEnumOption=[null,...Object.values(d.H3).filter(t=>!1===isNaN(Number(t)))],this.TodoTaskStatusEnumOption=[null,...Object.values(h).filter(t=>!1===isNaN(Number(t)))],this.searchUsersFn=this._searchUser.bind(this),this.searchServicesFn=this._searchServices.bind(this),this.searchSubCategoryiesFn=this._searchSubCategoryies.bind(this),this.service=(0,e.inject)(S)}ngOnInit(){super.ngOnInit(),this._changeMainTabSub(),this._changeServiceCategorySub(),this._changeSubCategorySub(),this._changeTodoTypeSub()}initForm(){this.filtersForm=this.fb.group({tab:new p.FilterFormControl({filterTitle:""}),taskForm:this._buildTaskFormControl(),todoTaskForm:this._buildTodoTaskFormControl()}),this.loadUiStatusFilterForm(),this.loadUiStatusFormFilterValue("taskFormValue",this.taskForm),this.loadUiStatusFormFilterValue("todoTaskFormValue",this.todoTaskForm),this.taskForm.controls.categoryId.valueChanges.pipe((0,T.startWith)(void 0),(0,T.pairwise)()).subscribe(([t,a])=>{t!=a&&this.taskForm.controls.subCategoryId.patchValue(void 0)}),this.taskForm.controls.subCategoryId.valueChanges.pipe((0,T.startWith)(void 0),(0,T.pairwise)()).subscribe(([t,a])=>{})}resetForm(){this.tab==d.Ds.todoListTask?this.todoTaskForm.reset({assignee:this.tabForm.controls.assignee.value}):this.taskForm.reset({categoryId:this.tabForm.controls.categoryId.value})}removeFilterFormControl(t){this.tabForm.get(t).setValue(null)}refreshFilters(t=!0,a=!1){this.filtersFormValue=this.filtersForm.getRawValue(),a&&this.tab!==d.Ds.todoListTask&&(this.tabForm.controls.categoryId.setValue(void 0),this.tabForm.controls.subCategoryId.setValue(void 0));const o=this.tabForm.getRawValue();this.service.updateFilters({...o,tab:this.tab}),this.service.getData(t),this._taskService.changeServiceCategory(o.categoryId),this._taskService.changeSubCategory(o.subCategoryId)}saveExtraInfoStatus(){this.saveUiStatusFormFilterValue("taskFormValue",this.taskForm),this.saveUiStatusFormFilterValue("todoTaskFormValue",this.todoTaskForm),super.saveExtraInfoStatus()}clearFilterForm(){this.tabForm.reset()}selectTaskFormDropDown(t,a){this.changeFilterValueForDropDown(t,a,this.taskForm)}selectTodoTaskFormDropDown(t,a){this.changeFilterValueForDropDown(t,a,this.todoTaskForm)}_searchSubCategoryies(t){const a=this.taskForm.controls.categoryId.value;return a?this._taskService.getSubServiceCategoryLookup(a,t):(0,T.of)([])}_searchServices(t){return this._taskService.getServiceLookup(this.taskForm.controls.subCategoryId.value,t)}_searchUser(t){return this._taskService.getUsersLookUpLookup(void 0,t)}_buildTaskFormControl(){return this.fb.group({taskNo:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:TaskNo",validatorOrOpts:[r.Validators.maxLength(c.ValidationConsts.FD058MaxLength),c.CustomValidators.InvalidCharacterValidator()]}),taskName:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:TaskName",validatorOrOpts:[r.Validators.maxLength(c.ValidationConsts.FD058MaxLength),c.CustomValidators.InvalidCharacterValidator()]}),categoryId:new p.FilterFormControl({}),requestNo:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:RequestNO",validatorOrOpts:[r.Validators.maxLength(c.ValidationConsts.FD058MaxLength),c.CustomValidators.InvalidCharacterValidator()]}),subCategoryId:new p.FilterFormControl({}),serviceName:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:RequestName",validatorOrOpts:[c.CustomValidators.InvalidCharacterValidator()]}),requestedBy:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:RequesterName",filterValueFun:null}),status:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:Status",filterValueFun:t=>this.localizationService.instant("TaskService::TaskStatus:"+t)}),assignDateMin:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:AssignDateFrom"}),assignDateMax:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:AssignDateTo"}),assignedTo:new p.FilterFormControl({filterTitle:"TaskService::TaskFilter:AssignTo",filterValueFun:null})})}_buildTodoTaskFormControl(){return this.fb.group({assignee:new p.FilterFormControl({}),title:new p.FilterFormControl({filterTitle:"TaskService::TodoTasksFilter:TaskTitle",validatorOrOpts:[r.Validators.maxLength(c.ValidationConsts.FD058MaxLength),c.CustomValidators.InvalidCharacterValidator()]}),assignedBy:new p.FilterFormControl({filterTitle:"TaskService::TodoTasksFilter:AssignerUser",filterValueFun:null}),assignedTo:new p.FilterFormControl({filterTitle:"TaskService::TodoTasksFilter:AssignedTo",filterValueFun:null}),status:new p.FilterFormControl({filterTitle:"TaskService::TodoTasksFilter:Status",filterValueFun:t=>this.localizationService.instant("TaskService::TodoTaskStatus:"+t)}),taskStartDateFrom:new p.FilterFormControl({filterTitle:"TaskService::TodoTask:StartDateFrom"}),taskStartDateTo:new p.FilterFormControl({filterTitle:"TaskService::TodoTask:StartDateTo"}),taskEndDateFrom:new p.FilterFormControl({filterTitle:"TaskService::TodoTask:EndDateFrom"}),taskEndDateTo:new p.FilterFormControl({filterTitle:"TaskService::TodoTask:EndDateTo"})})}_changeMainTabSub(){const t=this._taskService.changeMainTab$.subscribe(a=>{this.filtersForm.controls.tab.patchValue(a),this.tab=a,this.selectedFiltersBannerService.init(this.tabForm,this.quickFilter);this.taskForm.controls.assignedTo.filterTitle=this.tab===d.Ds.myTeamTask?"TaskService::TaskFilter:AssignTo":void 0,this.refreshFilters()});this.addSubsciption(t)}_changeServiceCategorySub(){const t=this._taskService.changeServiceCategoryTab$.subscribe(a=>{const o=this.taskForm.controls.categoryId;o.value!==a&&(o.patchValue(a),this.tab!==d.Ds.todoListTask&&this.refreshFilters())});this.addSubsciption(t)}_changeSubCategorySub(){const t=this._taskService.changeSubCategoryTab$.subscribe(a=>{const o=this.taskForm.controls.subCategoryId;o.value!==a&&(o.patchValue(a),this.tab!==d.Ds.todoListTask&&this.refreshFilters())});this.addSubsciption(t)}_changeTodoTypeSub(){const t=this._taskService.changeTodoTypeTab$.subscribe(a=>{if(this.todoSubTab=a,this.todoTaskForm.controls.assignee.patchValue(a),this.tab===d.Ds.todoListTask){const o=this.todoTaskForm.controls.assignedBy,s=this.todoTaskForm.controls.assignedTo;a===u.AssignedByMe?(o.filterTitle=void 0,s.filterTitle="TaskService::TodoTasksFilter:AssignedTo"):(o.filterTitle="TaskService::TodoTasksFilter:AssignerUser",s.filterTitle=void 0),this.refreshFilters()}});this.addSubsciption(t)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-task-filter"]],inputs:{serviceCategories:"serviceCategories"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:10,consts:[[3,"filterText","isShowFilters","searchInputText","advancedSearchText","isQuickSearch","filterTextChange","showAdvancedFilter"],["class","filters-form",3,"formGroup","validateOnSubmit","ngSubmit",4,"ngIf"],[1,"filters-form",3,"formGroup","validateOnSubmit","ngSubmit"],[1,"scroll-bar"],[3,"ngIf"],[1,"filter-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-close-bar",3,"click"],["formGroupName","taskForm",1,"row","gap-2"],[1,"col-12"],[1,"form-group"],["for","taskNo",1,"form-label"],["formControlName","taskNo",1,"form-control",3,"maxlength"],["for","taskName",1,"form-label"],["formControlName","taskName",1,"form-control",3,"maxlength"],["for","requestNo",1,"form-label"],["formControlName","requestNo",1,"form-control",3,"maxlength"],["for","serviceName",1,"form-label"],["formControlName","serviceName",1,"form-control"],["for","requestedBy",1,"form-label"],["formControlName","requestedBy",3,"searchFn","valueChanged"],[1,"col-12","form-group"],["for","status",1,"form-label"],[1,"row"],["class","col-12",3,"col-xl-12","col-xl-6",4,"ngFor","ngForOf"],["for","assignDateMin",1,"form-label"],[1,"date-picker-container",3,"click"],["name","datepicker","formControlName","assignDateMin","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["assignDateMin","ngbDatepicker"],[1,"date-picker-icon"],[1,"icon-calendar"],["for","assignDateMax",1,"form-label"],["name","datepicker","formControlName","assignDateMax","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["assignDateMax","ngbDatepicker"],["class","col-12",4,"ngIf"],[1,"form-check","me-4"],["type","radio","name","status","formControlName","status",1,"form-check-input","input-check",3,"value","id"],[1,"form-label",3,"for"],["for","assignedTo",1,"form-label"],["formControlName","assignedTo","dropdownPosition","top",3,"searchFn","valueChanged"],["formGroupName","todoTaskForm",1,"row","gap-2"],["for","title",1,"form-label"],["formControlName","title",1,"form-control",3,"maxlength"],[1,"d-flex","flex-wrap"],[3,"w-100",4,"ngFor","ngForOf"],["for","taskStartDateFrom",1,"form-label"],["name","datepicker","formControlName","taskStartDateFrom","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["taskStartDateFrom","ngbDatepicker"],["for","taskStartDateTo",1,"form-label"],["name","datepicker","formControlName","taskStartDateTo","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["taskStartDateTo","ngbDatepicker"],["for","taskEndDateFrom",1,"form-label"],["name","datepicker","formControlName","taskEndDateFrom","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["taskEndDateFrom","ngbDatepicker"],["for","taskEndDateTo",1,"form-label"],["name","datepicker","formControlName","taskEndDateTo","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["taskEndDateTo","ngbDatepicker"],["for","assignedBy",1,"form-label"],["formControlName","assignedBy",3,"searchFn","valueChanged"],["formControlName","assignedTo",3,"searchFn","valueChanged"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"app-sw-filter",0),e.\u0275\u0275listener("filterTextChange",function(l){return o.chnageFilterText(l)})("showAdvancedFilter",function(l){return l?o.showFilterSidebar():o.closeFilterSidebar()}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275template(3,$,12,10,"form",1),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275property("filterText",o.quickFilter.filterValue)("isShowFilters",o.isShowFilters)("searchInputText",e.\u0275\u0275pipeBind1(1,6,"TaskService::Tasks:SearchWithName"))("advancedSearchText",e.\u0275\u0275pipeBind1(2,8,"TaskService::Tasks:AdvancedFilter"))("isQuickSearch",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.filtersForm))},dependencies:[_.NgForOf,_.NgIf,r.\u0275NgNoValidate,r.DefaultValueAccessor,r.RadioControlValueAccessor,r.NgControlStatus,r.NgControlStatusGroup,r.MaxLengthValidator,r.FormGroupDirective,r.FormControlName,r.FormGroupName,g.FormSubmitDirective,v.ValidationGroupDirective,v.ValidationDirective,c.NgSelectAutoCompleteComponent,c.SwFilterComponent,b.NgbInputDatepicker,g.LocalizationPipe],styles:[".scroll-bar[_ngcontent-%COMP%]{height:calc(100vh - 140px);overflow-y:auto;overflow-x:hidden}"]})}return n})();var L=function(n){return n[n.Normal=1]="Normal",n[n.Late=2]="Late",n}(L||{});(0,g.mapEnumToOptions)(L);var k=m(21786),f=m(27437);function q(n,i){1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"TaskService::TasksReassign")))}function H(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",3),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submitForm())}),e.\u0275\u0275elementStart(1,"div",4)(2,"div",5)(3,"div",6)(4,"label",7),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"label",9),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"input",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",5)(15,"div",6)(16,"label",11),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"app-ng-select-auto-complete",12),e.\u0275\u0275listener("change",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onSelectUser(o))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",5)(21,"div",6)(22,"label",13),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"app-ng-select-auto-complete",14),e.\u0275\u0275listener("change",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onSelectUser(o))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"div",15)(27,"div",6)(28,"label",16),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"abpLocalization"),e.\u0275\u0275elementStart(31,"span",17),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(34,"textarea",18),e.\u0275\u0275pipe(35,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(36,"div",19)(37,"button",20),e.\u0275\u0275element(38,"i",21),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"button",22),e.\u0275\u0275text(42),e.\u0275\u0275pipe(43,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,14,"TaskService::TasksReassign:Sector")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,16,"TaskService::TasksReassign:PublicDepartment")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,18,"TaskService::TasksReassign:Department")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchDepartmentFn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,20,"TaskService::TasksReassign:User")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchUsersFn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(30,22,"TaskService::TasksReassign:Notes")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(33,24,"::Optional")),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(35,26,t.ValidationConsts.FD027PlaceHolder))("maxlength",t.ValidationConsts.FD027MaxLength),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.isModalBusy),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(40,28,"TaskService::TasksReassign")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(43,30,"AbpUi::Cancel")," ")}}let K=(()=>{class n{constructor(t,a,o){this._fb=t,this._taskService=a,this._toasterService=o,this.successCreated=new e.EventEmitter,this.ValidationConsts=c.ValidationConsts,this.isModalOpen=!1,this.isModalBusy=!1,this.modalOptions={size:"lg",centered:!0},this.isActive=!0,this.searchDepartmentFn=this._searchDepartment.bind(this),this.searchUsersFn=this._searchUser.bind(this)}open(t){this.buildForm(t),this.isModalOpen=!0}buildForm(t){this.form=this._fb.group({taskId:[t],sector:[{value:this.userInfo.sector,disabled:!0}],publicDepartment:[{value:this.userInfo.publicDepartment,disabled:!0}],departmentId:[void 0,[r.Validators.required]],userName:[void 0,[r.Validators.required]],note:[void 0,[r.Validators.maxLength(c.ValidationConsts.FD027MaxLength),c.CustomValidators.InvalidCharacterValidator()]]}),this.form.controls.departmentId.valueChanges.pipe((0,T.startWith)(void 0),(0,T.pairwise)()).subscribe(([a,o])=>{a!=o&&this.form.controls.userName.setValue(void 0)})}onSelectUser(t){t instanceof Event||(this.selectedUser=t)}_searchDepartment(t){return this._taskService.userDepartmentsLookupByInput(t)}_searchUser(t){return this._taskService.usersLookUpByDepartmentIdAndInput(this.form.controls.departmentId.value,t)}submitForm(){if(this.form.invalid)return;this.isModalBusy=!0;const t=this.form.getRawValue();this._taskService.reassignTask(t).pipe((0,T.finalize)(()=>{this.isModalBusy=!1})).subscribe(()=>{this._toasterService.success("::Success"),this.successCreated.emit(!0),this.isModalOpen=!1})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(r.FormBuilder),e.\u0275\u0275directiveInject(C.M),e.\u0275\u0275directiveInject(f.ToasterService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-task-action-reassign"]],inputs:{userInfo:"userInfo"},outputs:{successCreated:"successCreated"},decls:5,vars:3,consts:[[3,"busy","options","visible","visibleChange"],["abpHeader",""],["abpBody",""],[3,"formGroup","ngSubmit"],[1,"row","form-controls"],[1,"col-lg-6"],[1,"form-group"],["for","sector",1,"form-label"],["type","text","id","sector","formControlName","sector",1,"form-control"],["for","publicDepartment",1,"form-label"],["type","text","id","publicDepartment","formControlName","publicDepartment",1,"form-control"],["for","departmentId",1,"form-label"],["formControlName","departmentId",3,"searchFn","change"],["for","userId",1,"form-label"],["formControlName","userName",3,"searchFn","change"],[1,"col-lg-12"],["for","notes",1,"form-label"],[1,"optional-field"],["id","notes","rows","5","formControlName","note",1,"form-control",3,"placeholder","maxlength"],[1,"modal-footer"],[1,"btn","btn-primary","ms-2",3,"disabled"],[1,"fa","fa-check","me-1"],["type","button","abpClose","",1,"btn","btn-outline-light"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(l){return o.isModalOpen=l}),e.\u0275\u0275template(1,q,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,H,44,32,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("busy",o.isModalBusy)("options",o.modalOptions)("visible",o.isModalOpen)},dependencies:[r.\u0275NgNoValidate,r.DefaultValueAccessor,r.NgControlStatus,r.NgControlStatusGroup,r.MaxLengthValidator,r.FormGroupDirective,r.FormControlName,g.FormSubmitDirective,v.ValidationGroupDirective,v.ValidationDirective,f.ModalComponent,f.ModalCloseDirective,c.NgSelectAutoCompleteComponent,g.LocalizationPipe],styles:[".form-controls[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:12px}"]})}return n})();var O=m(55355);function Q(n,i){1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"TaskService::RequestStatus")))}function Y(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"label",7),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",8),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"label",9),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"app-request-status-badge",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",5)(15,"div",6)(16,"label",11),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",8),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,6,"TaskService::RequestStatus:RequestNo")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t.requestInfo?null:t.requestInfo.requestNo),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,8,"TaskService::RequestStatus:Status")),e.\u0275\u0275advance(2),e.\u0275\u0275property("requestStatus",null==t.requestInfo?null:t.requestInfo.requestStatus),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(18,10,"TaskService::RequestStatus:StatusDetails")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t.requestInfo?null:t.requestInfo.requestStatusDetail)}}function Z(n,i){1&n&&(e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AbpUi::Close")," "))}let J=(()=>{class n{constructor(t,a){this._taskService=t,this._spinnerService=a,this.isModalOpen=!1,this.modalOptions={size:"md",centered:!0}}open(t){this.requestInfo=void 0,this.isModalOpen=!0,this._spinnerService.show(),this._taskService.getRequestStatusByRequestNo(t).pipe((0,T.finalize)(()=>{this._spinnerService.hide()})).subscribe(a=>{this.requestInfo=a})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(C.M),e.\u0275\u0275directiveInject(O.NgxSpinnerService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-task-view-request-status"]],decls:7,vars:3,consts:[[3,"options","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[1,"row","gap-3"],[1,"col-12"],[1,"form-group"],["for","requestNo",1,"form-label"],[1,"form-value"],["for","requestStatus",1,"form-label"],[3,"requestStatus"],["for","statusDetail",1,"form-label"],["type","button","abpClose","",1,"btn","btn-outline-light"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(l){return o.isModalOpen=l}),e.\u0275\u0275template(1,Q,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,Y,21,12,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Z,3,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("options",o.modalOptions)("visible",o.isModalOpen)("suppressUnsavedChangesWarning",!1)},dependencies:[f.ModalComponent,f.ModalCloseDirective,c.RequestStatusBadgeComponent,g.LocalizationPipe],styles:[".form-group[_ngcontent-%COMP%]{display:flex;align-items:center}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{min-width:120px;color:#8080b1;margin-bottom:0}.form-group[_ngcontent-%COMP%]   .form-value[_ngcontent-%COMP%]{font-weight:700}"]})}return n})();function X(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.actionTitle)}}function ee(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"::Optional")))}function te(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",3),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submitForm())}),e.\u0275\u0275element(1,"div",4),e.\u0275\u0275elementStart(2,"div",5)(3,"div",6)(4,"label",7),e.\u0275\u0275text(5),e.\u0275\u0275template(6,ee,3,3,"span",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"textarea",9),e.\u0275\u0275pipe(8,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",10)(10,"button",11),e.\u0275\u0275element(11,"i",12),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",13),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.actionCommentLabel," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isNeedComment),e.\u0275\u0275advance(1),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(8,7,t.ValidationConsts.FD028PlaceHolder))("maxlength",t.ValidationConsts.FD028MaxLength),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.actionTitle," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(15,9,"AbpUi::Cancel")," ")}}let ne=(()=>{class n{constructor(t,a,o){this._fb=t,this._toasterService=a,this._service=o,this.successCreated=new e.EventEmitter,this.ValidationConsts=c.ValidationConsts,this.isModalOpen=!1,this.modalOptions={size:"lg",centered:!0}}open(t,a){this.actionTitle=a.actionName,this.actionCommentLabel=a.commentLabel,this.isNeedComment=a.needComment,this.buildForm(t,a),this.isModalOpen=!0}buildForm(t,a){this.form=this._fb.group({taskId:[t],action:[a.actionCode],comment:[void 0,[r.Validators.maxLength(c.ValidationConsts.FD028MaxLength),c.CustomValidators.InvalidCharacterValidator()]]}),a.needComment&&this.form.controls.comment.setValidators(c.CustomValidators.RequiredValidator())}submitForm(){if(this.form.invalid)return void this._toasterService.warn("::FormValidationWarining");const t=this.form.getRawValue();this._service.excuteActionByInput(t).subscribe(()=>{this._toasterService.success("::Success"),this.successCreated.emit(!0),this.isModalOpen=!1})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(r.FormBuilder),e.\u0275\u0275directiveInject(f.ToasterService),e.\u0275\u0275directiveInject(C.M))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-task-execute-action"]],outputs:{successCreated:"successCreated"},decls:5,vars:2,consts:[[3,"options","visible","visibleChange"],["abpHeader",""],["abpBody",""],[3,"formGroup","ngSubmit"],[1,"row","form-controls"],[1,"col-lg-12"],[1,"form-group"],["for","comments",1,"form-label"],["class","optional-field",4,"ngIf"],["id","comments","name","comments","rows","5","formControlName","comment",1,"form-control",3,"placeholder","maxlength"],[1,"modal-footer"],[1,"btn","btn-primary","ms-2"],[1,"fa","fa-check","me-1"],["type","button","abpClose","",1,"btn","btn-outline-light"],[1,"optional-field"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(l){return o.isModalOpen=l}),e.\u0275\u0275template(1,X,2,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,te,16,11,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("options",o.modalOptions)("visible",o.isModalOpen)},dependencies:[_.NgIf,r.\u0275NgNoValidate,r.DefaultValueAccessor,r.NgControlStatus,r.NgControlStatusGroup,r.MaxLengthValidator,r.FormGroupDirective,r.FormControlName,g.FormSubmitDirective,v.ValidationGroupDirective,v.ValidationDirective,f.ModalComponent,f.ModalCloseDirective,g.LocalizationPipe],styles:[".form-controls[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:12px}"]})}return n})();function ae(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(17);e.\u0275\u0275property("ngTemplateOutlet",t)}}function oe(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(17);e.\u0275\u0275property("ngTemplateOutlet",t)}}function ie(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(23);e.\u0275\u0275property("ngTemplateOutlet",t)}}function se(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(15);e.\u0275\u0275property("ngTemplateOutlet",t)}}function re(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(19);e.\u0275\u0275property("ngTemplateOutlet",t)}}function le(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(29);e.\u0275\u0275property("ngTemplateOutlet",t)}}function ce(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(25);e.\u0275\u0275property("ngTemplateOutlet",t)}}function pe(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(27);e.\u0275\u0275property("ngTemplateOutlet",t)}}function me(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(31);e.\u0275\u0275property("ngTemplateOutlet",t)}}function de(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(21);e.\u0275\u0275property("ngTemplateOutlet",t)}}function _e(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().value,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,t,a.AppConsts.DateWithHourFormat))}}function ue(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"b"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function ge(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(5),a=e.\u0275\u0275nextContext().row;e.\u0275\u0275property("ngbTooltip",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("+",a.otherAssignedTo.length,"")}}function Te(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li")(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function fe(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ul"),e.\u0275\u0275template(1,Te,3,1,"li",32),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).row;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.otherAssignedTo)}}function ve(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",28)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ge,2,2,"span",29),e.\u0275\u0275template(4,fe,2,1,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.firstAssignedTo),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.otherAssignedTo?null:t.otherAssignedTo.length)>0)}}function be(n,i){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275textInterpolate1(" ",t," ")}}function Ce(n,i){if(1&n&&e.\u0275\u0275element(0,"i",34),2&n){const t=e.\u0275\u0275nextContext(2).row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("text-success",t.task.status===a.TaskDurationStatus.Normal)("text-danger",t.task.status===a.TaskDurationStatus.Late)}}function he(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,Ce,1,4,"i",33),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.tab!==a.TaskTabEnum.myFinishedTask),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(3,2,t.task.assignDate,a.AppConsts.DateWithHourFormat)," ")}}function ke(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().row,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.redircetTaskUrl(o.task.taskURL))}),e.\u0275\u0275element(1,"i",36),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275property("disabled",!t.task.taskURL)}}function xe(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().row;e.\u0275\u0275nextContext(2);const s=e.\u0275\u0275reference(11);return e.\u0275\u0275resetView(s.open(o.task.requestNo))}),e.\u0275\u0275element(1,"i",38),e.\u0275\u0275elementEnd()}}function Se(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",44),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(2).row;e.\u0275\u0275nextContext(2);const x=e.\u0275\u0275reference(13);return e.\u0275\u0275resetView(x.open(l.task.id,s))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.actionName," ")}}function ye(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",39)(1,"button",40),e.\u0275\u0275element(2,"i",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",42),e.\u0275\u0275template(4,Se,2,1,"button",43),e.\u0275\u0275elementStart(5,"button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().row;e.\u0275\u0275nextContext(2);const s=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(s.open(o.task.id))}),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().row,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.redircetTaskUrl(o.task.taskURL))}),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.task.actions),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,3,"TaskService::TasksReassign")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,5,"TaskService::ActionView")," ")}}function Fe(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().row,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.redircetTaskUrl(null==o.request?null:o.request.formUrl))}),e.\u0275\u0275element(1,"i",36),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275property("disabled",!(null!=t.request&&t.request.formUrl))}}function we(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",15),e.\u0275\u0275template(4,ae,1,1,"ng-container",16),e.\u0275\u0275template(5,oe,1,1,"ng-container",16),e.\u0275\u0275template(6,ie,1,1,"ng-container",16),e.\u0275\u0275template(7,se,1,1,"ng-container",16),e.\u0275\u0275template(8,re,1,1,"ng-container",16),e.\u0275\u0275template(9,le,1,1,"ng-container",16),e.\u0275\u0275template(10,ce,1,1,"ng-container",16),e.\u0275\u0275template(11,pe,1,1,"ng-container",16),e.\u0275\u0275template(12,me,1,1,"ng-container",16),e.\u0275\u0275template(13,de,1,1,"ng-container",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,_e,3,4,"ng-template",null,18,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(16,ue,2,1,"ng-template",null,19,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(18,ve,6,2,"ng-template",null,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(20,be,1,1,"ng-template",null,21,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(22,he,4,5,"ng-template",null,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(24,ke,2,1,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(26,xe,2,0,"ng-template",null,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(28,ye,11,7,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(30,Fe,2,1,"ng-template",null,26,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,11,t.name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",t.prop),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","task.taskNo"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","task.taskName"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","task.assignDate"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","task.assignEndDate"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","assignTo.name"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","action"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionView"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionRequestStatus"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionViewRequest")}}function De(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ngx-datatable-column",12),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275template(2,we,32,13,"ng-template",13),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("name",e.\u0275\u0275pipeBind1(1,8,t.name))("prop",t.prop)("flexGrow",t.flexGrow)("sortable",!1)("resizeable",!1)("draggable",!1)("minWidth",t.minWidth)("cellClass",t.cellClass)}}function Le(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-nodata-or-loading",46),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementStart(5,"div",47)(6,"app-pager",48),e.\u0275\u0275listener("pageNumberChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onPageNumberChange(o))})("pageSizeChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(),l=e.\u0275\u0275reference(4);return e.\u0275\u0275resetView(s.onPageSizeChange(o,l))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=i.rowCount,a=i.pageSize,o=i.curPage,s=e.\u0275\u0275nextContext();e.\u0275\u0275property("isLoadingData",s.service.isLoading)("isDataNotEmpty",s.data.items.length>0)("isDataFiltered",s.service.isFiltering)("nodataMessage",e.\u0275\u0275pipeBind1(1,10,"CMSService::NoNewTasks"))("nodataHint",e.\u0275\u0275pipeBind1(2,12,"CMSService::ReturnLater"))("noFilterResultMessage",e.\u0275\u0275pipeBind1(3,14,"CMSService::TasksNoFilterResults"))("noFilterResultHint",e.\u0275\u0275pipeBind1(4,16,"CMSService::ChangeFilters")),e.\u0275\u0275advance(6),e.\u0275\u0275property("page",o)("size",a)("count",t)}}let Ee=(()=>{class n{ngOnChanges({tab:t}){t.currentValue!==t.previousValue&&(this.columns=this._columns.filter(a=>!a.excludeTab?.find(o=>o===t.currentValue)))}constructor(t,a){this.service=t,this._config=a,this.TaskTabEnum=d.Ds,this.TaskDurationStatus=L,this.AppConsts=c.AppConsts,this.data={items:[],totalCount:0},this._columns=[{name:"TaskService::TaskList:TaskNo",prop:"task.taskNo",flexGrow:2},{name:"TaskService::TaskList:TaskName",prop:"task.taskName",flexGrow:3},{name:"TaskService::TaskList:RequestNO",prop:"request.requestNO",flexGrow:2},{name:"TaskService::TaskList:RequestName",prop:"service.serviceName",flexGrow:2},{name:"TaskService::TaskList:ServiceType",prop:"serviceSubCategory.name",flexGrow:2},{name:"TaskService::TaskList:ServiceCategory",prop:"serviceCategory.name",flexGrow:2},{name:"TaskService::TaskList:RequestedBy",prop:"requestedBy.name",minWidth:75,flexGrow:1},{name:"TaskService::TaskList:DateOfAssignment",prop:"task.assignDate",flexGrow:2},{name:"TaskService::TaskList:EndDateOfAssignment",prop:"task.assignEndDate",flexGrow:2,excludeTab:[d.Ds.myPendingTasks,d.Ds.myTeamTask]},{name:"TaskService::TaskList:AssignTo",prop:"assignTo.name",flexGrow:2,excludeTab:[d.Ds.myPendingTasks,d.Ds.myFinishedTask]},{name:"TaskService::TaskList:Action",prop:"action",flexGrow:1,excludeTab:[d.Ds.myFinishedTask,d.Ds.myTeamTask],cellClass:"action-cell",minWidth:"55"},{name:"TaskService::TaskList:ActionView",prop:"actionView",flexGrow:1,width:"10",excludeTab:[d.Ds.myFinishedTask,d.Ds.myTeamTask],cellClass:"d-responsive-none"},{name:"TaskService::TaskList:ActionRequestStatus",prop:"actionRequestStatus",flexGrow:1,width:"10",excludeTab:[d.Ds.myPendingTasks]},{name:"TaskService::TaskList:ActionViewRequest",prop:"actionViewRequest",flexGrow:1,width:"10",excludeTab:[d.Ds.myPendingTasks,d.Ds.myTeamTask]}],this.columns=[],a.placement="bottom-end"}ngOnInit(){this.sub$=this.service.list.hookToQuery(o=>(this.data.items=[],this.service.getList(o).pipe((0,T.switchMap)(s=>(0,T.of)({totalCount:s.totalCount,items:s.items.map(l=>{const x=l.assignTo?.name?.split(",")??[];return{...l,firstAssignedTo:x.length>0?x[0]:void 0,otherAssignedTo:x.length>1?x.slice(1):void 0}})}))))).subscribe(o=>{this.data=o})}onPageSizeChange(t,a){a.limit=t,this.service.list.maxResultCount=t,this.service.list.page=0}onPageNumberChange(t){this.service.list.page=t-1}refreshList(){this.service.refresh()}ngOnDestroy(){this.sub$?.unsubscribe()}redircetTaskUrl(t){t&&(window.location.href=t)}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(S),e.\u0275\u0275directiveInject(b.NgbDropdownConfig))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-task-list"]],inputs:{tab:"tab"},features:[e.\u0275\u0275NgOnChangesFeature],decls:14,vars:9,consts:[[1,"card","mt-3","ngx-datatable-card"],[1,"card-body","p-3"],[1,"ngx-datatable-container"],["default","",3,"rows","count","list","columnMode","limit"],["table",""],[3,"name","prop","flexGrow","sortable","resizeable","draggable","minWidth","cellClass",4,"ngFor","ngForOf"],["ngx-datatable-footer-template","","ngx-datatable-footer-template",""],[3,"userInfo","successCreated"],["reassingTask",""],["requestStatus",""],[3,"successCreated"],["executeAction",""],[3,"name","prop","flexGrow","sortable","resizeable","draggable","minWidth","cellClass"],["ngx-datatable-cell-template",""],[1,"column-label"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["columnDate",""],["columnBold",""],["columnAssignTo",""],["valueOnly",""],["columnAssignDate",""],["columnView",""],["columnRequestStatus",""],["columnAction",""],["columnViewRequest",""],[3,"ngTemplateOutlet"],[1,"task-users"],["class","badge-user-count",3,"ngbTooltip",4,"ngIf"],["otherAssignedUser",""],[1,"badge-user-count",3,"ngbTooltip"],[4,"ngFor","ngForOf"],["class","lg-icon icon-flag",3,"text-success","text-danger",4,"ngIf"],[1,"lg-icon","icon-flag"],[1,"btn","btn-outline-primary","action-btn","p-1","d-md-none","d-xl-block",3,"disabled","click"],[1,"icon-document-text"],[1,"btn","btn-outline-primary","action-btn","p-1",3,"click"],[1,"icon-information-circle"],["ngbDropdown","","container","body",1,"d-inline-block","action-dropdown-menu"],["data-toggle","dropdown","aria-haspopup","true","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"icon-dots-horizontal"],["ngbDropdownMenu","",1,"ngx-datatable-dropdown"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",1,"d-xl-none",3,"click"],["loaderImage","table.svg","nodataImage","tasks.svg","noFilterResultImage","no-filter-result.svg",3,"isLoadingData","isDataNotEmpty","isDataFiltered","nodataMessage","nodataHint","noFilterResultMessage","noFilterResultHint"],[1,"w-100","footer"],[3,"page","size","count","pageNumberChanged","pageSizeChanged"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"ngx-datatable",3,4),e.\u0275\u0275template(5,De,3,10,"ngx-datatable-column",5),e.\u0275\u0275elementStart(6,"ngx-datatable-footer"),e.\u0275\u0275template(7,Le,7,18,"ng-template",6),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(8,"app-task-action-reassign",7,8),e.\u0275\u0275listener("successCreated",function(){return o.refreshList()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"app-task-view-request-status",null,9),e.\u0275\u0275elementStart(12,"app-task-execute-action",10,11),e.\u0275\u0275listener("successCreated",function(){return o.refreshList()}),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(3),e.\u0275\u0275classProp("is-empty",o.service.isLoading||0===o.data.items.length),e.\u0275\u0275property("rows",o.data.items)("count",o.data.totalCount)("list",o.service.list)("columnMode","flex")("limit",o.service.list.maxResultCount),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.columns),e.\u0275\u0275advance(3),e.\u0275\u0275property("userInfo",o.service.currentUser))},dependencies:[_.NgForOf,_.NgIf,_.NgTemplateOutlet,_.NgSwitch,_.NgSwitchCase,_.NgSwitchDefault,k.DatatableComponent,k.DataTableColumnDirective,k.DataTableColumnCellDirective,k.DataTableFooterTemplateDirective,k.DatatableFooterDirective,f.NgxDatatableDefaultDirective,f.NgxDatatableListDirective,c.PagerComponent,c.NodataOrLoadingComponent,b.NgbTooltip,b.NgbDropdown,b.NgbDropdownToggle,b.NgbDropdownMenu,b.NgbDropdownItem,K,J,ne,_.DatePipe,g.LocalizationPipe],styles:["app-nodata-or-loading[_ngcontent-%COMP%]{min-height:270px}.lg-icon[_ngcontent-%COMP%]{font-size:16px;-webkit-text-stroke:.3px;line-height:16px}.task-users[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:10px}.task-users[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.task-users[_ngcontent-%COMP%]   .badge-user-count[_ngcontent-%COMP%]{border-radius:20px;background:var(--neutral-100, #F1F5F9);padding:2px 8px;gap:4px;display:flex;align-items:center;direction:ltr;font-weight:500;line-height:22px;font-size:12px}"]})}return n})();function Ie(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.isReadonly?"TaskService::TodoTasks:View":"TaskService::TodoTasks:Create"))}}function Ve(n,i){1&n&&(e.\u0275\u0275elementStart(0,"button",32),e.\u0275\u0275element(1,"i",33),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"AbpUi::Save")," "))}function Me(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",3),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.save())}),e.\u0275\u0275elementStart(1,"div",4)(2,"div",5)(3,"div",6)(4,"label",7),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"label",9),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"textarea",10),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",11)(16,"div",6)(17,"label",12),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",11)(22,"div",6)(23,"label",14),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"app-ng-select-auto-complete",15),e.\u0275\u0275listener("valueChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onSelectUser(o))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",11)(28,"div",6)(29,"label",16),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",17),e.\u0275\u0275element(33,"input",18),e.\u0275\u0275elementStart(34,"div",19),e.\u0275\u0275element(35,"i",20),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(36,"div",11)(37,"div",6)(38,"label",21),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275reference(43);return e.\u0275\u0275resetView(o.toggle())}),e.\u0275\u0275element(42,"input",23,24),e.\u0275\u0275elementStart(44,"div",19),e.\u0275\u0275element(45,"i",20),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(46,"div",11)(47,"div",6)(48,"label",25),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"div",26)(52,"label",27),e.\u0275\u0275text(53),e.\u0275\u0275pipe(54,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(55,"input",28),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(56,"div",29),e.\u0275\u0275template(57,Ve,4,3,"button",30),e.\u0275\u0275elementStart(58,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.cancel())}),e.\u0275\u0275text(59),e.\u0275\u0275pipe(60,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,16,"TaskService::TodoTask:TaskTitle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,18,"TaskService::TodoTask:Description")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD028MaxLength)("placeholder",e.\u0275\u0275pipeBind1(14,20,t.ValidationConsts.FD028PlaceHolder)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(19,22,"TaskService::TodoTask:AssignedBy")," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(25,24,"TaskService::TodoTask:AssignedTo")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchUserFn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(31,26,"TaskService::TodoTask:StartDate")),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(40,28,"TaskService::TodoTask:EndDate")),e.\u0275\u0275advance(3),e.\u0275\u0275property("minDate",t.minDete),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,30,"TaskService::TodoTask:Status")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(54,32,t.isCompleted?"TaskService::TodoTasks:Completed":"TaskService::TodoTasks:UnCompleted")," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!t.isReadonly),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(60,34,t.isReadonly?"::Close":"AbpUi::Cancel")," ")}}let Oe=(()=>{class n{constructor(t,a,o,s){this._fb=t,this._toasterService=a,this._service=o,this._confirmationService=s,this.successCreated=new e.EventEmitter,this.ValidationConsts=c.ValidationConsts,this.isModalOpen=!1,this.isReadonly=!1,this.isCompleted=!1,this.modalOptions={size:"lg",centered:!0,backdrop:"static"},this.searchUserFn=this._searchUser.bind(this)}buildForm(t){const{title:a,description:o,ownerFullNAme:s,assignedTo:l,taskStartDate:x,taskEndDate:N,toDoStatus:B}=t||{};this.isCompleted=!!B&&B==h.Complete;const E=new Date;this.minDete={year:E.getFullYear(),month:E.getMonth()+1,day:E.getDate()},this.form=this._fb.group({title:[a,[c.CustomValidators.RequiredValidator(),r.Validators.minLength(c.ValidationConsts.FD012MinLength),r.Validators.maxLength(c.ValidationConsts.FD012MaxLength),c.CustomValidators.InvalidCharacterValidator()]],description:[o,[c.CustomValidators.RequiredValidator(),r.Validators.maxLength(c.ValidationConsts.FD028MaxLength),c.CustomValidators.InvalidCharacterValidator()]],userAssignTask:[{value:this.isReadonly?s:this.userInfo?.userName,disabled:!0}],assignedTo:[l,[c.CustomValidators.RequiredValidator(),c.CustomValidators.InvalidCharacterValidator()]],taskStartDate:[{value:(x??(new Date).toISOString()).substring(0,10),disabled:!0}],taskEndDate:[N?new Date(N):void 0,[c.CustomValidators.RequiredValidator()]],status:[{value:this.isCompleted,disabled:!0}]}),this.isReadonly?this.form.disable():this.form.controls.taskEndDate.addValidators(c.CustomValidators.DateAfterOrSameValidator(this.form.controls.taskStartDate))}onSelectUser(t){this.selectedUser=t}open(t,a){this.isReadonly=a,this.modalOptions.backdrop=!!a||"static",this.buildForm(t),this.isModalOpen=!0}_searchUser(t){return this._service.usersLookUpByDepartmentIdAndInput(void 0,t)}save(){this.form.invalid?this._toasterService.warn("::FormValidationWarining"):this._confirmationService.warn("TaskService::TodoTask:SaveWarning","::AreYouSure",void 0,{yesSeverity:"success",messageLocalizationParams:[this.selectedUser?.displayName??" "]}).subscribe(t=>{if(t===p.SWConfirmation.SWStatus.confirm){const a=this.form.getRawValue();this._service.addToDoTaskByInput(a).subscribe(()=>{this._toasterService.success("::Success"),this.successCreated.emit(!0),this.isModalOpen=!1})}})}cancel(){this.isReadonly?this.isModalOpen=!1:this._confirmationService.warn("::CONF004","::AreYouSure",void 0,{yesSeverity:"error"}).pipe((0,T.filter)(t=>t===p.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this.isModalOpen=!1})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(r.FormBuilder),e.\u0275\u0275directiveInject(f.ToasterService),e.\u0275\u0275directiveInject(C.M),e.\u0275\u0275directiveInject(p.SWConfirmationService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-todo-task-create"]],inputs:{userInfo:"userInfo"},outputs:{successCreated:"successCreated"},decls:5,vars:2,consts:[[3,"options","visible","visibleChange"],["abpHeader",""],["abpBody",""],[3,"formGroup","ngSubmit"],[1,"row","form-controls"],[1,"col-lg-12"],[1,"form-group"],["for","taskTitle",1,"form-label"],["type","text","id","taskTitle","formControlName","title",1,"form-control",3,"maxlength"],["for","taskDesc",1,"form-label"],["id","taskDesc","rows","5","formControlName","description",1,"form-control",3,"maxlength","placeholder"],[1,"col-lg-6"],["for","userAssignTask",1,"form-label"],["type","text","id","userAssignTask","formControlName","userAssignTask",1,"form-control"],["for","userAssignedTo",1,"form-label"],["formControlName","assignedTo",3,"searchFn","valueChanged"],["for","taskStartDate",1,"form-label"],[1,"date-picker-container"],["name","datepicker","formControlName","taskStartDate",1,"form-control"],[1,"date-picker-icon"],[1,"icon-calendar"],["for","taskEndDate",1,"form-label"],[1,"date-picker-container",3,"click"],["name","datepicker","formControlName","taskEndDate","ngbDatepicker","",1,"form-control",3,"minDate"],["taskEndDate","ngbDatepicker"],["for","status",1,"form-label"],[1,"form-check","form-switch","pt-1"],["for","switchActiveStatus",1,"form-label"],["type","checkbox","id","switchActiveStatus","formControlName","status",1,"form-check-input","switch-layout","me-2"],[1,"modal-footer"],["class","btn btn-primary ms-2",4,"ngIf"],["type","button",1,"btn","btn-outline-light",3,"click"],[1,"btn","btn-primary","ms-2"],[1,"fa","fa-check","me-1"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(l){return o.isModalOpen=l}),e.\u0275\u0275template(1,Ie,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,Me,61,36,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("options",o.modalOptions)("visible",o.isModalOpen)},dependencies:[_.NgIf,r.\u0275NgNoValidate,r.DefaultValueAccessor,r.CheckboxControlValueAccessor,r.NgControlStatus,r.NgControlStatusGroup,r.MaxLengthValidator,r.FormGroupDirective,r.FormControlName,g.FormSubmitDirective,v.ValidationGroupDirective,v.ValidationDirective,f.ModalComponent,c.NgSelectAutoCompleteComponent,b.NgbInputDatepicker,g.LocalizationPipe],styles:[".form-controls[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:12px}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{border-color:#2dd4bf!important;background-color:#2dd4bf!important}"]})}return n})();function Ne(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(10);return e.\u0275\u0275resetView(o.open())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(1,"svg",11),e.\u0275\u0275element(2,"path",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(3,"span",13),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()}2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,1,"TaskService::TodoTasks:Create")))}function Be(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Ae(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Re(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(16);e.\u0275\u0275property("ngTemplateOutlet",t)}}function ze(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(18);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Pe(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(20);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Ue(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(22);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Ge(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(24);e.\u0275\u0275property("ngTemplateOutlet",t)}}function je(n,i){if(1&n&&e.\u0275\u0275elementContainer(0,27),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(14);e.\u0275\u0275property("ngTemplateOutlet",t)}}function $e(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().value,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,t,a.AppConsts.DateOnlyFormat))}}function We(n,i){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275textInterpolate1(" ",t," ")}}function qe(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",28)(1,"input",29),e.\u0275\u0275listener("click",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().row,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.statusChange(o,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",30),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.toDoStatus===a.ToDoCompleteStatus.Complete)("id","status"+t.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","status"+t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,4,t.toDoStatus===a.TodoTaskStatusEnum.Completed?"TaskService::TodoTaskStatus:"+a.ToDoCompleteStatus.Complete:"TaskService::TodoTaskStatus:"+a.ToDoCompleteStatus.UnComplete))}}function He(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275element(1,"span",32),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("bg-success",t.toDoStatus===a.TodoTaskStatusEnum.Completed)("bg-warning",t.toDoStatus===a.TodoTaskStatusEnum.UnCompleted),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,5,t.toDoStatus===a.TodoTaskStatusEnum.Completed?"TaskService::TodoTaskStatus:"+a.ToDoCompleteStatus.Complete:"TaskService::TodoTaskStatus:"+a.ToDoCompleteStatus.UnComplete),"")}}function Ke(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",33),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().row;e.\u0275\u0275nextContext(2);const s=e.\u0275\u0275reference(10);return e.\u0275\u0275resetView(s.open(o,!0))}),e.\u0275\u0275element(1,"i",34),e.\u0275\u0275elementEnd()}}function Qe(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2).row,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.deleteTask(o))}),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275elementEnd()}}function Ye(n,i){if(1&n&&e.\u0275\u0275template(0,Qe,2,0,"button",35),2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.toDoStatus===a.TodoTaskStatusEnum.Completed)}}function Ze(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",42),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2).row,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.deleteTask(o))}),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"TaskService::TodoTaskList:ActionDelete")," "))}function Je(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38)(1,"button",39),e.\u0275\u0275element(2,"i",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",41)(4,"button",42),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().row;e.\u0275\u0275nextContext(2);const s=e.\u0275\u0275reference(10);return e.\u0275\u0275resetView(s.open(o,!0))}),e.\u0275\u0275element(5,"i",34),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ze,4,3,"button",43),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,2,"TaskService::TodoTaskList:ActionView")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.todoTab===a.ToDoAssignee.AssignedByMe&&t.toDoStatus===a.TodoTaskStatusEnum.Completed)}}function Xe(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",17),e.\u0275\u0275template(3,Be,1,1,"ng-container",18),e.\u0275\u0275template(4,Ae,1,1,"ng-container",18),e.\u0275\u0275template(5,Re,1,1,"ng-container",18),e.\u0275\u0275template(6,ze,1,1,"ng-container",18),e.\u0275\u0275template(7,Pe,1,1,"ng-container",18),e.\u0275\u0275template(8,Ue,1,1,"ng-container",18),e.\u0275\u0275template(9,Ge,1,1,"ng-container",18),e.\u0275\u0275template(10,je,1,1,"ng-container",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,$e,3,4,"ng-template",null,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(13,We,1,1,"ng-template",null,21,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(15,qe,5,6,"ng-template",null,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(17,He,4,7,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(19,Ke,2,0,"ng-template",null,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(21,Ye,1,1,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(23,Je,9,4,"ng-template",null,26,e.\u0275\u0275templateRefExtractor)),2&n){const t=i.column;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",t.prop),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","taskStartDate"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","taskEndDate"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","status"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","statusBadge"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionView"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionDelete"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actions")}}function et(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ngx-datatable-column",14),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275template(2,Xe,25,9,"ng-template",15),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("is-empty",a.service.isLoading||0===a.data.items.length),e.\u0275\u0275property("name",e.\u0275\u0275pipeBind1(1,11,t.name))("prop",t.prop)("flexGrow",t.flexGrow)("sortable",!1)("resizeable",!1)("draggable",!1)("maxWidth",t.maxWidth)("cellClass",t.cellClass)("headerClass",t.headerClass)}}function tt(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-nodata-or-loading",44),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementStart(5,"div",45)(6,"app-pager",46),e.\u0275\u0275listener("pageNumberChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onPageNumberChange(o))})("pageSizeChanged",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(),l=e.\u0275\u0275reference(5);return e.\u0275\u0275resetView(s.onPageSizeChange(o,l))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=i.rowCount,a=i.pageSize,o=i.curPage,s=e.\u0275\u0275nextContext();e.\u0275\u0275property("isLoadingData",s.service.isLoading)("isDataNotEmpty",s.data.items.length>0)("isDataFiltered",(null==s.service._selectedFiltersBannerService.selectedFilters?null:s.service._selectedFiltersBannerService.selectedFilters.length)>0)("nodataMessage",e.\u0275\u0275pipeBind1(1,10,"CMSService::NoNewTasks"))("nodataHint",e.\u0275\u0275pipeBind1(2,12,"CMSService::ReturnLater"))("noFilterResultMessage",e.\u0275\u0275pipeBind1(3,14,"CMSService::TasksNoFilterResults"))("noFilterResultHint",e.\u0275\u0275pipeBind1(4,16,"CMSService::ChangeFilters")),e.\u0275\u0275advance(6),e.\u0275\u0275property("page",o)("size",a)("count",t)}}let nt=(()=>{class n{ngOnChanges({todoTab:t}){t.currentValue!==t.previousValue&&(this.columns=this._columns.filter(a=>!a.excludeTab?.find(o=>o===t.currentValue)))}constructor(t,a,o,s){this.service=t,this._taskService=a,this._confirmation=o,this._toasterService=s,this.ToDoAssignee=u,this.TodoTaskStatusEnum=d.vY,this.data={items:[],totalCount:0},this.ToDoCompleteStatus=h,this.AppConsts=c.AppConsts,this.isChecked=!1,this._columns=[{name:"TaskService::TodoTaskList:TaskTitle",prop:"title",flexGrow:3},{name:"TaskService::TodoTaskList:AssignedBy",prop:"ownerFullNAme",flexGrow:2,excludeTab:[u.AssignedByMe]},{name:"TaskService::TodoTaskList:AssignedTo",prop:"assignToFullName",flexGrow:2,excludeTab:[u.AssignedToMe]},{name:"TaskService::TodoTaskList:StartDate",prop:"taskStartDate",flexGrow:2},{name:"TaskService::TodoTaskList:EndDate",prop:"taskEndDate",flexGrow:2,excludeTab:[u.AssignedToMe]},{name:"TaskService::TodoTaskList:Status",prop:"status",flexGrow:2,excludeTab:[u.AssignedByMe]},{name:"TaskService::TodoTaskList:Status",prop:"statusBadge",flexGrow:2,excludeTab:[u.AssignedToMe]},{name:"TaskService::TodoTaskList:ActionView",prop:"actionView",flexGrow:1,cellClass:"d-responsive-none",maxWidth:46},{name:"TaskService::TodoTaskList:ActionDelete",prop:"actionDelete",flexGrow:1,excludeTab:[u.AssignedToMe],cellClass:"d-responsive-none",maxWidth:46},{name:"::Actions",prop:"actions",flexGrow:0,cellClass:"action-cell d-desktop-none",headerClass:"d-desktop-none"}],this.columns=[]}ngOnInit(){this.sub$=this.service.list.hookToQuery(o=>(this.data.items=[],this.service.getToDoList(o))).subscribe(o=>{this.data=o})}onPageSizeChange(t,a){a.limit=t,this.service.list.maxResultCount=t,this.service.list.page=0}onPageNumberChange(t){this.service.list.page=t-1}statusChange(t,a){t.preventDefault(),a.toDoStatus==h.Complete?this.unCompleteTask(a):this.completeTask(a)}completeTask(t){this._confirmation.warn("TaskService::TodoList:CompleteConfirmation","TaskService::TodoTask:CompleteTask",void 0,{messageLocalizationParams:[t.ownerFullNAme],yesSeverity:"success",yesText:"TaskService::TodoTask:CompleteTask:SaveButton"}).subscribe(a=>{a===p.SWConfirmation.SWStatus.confirm&&this._taskService.complete(t.id).subscribe(()=>{this._toasterService.success("::Success"),t.toDoStatus=h.Complete})})}unCompleteTask(t){this._confirmation.warn("TaskService::TodoList:UnCompleteConfirmation","TaskService::TodoTask:UnCompleteTask",void 0,{messageLocalizationParams:[t.ownerFullNAme],yesSeverity:"error",yesText:"TaskService::TodoTask:UnCompleteTask:SaveButton"}).subscribe(a=>{a===p.SWConfirmation.SWStatus.confirm&&this._taskService.unComplete(t.id).subscribe(()=>{this._toasterService.success("::Success"),t.toDoStatus=h.UnComplete})})}deleteTask(t){this._confirmation.warn("TaskService::TodoList:DeleteConfirmation","::DeleteConfimation",void 0,{messageLocalizationParams:[t.assignToFullName],yesSeverity:"error",yesText:"::DeleteConfimation:SaveButton"}).subscribe(a=>{a===p.SWConfirmation.SWStatus.confirm&&this._taskService.deleteToDo(t.id).subscribe(()=>{this._toasterService.success("::Success"),this.service.refresh()})})}ngOnDestroy(){this.sub$?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(S),e.\u0275\u0275directiveInject(C.M),e.\u0275\u0275directiveInject(p.SWConfirmationService),e.\u0275\u0275directiveInject(f.ToasterService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-todo-task-list"]],inputs:{todoTab:"todoTab"},features:[e.\u0275\u0275NgOnChangesFeature],decls:11,vars:10,consts:[[1,"card","mt-3","ngx-datatable-card"],[1,"card-body","p-3"],["class","btn btn-primary btn-sm mb-2 d-flex align-items-center",3,"click",4,"ngIf"],[1,"ngx-datatable-container"],["default","",3,"rows","count","list","columnMode","limit"],["table",""],[3,"name","prop","flexGrow","sortable","resizeable","draggable","maxWidth","is-empty","cellClass","headerClass",4,"ngFor","ngForOf"],["ngx-datatable-footer-template",""],[3,"userInfo","successCreated"],["createTask",""],[1,"btn","btn-primary","btn-sm","mb-2","d-flex","align-items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["d","M10 7.5V10M10 10V12.5M10 10H12.5M10 10H7.5M17.5 10C17.5 14.1421 14.1421 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5C14.1421 2.5 17.5 5.85786 17.5 10Z","stroke","white","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"ms-1"],[3,"name","prop","flexGrow","sortable","resizeable","draggable","maxWidth","cellClass","headerClass"],["ngx-datatable-cell-template",""],[1,"column-label"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["columnDate",""],["valueOnly",""],["columnStatus",""],["columnStatusBadge",""],["columnView",""],["columnDelete",""],["columnAction",""],[3,"ngTemplateOutlet"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","id","click"],[1,"form-check-label","px-1",3,"for"],[1,"d-flex","align-items-center"],[1,"badge","badge-status","me-1"],["onclick","this.blur();",1,"btn","btn-outline-primary","action-btn","p-1",3,"click"],[1,"icon-document-text"],["class","btn btn-outline-danger action-btn p-1",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger","action-btn","p-1",3,"click"],[1,"icon-trash"],["ngbDropdown","","container","body",1,"action-dropdown-menu"],["data-toggle","dropdown","aria-haspopup","true","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"icon-dots-horizontal"],["ngbDropdownMenu","",1,"ngx-datatable-dropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",3,"click",4,"ngIf"],["loaderImage","table.svg","nodataImage","Group.svg","noFilterResultImage","no-filter-result.svg",3,"isLoadingData","isDataNotEmpty","isDataFiltered","nodataMessage","nodataHint","noFilterResultMessage","noFilterResultHint"],[1,"w-100","footer"],[3,"page","size","count","pageNumberChanged","pageSizeChanged"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,Ne,6,3,"button",2),e.\u0275\u0275elementStart(3,"div",3)(4,"ngx-datatable",4,5),e.\u0275\u0275template(6,et,3,13,"ngx-datatable-column",6),e.\u0275\u0275elementStart(7,"ngx-datatable-footer"),e.\u0275\u0275template(8,tt,7,18,"ng-template",7),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(9,"app-todo-task-create",8,9),e.\u0275\u0275listener("successCreated",function(){return o.service.refresh()}),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.todoTab===o.ToDoAssignee.AssignedByMe),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-empty",o.service.isLoading||0===o.data.items.length),e.\u0275\u0275property("rows",o.data.items)("count",o.data.totalCount)("list",o.service.list)("columnMode","flex")("limit",o.service.list.maxResultCount),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.columns),e.\u0275\u0275advance(3),e.\u0275\u0275property("userInfo",o.service.currentUser))},dependencies:[_.NgForOf,_.NgIf,_.NgTemplateOutlet,_.NgSwitch,_.NgSwitchCase,_.NgSwitchDefault,r.CheckboxControlValueAccessor,r.NgControlStatus,r.NgModel,k.DatatableComponent,k.DataTableColumnDirective,k.DataTableColumnCellDirective,k.DataTableFooterTemplateDirective,k.DatatableFooterDirective,f.NgxDatatableDefaultDirective,f.NgxDatatableListDirective,c.PagerComponent,c.NodataOrLoadingComponent,b.NgbDropdown,b.NgbDropdownToggle,b.NgbDropdownMenu,b.NgbDropdownItem,Oe,_.DatePipe,g.LocalizationPipe],styles:[".btn.view[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:8px 12px}.btn.view[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#8653e0}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{border-color:#2dd4bf!important;background-color:#2dd4bf!important}.badge-status[_ngcontent-%COMP%]{transform:scale(.8);min-height:12px;display:inline-flex}app-nodata-or-loading[_ngcontent-%COMP%]{min-height:270px}"]})}return n})();function at(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("( ",t.count," )")}}function ot(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.changeServiceCategory(null==s.category?null:s.category.id))}),e.\u0275\u0275element(1,"i"),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,at,2,1,"span",21),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,a=e.\u0275\u0275nextContext(2);let o;e.\u0275\u0275classProp("active",(null!==(o=a.selectedServiceCategoryId)&&void 0!==o?o:null)===(null==t.category?null:t.category.id)),e.\u0275\u0275advance(1),e.\u0275\u0275classMap(null==t.category?null:t.category.icon),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.category?t.category.displayName:e.\u0275\u0275pipeBind1(4,6,"TaskService::Tasks:All")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",void 0!==t.count)}}function it(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ng-scrollbar",17)(1,"div",18),e.\u0275\u0275template(2,ot,6,8,"div",19),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("track","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.serviceCategory)}}function st(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("( ",t.count," )")}}function rt(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.changeSubCategory(null==s.category?null:s.category.id))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,st,2,1,"span",21),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,a=e.\u0275\u0275nextContext(2);let o;e.\u0275\u0275classProp("active",(null!==(o=a.selectedSubCategoryId)&&void 0!==o?o:null)===(null==t.category?null:t.category.id)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.category?t.category.displayName:e.\u0275\u0275pipeBind1(3,4,"TaskService::Tasks:All")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",void 0!==t.count)}}function lt(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ng-scrollbar",17)(1,"div",18),e.\u0275\u0275template(2,rt,5,6,"div",19),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("track","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.subServiceCategory)}}function ct(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("( ",t.count," )")}}function pt(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.changeType(s.tab))}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275template(3,ct,2,1,"span",21),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("active",a.selectedTodoTypeId===t.tab),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,t.tabName)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",void 0!==t.count)}}function mt(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ng-scrollbar",3)(1,"div",23),e.\u0275\u0275template(2,pt,4,6,"div",19),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("track","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.todoTabs)}}function dt(n,i){if(1&n&&e.\u0275\u0275element(0,"app-task-list",24),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("tab",t.tab)}}function _t(n,i){if(1&n&&e.\u0275\u0275element(0,"app-todo-task-list",25),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("todoTab",t.selectedTodoTypeId)}}const ut=[{path:"",component:(()=>{class n{get tab(){return this._tab}get selectedServiceCategoryId(){return this._selectedServiceCategoryId}get selectedSubCategoryId(){return this._selectedSubCategoryId}get selectedTodoTypeId(){return this._selectedTodoTypeId}constructor(t,a,o,s,l){this._selectedFiltersBannerService=t,this._taskService=a,this._appStatusService=o,this._activatedRoute=s,this._router=l,this.TaskTab=d.Ds,this.ToDoAssignee=u,this.serviceCategoryItems=[],this.serviceCategory=[],this.subServiceCategory=[],this.todoTabs=[{tab:u.AssignedToMe,count:0,tabName:"TaskService::TodoTasks:MyAssignedTasks"},{tab:u.AssignedByMe,count:0,tabName:"TaskService::TodoTasks:MyCreatedTasks"}],this.pageUi="app-task-filter",this.isFreezing=!1,this._navigationExtraTab=l.getCurrentNavigation().extras.state?.tab}ngOnInit(){this.serviceCategoryItems=this._activatedRoute.data.value.serviceCategory.items,this.serviceCategory=[{category:void 0,count:void 0},...this.serviceCategoryItems.map(l=>({category:l,count:void 0}))],this.subServiceCategory=[{category:void 0,count:void 0}],this.uiStatus=this._appStatusService.loadStatus(this.pageUi);const t=this.uiStatus.members.filters?.tab??d.Ds.myPendingTasks,a=this.uiStatus.members.filters?.taskForm?.categoryId,o=this.uiStatus.members.filters?.taskForm?.subCategoryId;this._taskService.init(t,a,o,this.uiStatus.members.filters?.todoTaskForm?.assignee??u.AssignedToMe),this._getSubCategoryByCategoryId(a),this._navigationExtraTab&&this.changeTab(this._navigationExtraTab),this._taskService.changeServiceCategoryTab$.subscribe(l=>{this._selectedServiceCategoryId!==l&&(this._selectedServiceCategoryId=l,this._getSubCategoryByCategoryId(l))}),this._taskService.changeSubCategoryTab$.subscribe(l=>{this._selectedSubCategoryId=l}),this._taskService.changeTodoTypeTab$.subscribe(l=>{this._selectedTodoTypeId=l}),this._taskService.changeMainTab$.subscribe(l=>{this._tab=l}),this._taskService.filterChanged$.subscribe(l=>{l&&this._getStatistics(this.tab)})}changeTab(t){this._taskService.changeTab(t)}changeServiceCategory(t){this._taskService.changeServiceCategory(t)}_getSubCategoryByCategoryId(t){t?this._taskService.getSubServiceCategoryLookup(t,{maxResultCount:1e3}).subscribe(a=>{this.subServiceCategory=[{category:void 0,count:void 0},...a.items.map(o=>({category:o,count:void 0}))]}):this.subServiceCategory=[{category:void 0,count:void 0}]}changeSubCategory(t){this._selectedSubCategoryId=t,this._taskService.changeSubCategory(t)}changeType(t){this._taskService.changeTodoType(t)}_getStatistics(t){this._getStatistics$?.unsubscribe(),this._getStatistics$=t===d.Ds.todoListTask?this._taskService.getToDoTaskListCount().subscribe(a=>{this.todoTabs.find(o=>o.tab===u.AssignedByMe).count=a.assignedByMe,this.todoTabs.find(o=>o.tab===u.AssignedToMe).count=a.assignedToMe}):this._taskService.getTasksListCount().subscribe(a=>{this.serviceCategory.forEach(o=>{o.count=a.find(s=>s.categoryId===o.category?.id)?.count??0}),this.serviceCategory.find(o=>null==o.category).count=a.reduce((o,s)=>o+s.count,0)})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(p.SelectedFiltersBannerService),e.\u0275\u0275directiveInject(S),e.\u0275\u0275directiveInject(p.AppStatusService),e.\u0275\u0275directiveInject(y.ActivatedRoute),e.\u0275\u0275directiveInject(y.Router))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-task"]],features:[e.\u0275\u0275ProvidersFeature([S,p.SelectedFiltersBannerService,g.ListService])],decls:30,vars:38,consts:[[3,"pageTitle","icon","oneLineResponsive"],[3,"serviceCategories"],[1,"tab-group"],[3,"track"],[1,"tab-container"],[1,"tab-item",3,"click"],[1,"icon-clipboard-copy"],[3,"innerHTML"],[1,"icon-clock"],[1,"icon-user-group"],[1,"icon-clipboard-list"],[1,"divider"],["class","scroll-sub-tabs",3,"track",4,"ngIf"],[3,"track",4,"ngIf"],[1,"divider","mb-2"],[3,"tab",4,"ngIf"],[3,"todoTab",4,"ngIf"],[1,"scroll-sub-tabs",3,"track"],[1,"tab-container","sub-container"],["class","tab-item sub-item",3,"active","click",4,"ngFor","ngForOf"],[1,"tab-item","sub-item",3,"click"],["class","ms-1",4,"ngIf"],[1,"ms-1"],[1,"tab-container","sub-container","centered"],[3,"tab"],[3,"todoTab"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"abp-page")(1,"app-page-header",0),e.\u0275\u0275element(2,"app-task-filter",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2)(4,"ng-scrollbar",3)(5,"div",4)(6,"div",5),e.\u0275\u0275listener("click",function(){return o.changeTab(o.TaskTab.myPendingTasks)}),e.\u0275\u0275element(7,"i",6)(8,"div",7),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",5),e.\u0275\u0275listener("click",function(){return o.changeTab(o.TaskTab.myFinishedTask)}),e.\u0275\u0275element(11,"i",8)(12,"div",7),e.\u0275\u0275pipe(13,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",5),e.\u0275\u0275listener("click",function(){return o.changeTab(o.TaskTab.myTeamTask)}),e.\u0275\u0275element(15,"i",9)(16,"div",7),e.\u0275\u0275pipe(17,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",5),e.\u0275\u0275listener("click",function(){return o.changeTab(o.TaskTab.todoListTask)}),e.\u0275\u0275element(19,"i",10)(20,"div",7),e.\u0275\u0275pipe(21,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(22,"div",11),e.\u0275\u0275template(23,it,3,2,"ng-scrollbar",12),e.\u0275\u0275template(24,lt,3,2,"ng-scrollbar",12),e.\u0275\u0275template(25,mt,3,2,"ng-scrollbar",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"app-selected-filters-banner"),e.\u0275\u0275element(27,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,dt,1,1,"app-task-list",15),e.\u0275\u0275template(29,_t,1,1,"app-todo-task-list",16),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("pageTitle","TaskService::Tasks")("icon","tasks")("oneLineResponsive",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("serviceCategories",o.serviceCategoryItems),e.\u0275\u0275advance(2),e.\u0275\u0275property("track","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("active",o.tab===o.TaskTab.myPendingTasks),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind3(9,22,"TaskService::Tasks:CurrentTasks","<span class=text-primary>","</span>"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("active",o.tab===o.TaskTab.myFinishedTask),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind3(13,26,"TaskService::Tasks:PreviousTasks","<span class=text-primary>","</span>"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("active",o.tab===o.TaskTab.myTeamTask),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind3(17,30,"TaskService::Tasks:TeamTasks","<span class=text-primary>","</span>"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("active",o.tab===o.TaskTab.todoListTask),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind3(21,34,"TaskService::Tasks:TodoTasks","<span class=text-primary>","</span>"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.tab!==o.TaskTab.todoListTask),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.tab!==o.TaskTab.todoListTask&&o.subServiceCategory.length>1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.tab===o.TaskTab.todoListTask),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.tab!==o.TaskTab.todoListTask),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.tab===o.TaskTab.todoListTask))},dependencies:[_.NgForOf,_.NgIf,I.PageComponent,p.PageHeaderComponent,p.SelectedFiltersBannerComponent,F.NgScrollbar,W,Ee,nt,g.LocalizationPipe],styles:["ng-scrollbar[_ngcontent-%COMP%]{height:66px}ng-scrollbar.scroll-sub-tabs[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]  ng-scrollbar .scrollbar-control{visibility:hidden}[_nghost-%COMP%]  ng-scrollbar:hover .scrollbar-control{visibility:visible}.tab-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.tab-group[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin-bottom:25px}"]})}return n})(),resolve:{serviceCategory:()=>{const n=(0,e.inject)(O.NgxSpinnerService),i=(0,e.inject)(C.M);return n.show(),i.serviceCategoryLookUpByInput({maxResultCount:1e3}).pipe((0,T.finalize)(()=>n.hide()))}}}];let gt=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[y.RouterModule.forChild(ut),y.RouterModule]})}return n})();var Tt=m(92134);let ft=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[gt,Tt.b,F.NgScrollbarModule]})}return n})()}}]);