(self.webpackChunkportal=self.webpackChunkportal||[]).push([[7220],{7220:(T,x,o)=>{o.r(x),o.d(x,{AnnouncementsModule:()=>W});var v=o(28675),d=o(81011),g=o(27437),S=o(89767),s=o(78570),c=o(92482),C=o(30268),D=o(4125),e=o(11705),E=o(42595),_=o(21786),M=o(82830),l=o(36394),h=o(74478),A=o(31093);let L=(()=>{class a extends s.AbstractAdvancedFilterComponent{constructor(t){super(!0),this._annoucementService=t}ngOnInit(){super.ngOnInit(),this._getAnnouncementDepartment()}_getAnnouncementDepartment(){this._annoucementService.getAnnouncementDepartmentLookup({filter:"",maxResultCount:1e3}).subscribe(t=>this.announcementDepartment=t)}initForm(){this.filtersForm=this.fb.group({announcementDepartmentId:new s.FilterFormControl({filterTitle:"CMSService::Announcements:Category",validatorOrOpts:[],filterValueFun:t=>this.announcementDepartment?.items.find(i=>i.id==t).displayName}),publishDateMin:new s.FilterFormControl({filterTitle:"CMSService::Announcements:publishDateMin",validatorOrOpts:[]}),publishDateMax:new s.FilterFormControl({filterTitle:"CMSService::Announcements:publishDateMax",validatorOrOpts:[]}),endDateMin:new s.FilterFormControl({filterTitle:"CMSService::Announcements:endDateMin",validatorOrOpts:[]}),endDateMax:new s.FilterFormControl({filterTitle:"CMSService::Announcements:endDateMax",validatorOrOpts:[]})})}static#e=this.\u0275fac=function(i){return new(i||a)(e.\u0275\u0275directiveInject(S.b))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-announcement-filter"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:56,vars:34,consts:[[3,"filterText","isShowFilters","searchInputText","advancedSearchText","filterTextChange","showAdvancedFilter"],[1,"filters-form",3,"formGroup","ngSubmit"],[1,"scroll-bar"],[1,"row"],[1,"form-group","mt-2"],[1,"form-label"],["formControlName","announcementDepartmentId","bindLabel","displayName","bindValue","id",3,"items","notFoundText"],[1,"form-group","mt-3"],[1,"date-picker-container",3,"click"],["name","datepicker","formControlName","publishDateMin","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["publishDateMin","ngbDatepicker"],[1,"date-picker-icon"],[1,"icon-calendar"],["name","datepicker","formControlName","publishDateMax","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["publishDateMax","ngbDatepicker"],["name","datepicker","formControlName","endDateMin","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["endDateMin","ngbDatepicker"],["name","datepicker","formControlName","endDateMax","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["endDateMax","ngbDatepicker"],[1,"filter-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-close-bar",3,"click"]],template:function(i,n){if(1&i){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-sw-filter",0),e.\u0275\u0275listener("filterTextChange",function(p){return n.chnageFilterText(p)})("showAdvancedFilter",function(p){return p?n.showFilterSidebar():n.closeFilterSidebar()}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return n.submitFilterForm()}),e.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"ng-select",6),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",7)(13,"label",5),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const p=e.\u0275\u0275reference(18);return e.\u0275\u0275resetView(p.toggle())}),e.\u0275\u0275element(17,"input",9,10),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275element(20,"i",12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",4)(22,"label",5),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const p=e.\u0275\u0275reference(27);return e.\u0275\u0275resetView(p.toggle())}),e.\u0275\u0275element(26,"input",13,14),e.\u0275\u0275elementStart(28,"div",11),e.\u0275\u0275element(29,"i",12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"div",4)(31,"label",5),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const p=e.\u0275\u0275reference(36);return e.\u0275\u0275resetView(p.toggle())}),e.\u0275\u0275element(35,"input",15,16),e.\u0275\u0275elementStart(37,"div",11),e.\u0275\u0275element(38,"i",12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(39,"div",4)(40,"label",5),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"div",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const p=e.\u0275\u0275reference(45);return e.\u0275\u0275resetView(p.toggle())}),e.\u0275\u0275element(44,"input",17,18),e.\u0275\u0275elementStart(46,"div",11),e.\u0275\u0275element(47,"i",12),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(48,"div",19)(49,"button",20)(50,"span"),e.\u0275\u0275text(51),e.\u0275\u0275pipe(52,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"button",21),e.\u0275\u0275listener("click",function(){return n.filtersForm.reset()}),e.\u0275\u0275text(54),e.\u0275\u0275pipe(55,"abpLocalization"),e.\u0275\u0275elementEnd()()()()}2&i&&(e.\u0275\u0275property("filterText",n.quickFilter.filterValue)("isShowFilters",n.isShowFilters)("searchInputText",e.\u0275\u0275pipeBind1(1,14,"CMSService::Announcements:Search"))("advancedSearchText",e.\u0275\u0275pipeBind1(2,16,"CMSService::Announcements:AdvancedFilter")),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",n.filtersForm),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,18,"CMSService::Announcements:Category")),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",null==n.announcementDepartment?null:n.announcementDepartment.items)("notFoundText",e.\u0275\u0275pipeBind1(11,20,"::NgSelect:NoDataFound")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,22,"CMSService::Announcements:publishDateMin")),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,24,"CMSService::Announcements:publishDateMax")),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(33,26,"CMSService::Announcements:endDateMin")),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(42,28,"CMSService::Announcements:endDateMax")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(52,30,"::AdvancedFilter:Refresh")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(55,32,"::AdvancedFilter:Clear")," "))},dependencies:[l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.FormSubmitDirective,h.ValidationGroupDirective,h.ValidationDirective,c.SwFilterComponent,A.NgSelectComponent,M.NgbInputDatepicker,d.LocalizationPipe],encapsulation:2})}return a})();var f=o(62411);const b=["announcementDetails"];function P(a,u){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.addAnnouncement())}),e.\u0275\u0275element(1,"img",12),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()}2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("alt",e.\u0275\u0275pipeBind1(2,2,"CMSService::Announcements:AddAnnouncement")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"CMSService::Announcements:AddAnnouncement")))}function y(a,u){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().row,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.canEdit(n))}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275element(2,"i",28),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275classProp("inactive",!(null!=t&&t.canEdit)),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,3,"AbpUi::Edit"))}}function F(a,u){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().row,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.remove(null==n?null:n.id))}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275element(2,"i",30),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275classProp("inactive",!(null!=t&&t.canDelete)),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,3,"AbpUi::Delete"))}}function w(a,u){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"div",15)(3,"span",16),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span",17),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"hr"),e.\u0275\u0275elementStart(8,"div",18)(9,"div",19)(10,"label",20),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"span"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",21)(16,"label",20),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",21)(23,"label",20),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"span"),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",21)(30,"label",20),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"span"),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"abpLocalization"),e.\u0275\u0275pipe(36,"abpLocalization"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(37,"div",22)(38,"label"),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",23)(42,"div",24),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(t).row;e.\u0275\u0275nextContext();const m=e.\u0275\u0275reference(14);return e.\u0275\u0275resetView(m.show(null==r?null:r.id))}),e.\u0275\u0275pipe(43,"abpLocalization"),e.\u0275\u0275element(44,"i",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(45,y,3,5,"div",26),e.\u0275\u0275template(46,F,3,5,"div",27),e.\u0275\u0275elementEnd()()()}if(2&a){const t=u.row,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t?null:t.title," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==t?null:t.content," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(12,14,"CMSService::Announcements:Category")," : "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t?null:t.announcementDepartmentName),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(18,16,"::PublishDate")," : "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(21,18,null==t?null:t.publishDate,i.AppConsts.DateOnlyFormat)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(25,21,"::EndDate")," : "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(28,23,null==t?null:t.endDate,i.AppConsts.DateOnlyFormat)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(32,26,"CMSService::Announcements:Status")," : "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null!=t&&t.isActive?e.\u0275\u0275pipeBind1(35,28,"CMSService::Announcements:Active"):e.\u0275\u0275pipeBind1(36,30,"CMSService::Announcements:Terminated")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(40,32,"::Table:Actions")," : "),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(43,34,"CMSService::Action:ViewDetails")),e.\u0275\u0275advance(3),e.\u0275\u0275property("abpPermission","CMSService.Annoucements.Edit"),e.\u0275\u0275advance(1),e.\u0275\u0275property("abpPermission","CMSService.Annoucements.Delete")}}function O(a,u){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-nodata-or-loading",31),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementStart(5,"div",32)(6,"app-pager",33),e.\u0275\u0275listener("pageNumberChanged",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onPageNumberChange(n))})("pageSizeChanged",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(),m=e.\u0275\u0275reference(8);return e.\u0275\u0275resetView(r.onPageSizeChange(n,m))}),e.\u0275\u0275elementEnd()()}if(2&a){const t=u.rowCount,i=u.pageSize,n=u.curPage,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("isLoadingData",r.service.isLoading)("isDataNotEmpty",r.service.data.items.length>0)("isDataFiltered",r.service.isFiltering)("nodataMessage",e.\u0275\u0275pipeBind1(1,11,"CMSService::NoAnnouncementCurrently"))("nodataHint",e.\u0275\u0275pipeBind1(2,13,r.nodataHint))("nodataLink",r.nodataLink)("noFilterResultMessage",e.\u0275\u0275pipeBind1(3,15,"CMSService::AnnouncementNoFilterResult"))("noFilterResultHint",e.\u0275\u0275pipeBind1(4,17,"CMSService::ChangeFilters")),e.\u0275\u0275advance(6),e.\u0275\u0275property("page",n)("size",i)("count",t)}}function B(a){return new s.ListFilterService(a.getListAdmin)}let N=(()=>{class a extends s.AbstractListComponent{constructor(t,i,n){super(),this._annoucementService=t,this._toasterService=i,this.service=n,this.AppConsts=c.AppConsts}ngOnInit(){this._annoucementService.validateUserDepartment().subscribe(t=>{!0===t?(this.nodataHint="CMSService::YouCanAddAnnouncement",this.nodataLink="/cmsAdmin/announcements/create"):(this.nodataHint="",this.nodataLink="")})}remove(t){this.confirmationService.warn("::CONF002","::DeleteConfimation",void 0,{yesSeverity:"error",yesText:"::DeleteConfimation:SaveButton"}).pipe((0,D.filter)(i=>i===s.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this._annoucementService.delete(t).subscribe(()=>{this._toasterService.success("::SuccessfullyDeleted"),this.list.get()})})}addAnnouncement(){this._annoucementService.validateUserDepartment().subscribe(t=>{!0===t?this.route.navigate(["create"],{relativeTo:this.activatedRoute}):this.confirmationService.error("","CMSService::Announcement:INFO012")})}canEdit(t){t?.isActive?this.edit(t?.id):this.confirmationService.error("","CMSService::Announcement:Expired")}static#e=this.\u0275fac=function(i){return new(i||a)(e.\u0275\u0275directiveInject(S.b),e.\u0275\u0275directiveInject(g.ToasterService),e.\u0275\u0275directiveInject(s.ListFilterService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-announcements-list"]],viewQuery:function(i,n){if(1&i&&e.\u0275\u0275viewQuery(b,5),2&i){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.announcementDetails=r.first)}},features:[e.\u0275\u0275ProvidersFeature([d.ListService,s.SelectedFiltersBannerService,{provide:s.ListFilterService,useFactory:B,deps:[S.b]}]),e.\u0275\u0275InheritDefinitionFeature],decls:15,vars:17,consts:[[3,"pageTitle","icon"],[1,"card","mt-3"],[1,"card-body"],["class","btn btn-sm btn-primary  d-flex align-items-center",3,"click",4,"abpPermission"],[1,"data-view",3,"rows","count","list","columnMode","rowHeight","limit","footerHeight"],["table",""],[3,"flexGrow","sortable","resizeable","draggable"],["ngx-datatable-cell-template",""],["ngx-datatable-footer-template","","ngx-datatable-footer-template",""],[3,"id"],["announcementDetails",""],[1,"btn","btn-sm","btn-primary","d-flex","align-items-center",3,"click"],["src","../../../../../assets/images/plus-circle-add.svg",1,"me-1",3,"alt"],[1,"card-view"],[1,"card-details"],[1,"d-flex","flex-column","w-100"],[1,"title"],[1,"sub-title"],[1,"list-items"],[1,"item","category"],[1,"me-1"],[1,"item"],[1,"card-action"],[1,"table-actions"],["placement","top","container","body",1,"btn","btn-outline-primary",3,"ngbTooltip","click"],[1,"icon-document-text"],["class","btn btn-outline-primary","placement","top","container","body",3,"inactive","ngbTooltip","click",4,"abpPermission"],["class","btn btn-outline-danger","placement","top","container","body",3,"ngbTooltip","inactive","click",4,"abpPermission"],[1,"icon-pencil"],["placement","top","container","body",1,"btn","btn-outline-danger",3,"ngbTooltip","click"],[1,"icon-trash"],["loaderImage","data-view-loader.svg","nodataImage","announcements.svg","noFilterResultImage","no-filter-result.svg",3,"isLoadingData","isDataNotEmpty","isDataFiltered","nodataMessage","nodataHint","nodataLink","noFilterResultMessage","noFilterResultHint"],[1,"w-100","footer"],[3,"page","size","count","pageNumberChanged","pageSizeChanged"]],template:function(i,n){1&i&&(e.\u0275\u0275elementStart(0,"abp-page")(1,"app-page-header",0),e.\u0275\u0275element(2,"app-announcement-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"app-selected-filters-banner"),e.\u0275\u0275elementStart(4,"div",1)(5,"div",2),e.\u0275\u0275template(6,P,6,6,"button",3),e.\u0275\u0275elementStart(7,"ngx-datatable",4,5)(9,"ngx-datatable-column",6),e.\u0275\u0275template(10,w,47,36,"ng-template",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"ngx-datatable-footer"),e.\u0275\u0275template(12,O,7,19,"ng-template",8),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(13,"app-announcement-details",9,10)),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("pageTitle","CMSService::Announcements:Announcements")("icon","announcements"),e.\u0275\u0275advance(5),e.\u0275\u0275property("abpPermission","CMSService.Annoucements.Create"),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-empty",n.service.isLoading||0===n.service.data.items.length),e.\u0275\u0275property("rows",n.service.data.items)("count",n.service.data.totalCount)("list",n.service.list)("columnMode","flex")("rowHeight","auto")("limit",n.service.list.maxResultCount)("footerHeight",50),e.\u0275\u0275advance(2),e.\u0275\u0275property("flexGrow",1)("sortable",!1)("resizeable",!1)("draggable",!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("id",n.announcementId))},dependencies:[d.PermissionDirective,E.PageComponent,_.DatatableComponent,_.DataTableColumnDirective,_.DataTableColumnCellDirective,_.DataTableFooterTemplateDirective,_.DatatableFooterDirective,g.NgxDatatableListDirective,s.PageHeaderComponent,s.SelectedFiltersBannerComponent,c.PagerComponent,c.NodataOrLoadingComponent,M.NgbTooltip,C.Z,L,f.DatePipe,d.LocalizationPipe],styles:[".list-items[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{flex-basis:40%}.btn-primary[_ngcontent-%COMP%]{margin-bottom:16px}.inactive[_ngcontent-%COMP%]{pointer-events:none;opacity:.25}"]})}return a})();function k(a,u){if(1&a&&(e.\u0275\u0275elementStart(0,"abp-page"),e.\u0275\u0275element(1,"app-page-header",2)(2,"app-selected-filters-banner"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("pageTitle",t.selectedAnnouncement?"CMSService::Announcements:Edit":"CMSService::Announcements:Add")("icon","announcements")("isParentRoute",!0)}}function z(a,u){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",3),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.submitForm())}),e.\u0275\u0275elementStart(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"label",8),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",9),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",4)(10,"div",5)(11,"div",6)(12,"div",10)(13,"div",11)(14,"input",12),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.supportEn(n.currentTarget.checked))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"hr"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",10)(20,"div",14)(21,"div",15)(22,"div",16)(23,"label",17),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",15)(28,"div",16)(29,"label",19),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(32,"input",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",15)(34,"div",16)(35,"label",21),e.\u0275\u0275text(36),e.\u0275\u0275pipe(37,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(38,"textarea",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",15)(40,"div",16)(41,"label",23),e.\u0275\u0275text(42),e.\u0275\u0275pipe(43,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(44,"textarea",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",25)(46,"div",16)(47,"label",26),e.\u0275\u0275text(48),e.\u0275\u0275pipe(49,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275reference(52);return e.\u0275\u0275resetView(n.toggle())}),e.\u0275\u0275element(51,"input",28,29),e.\u0275\u0275elementStart(53,"div",30),e.\u0275\u0275element(54,"i",31),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(55,"div",25)(56,"div",16)(57,"label",26),e.\u0275\u0275text(58),e.\u0275\u0275pipe(59,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"div",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275reference(62);return e.\u0275\u0275resetView(n.toggle())}),e.\u0275\u0275element(61,"input",32,33),e.\u0275\u0275elementStart(63,"div",30),e.\u0275\u0275element(64,"i",31),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(65,"hr"),e.\u0275\u0275elementStart(66,"div",34)(67,"button",35)(68,"span"),e.\u0275\u0275text(69),e.\u0275\u0275pipe(70,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(71,"img",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.cancelForm())}),e.\u0275\u0275text(73),e.\u0275\u0275pipe(74,"abpLocalization"),e.\u0275\u0275elementEnd()()()()()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form)("validateOnSubmit",!0),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,17,"CMSService::Announcements:Category")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t.userDepartment),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(17,19,"CMSService::Calender:SupportEn")),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(25,21,"CMSService::Announcements:AnnouncementTitle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(31,23,"CMSService::Announcements:AnnouncementTitleEn")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(37,25,"CMSService::Announcements:AnnouncementDesc")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD028MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(43,27,"CMSService::Announcements:AnnouncementDescEn")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD028MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(49,29,"::PublishDate")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(59,31,"::EndDate")),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(70,33,t.selectedAnnouncement?"AbpUi::Edit":"::Actions:Send")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(74,35,"AbpUi::Cancel")," ")}}let I=(()=>{class a{constructor(t,i,n,r,m,p){this._fb=t,this._ToasterService=i,this._AnnoucementService=n,this._SWConfirmationService=r,this._Router=m,this._ActivatedRoute=p,this.ValidationConsts=c.ValidationConsts,this._isInsertMode=!1}ngOnInit(){this._getUserDepartment(),this._AnnoucementService.validateUserDepartment().subscribe(t=>{!0===t?this._getDataById():this._SWConfirmationService.error("","CMSService::Announcement:INFO012")})}_getDataById(){const t=this._ActivatedRoute.snapshot.paramMap.get("id");this._isInsertMode=null==t,this._isInsertMode?this._buildForm():this._sub$=this._AnnoucementService.get(+t).subscribe(i=>{this.department=i.generalDepartmentName,this._getUserDepartment();const n=new Date(i.endDate)>=new Date;i.canEdit&&n?(this.selectedAnnouncement=i,this._buildForm()):(this._ToasterService.error("CMSService::Announcement:UnAllowed"),this._Router.navigate(["cmsAdmin/announcements"]))})}_getUserDepartment(){this._sub$=this._AnnoucementService.getUserDepartment().subscribe(t=>{this.userDepartment=this._isInsertMode?t:this.department})}_buildForm(){const{titleAr:t,contentAr:i,titleEn:n,contentEn:r,publishDate:m,endDate:p,hasEnglish:V}=this.selectedAnnouncement||{};this.form=this._fb.group({titleAr:[t,[c.CustomValidators.RequiredValidator(),l.Validators.minLength(c.ValidationConsts.FD012MinLength),l.Validators.maxLength(c.ValidationConsts.FD012MaxLength),c.CustomValidators.InvalidCharacterValidator()]],contentAr:[i,[c.CustomValidators.RequiredValidator(),l.Validators.maxLength(c.ValidationConsts.FD028MaxLength),c.CustomValidators.InvalidCharacterValidator()]],titleEn:[n],contentEn:[r],endDate:[p?(0,f.formatDate)(new Date(p),"yyyy-MM-dd","en"):void 0,[l.Validators.required,c.CustomValidators.DateInFuture()]],publishDate:[m?(0,f.formatDate)(new Date(m),"yyyy-MM-dd","en"):void 0,[l.Validators.required,c.CustomValidators.DateInFuture()]],hasEnglish:[V||!1]}),this.form.controls.endDate.addValidators(c.CustomValidators.DateAfterOrSameValidator(this.form.controls.publishDate,"AnnouncementsER008")),this._sub$=this.form.controls.publishDate.valueChanges.subscribe(()=>{this.form.controls.endDate.updateValueAndValidity()}),this.supportEn(V||!1)}cancelForm(){this._SWConfirmationService.warn("::CONF004","::AreYouSure",void 0,{yesSeverity:"error"}).pipe((0,D.filter)(t=>t===s.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this._goToListPage()})}supportEn(t){this._setControlProps("titleEn",!t,[c.CustomValidators.RequiredValidator(),l.Validators.minLength(c.ValidationConsts.FD012MinLength),l.Validators.maxLength(c.ValidationConsts.FD012MaxLength),c.CustomValidators.InvalidCharacterValidator()]),this._setControlProps("contentEn",!t,[c.CustomValidators.RequiredValidator(),l.Validators.maxLength(c.ValidationConsts.FD028MaxLength),c.CustomValidators.InvalidCharacterValidator()])}_setControlProps(t,i,n=null){const r=this.form.controls[t];r.setValidators(i?[]:n),r.updateValueAndValidity(),i?r.disable():r.enable()}_createAnnouncement(){return this._AnnoucementService.create(this.form.getRawValue())}_updataAnnouncement(){const t=+this._ActivatedRoute.snapshot.paramMap.get("id");return this._AnnoucementService.update(t,this.form.getRawValue())}submitForm(){this.form.invalid?this._ToasterService.warn("::FormValidationWarining"):this._sub$=this._SWConfirmationService.warn(this.selectedAnnouncement?"::CONF003":"::CONF001","::AreYouSure",void 0,{yesSeverity:"success"}).pipe((0,D.filter)(t=>t===s.SWConfirmation.SWStatus.confirm)).subscribe(()=>{const t=this._isInsertMode?this._createAnnouncement():this._updataAnnouncement();this._sub$=t.subscribe(()=>{this._ToasterService.success("::Success"),this._goToListPage()})})}_goToListPage(){this._Router.navigate(["../"+(this.selectedAnnouncement?"../":"")],{relativeTo:this._ActivatedRoute})}ngOnDestroy(){return this._sub$.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||a)(e.\u0275\u0275directiveInject(l.FormBuilder),e.\u0275\u0275directiveInject(g.ToasterService),e.\u0275\u0275directiveInject(S.b),e.\u0275\u0275directiveInject(s.SWConfirmationService),e.\u0275\u0275directiveInject(v.Router),e.\u0275\u0275directiveInject(v.ActivatedRoute))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-announcements-create-or-update"]],features:[e.\u0275\u0275ProvidersFeature([s.SelectedFiltersBannerService])],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup","validateOnSubmit","ngSubmit",4,"ngIf"],[3,"pageTitle","icon","isParentRoute"],[3,"formGroup","validateOnSubmit","ngSubmit"],[1,"card"],[1,"card-body"],[1,"row"],[1,"form-group","col-lg-6"],["for","txtCat",1,"form-label"],["id","txtCat","type","text","disabled","",1,"form-control",3,"value"],[1,"col-lg-12"],[1,"form-group","w-100"],["id","support","type","checkbox","formControlName","hasEnglish",1,"forn-control","me-1","form-check-input",3,"change"],["for","support",1,"form-label"],[1,"row","form-controls"],[1,"col-lg-6"],[1,"form-group"],["for","titleAr",1,"form-label"],["type","text","id","titleAr","formControlName","titleAr",1,"form-control",3,"maxlength"],["for","titleEn",1,"form-label"],["type","text","id","titleEn","formControlName","titleEn","dir","ltr",1,"form-control",3,"maxlength"],["for","contentAr",1,"form-label"],["id","contentAr","rows","5","formControlName","contentAr",1,"form-control",3,"maxlength"],["for","contentEn",1,"form-label"],["id","contentEn","rows","5","formControlName","contentEn","dir","ltr",1,"form-control",3,"maxlength"],[1,"col-lg-6","mb-2"],[1,"form-label"],[1,"date-picker-container",3,"click"],["name","datepicker","formControlName","publishDate","ngbDatepicker","",1,"form-control"],["PublishDate","ngbDatepicker"],[1,"date-picker-icon"],[1,"icon-calendar"],["name","datepicker","formControlName","endDate","ngbDatepicker","",1,"form-control"],["endDate","ngbDatepicker"],[1,"btn-actions"],["type","submit",1,"btn","btn-primary","me-2"],["src","assets/images/checkIcon.png","alt","",1,"ms-2"],["type","button",1,"btn-cancel",3,"click"]],template:function(i,n){1&i&&(e.\u0275\u0275template(0,k,3,3,"abp-page",0),e.\u0275\u0275template(1,z,75,37,"form",1)),2&i&&(e.\u0275\u0275property("ngIf",n.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.form))},dependencies:[f.NgIf,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.CheckboxControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.MaxLengthValidator,l.FormGroupDirective,l.FormControlName,d.FormSubmitDirective,E.PageComponent,h.ValidationGroupDirective,h.ValidationDirective,s.PageHeaderComponent,s.SelectedFiltersBannerComponent,M.NgbInputDatepicker,d.LocalizationPipe],styles:[".form-controls[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:12px}"]})}return a})();const R=[{path:"",component:N,canActivate:[d.PermissionGuard],data:{requiredPolicy:"CMSService.Annoucements"}},{path:"create",component:I,canActivate:[d.PermissionGuard],data:{requiredPolicy:"CMSService.Annoucements.Create"}},{path:"update/:id",component:I,canActivate:[d.PermissionGuard],data:{requiredPolicy:"CMSService.Annoucements.Edit"}}];let U=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[v.RouterModule.forChild(R),v.RouterModule]})}return a})();var j=o(92134);let W=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:a});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[U,j.b,C.Z]})}return a})()},92134:(T,x,o)=>{o.d(x,{b:()=>f});var v=o(81011),g=o(92482),s=o(78570),C=o(37385),e=o(82830),_=o(31093),l=o(62411),A=o(11705);let f=(()=>{class b{static#e=this.\u0275fac=function(F){return new(F||b)};static#t=this.\u0275mod=A.\u0275\u0275defineNgModule({type:b});static#n=this.\u0275inj=A.\u0275\u0275defineInjector({imports:[v.CoreModule,g.SharedModule,s.AbpUtilsModule,C.NgScrollbarModule,v.CoreModule,s.AbpUtilsModule,g.SharedModule,e.NgbTooltipModule,_.NgSelectModule,l.CommonModule,C.NgScrollbarModule,e.NgbDropdownModule,e.NgbDatepickerModule]})}return b})()}}]);