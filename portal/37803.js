(self.webpackChunkportal=self.webpackChunkportal||[]).push([[37803],{92134:(N,y,s)=>{s.d(y,{b:()=>C});var b=s(81011),d=s(92482),h=s(78570),v=s(37385),x=s(82830),_=s(31093),T=s(62411),m=s(11705);let C=(()=>{class S{static#e=this.\u0275fac=function(E){return new(E||S)};static#t=this.\u0275mod=m.\u0275\u0275defineNgModule({type:S});static#n=this.\u0275inj=m.\u0275\u0275defineInjector({imports:[b.CoreModule,d.SharedModule,h.AbpUtilsModule,v.NgScrollbarModule,b.CoreModule,h.AbpUtilsModule,d.SharedModule,x.NgbTooltipModule,_.NgSelectModule,T.CommonModule,v.NgScrollbarModule,x.NgbDropdownModule,x.NgbDatepickerModule]})}return S})()},37803:(N,y,s)=>{s.r(y),s.d(y,{UsersManagementModule:()=>we});var b=s(28675),c=s(78570),d=s(81011),e=s(11705);let h=(()=>{class n{constructor(t){this.restService=t,this.apiName="IdentityService",this.getDownloadToken=a=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetDownloadTokenAsync"},{apiName:this.apiName,...a}),this.getEmployee=(a,r)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/get-employee",params:{username:a}},{apiName:this.apiName,...r}),this.getList=(a,r)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetListAsync",params:{filterText:a.filterText,sectorId:a.sectorId,generalDepartmentId:a.generalDepartmentId,departmentId:a.departmentId,ruleNames:a.ruleNames,directorUserName:a.directorUserName,employeeType:a.employeeType,sorting:a.sorting,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName,...r}),this.getListAsExcelFile=(a,r)=>this.restService.request({method:"GET",responseType:"blob",url:"/api/identity-service/user-management/as-excel-file",params:{filterText:a.filterText,sectorId:a.sectorId,generalDepartmentId:a.generalDepartmentId,departmentId:a.departmentId,ruleNames:a.ruleNames,directorUserName:a.directorUserName,employeeType:a.employeeType,downloadToken:a.downloadToken}},{apiName:this.apiName,...r}),this.getListDepartments=(a,r,i)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetListDepartmentsAsync",params:{generalDepartmentId:a,filter:r.filter,skipCount:r.skipCount,maxResultCount:r.maxResultCount}},{apiName:this.apiName,...i}),this.getListGenDepartments=(a,r,i)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetListGenDepartmentsAsync",params:{sectorId:a,filter:r.filter,skipCount:r.skipCount,maxResultCount:r.maxResultCount}},{apiName:this.apiName,...i}),this.getListSectors=(a,r)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetListSectorsAsync",params:{filter:a.filter,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName,...r}),this.getListUsers=(a,r)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetListUsersAsync",params:{filter:a.filter,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName,...r}),this.getListrRules=(a,r)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetListRulesAsync",params:{filter:a.filter,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName,...r}),this.getUserRules=(a,r)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/GetUserRulesAsync",params:{userId:a}},{apiName:this.apiName,...r}),this.getUserRulesHistoryByUserIdAndRoleIdAndInput=(a,r,i,l)=>this.restService.request({method:"GET",url:"/api/identity-service/user-management/get-user-history",params:{userId:a,roleId:r,filter:i.filter,skipCount:i.skipCount,maxResultCount:i.maxResultCount}},{apiName:this.apiName,...l}),this.saveUserRules=(a,r)=>this.restService.request({method:"POST",url:"/api/identity-service/user-management/SaveUserRulesAsync",body:a},{apiName:this.apiName,...r})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(d.RestService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g=s(4125),v=s(46663),u=s(62411),x=s(42595),f=s(21786),_=s(27437),p=s(92482),T=s(82830),I=s(29935),m=s(36394),M=s(74478),C=s(31093);function S(n,o){if(1&n&&(e.\u0275\u0275element(0,"input",24),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"uppercase")),2&n){const t=o.item,a=o.item$,r=o.index,i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("id","item-",r,""),e.\u0275\u0275property("checked",a.selected),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,i.roleTypeName(t.roleType))," ")}}function L(n,o){if(1&n&&(e.\u0275\u0275element(0,"input",24),e.\u0275\u0275text(1)),2&n){const t=o.item,a=o.item$;e.\u0275\u0275propertyInterpolate1("id","item-",o.index,""),e.\u0275\u0275property("checked",a.selected),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.displayName," ")}}function w(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"div",26),e.\u0275\u0275element(2,"input",27),e.\u0275\u0275elementStart(3,"label",28),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()()),2&n){const t=o.$implicit;e.\u0275\u0275property("ngClass",t?"col-xl-6":"col-xl-12"),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t)("id","employeeType"+t),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","employeeType"+t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,5,t?"CMSService::usersManagement:userType:"+t:"TaskService::TaskFilter:All")," ")}}let E=(()=>{class n extends c.AbstractAdvancedFilterComponent{constructor(t){super(!0),this._userManagementService=t,this.userTypeEnumOptions=[null,...Object.values(I.w).filter(a=>!1===isNaN(Number(a)))],this.searchSectorsFn=this._searchSectors.bind(this),this.searchDirectorsListFn=this._searchDirectorsList.bind(this),this.searchMainDepartmentFn=this._searchMainDepartment.bind(this),this.searchDepartmentFn=this._searchDepartment.bind(this)}ngOnInit(){super.ngOnInit(),this.refreshFilters(),this._getListrRules(),this.buildControlValueChanges()}initForm(){this.filtersForm=this.fb.group({sectorId:new c.FilterFormControl({filterTitle:"CMSService::Calender:Sector",filterValueFun:null}),generalDepartmentId:new c.FilterFormControl({filterTitle:"CMSService::Calendar:Management",filterValueFun:null}),departmentId:new c.FilterFormControl({filterTitle:"CMSService::usersManagement:Management",filterValueFun:null}),ruleNames:new c.FilterFormControl({filterTitle:"CMSService::usersManagement:Permissions",filterValueFun:null,splitBy:","}),directorUserName:new c.FilterFormControl({filterTitle:"CMSService::usersManagement:Director",filterValueFun:null}),employeeType:new c.FilterFormControl({filterTitle:"CMSService::usersManagement:userType",filterValueFun:t=>this.localizationService.instant("CMSService::usersManagement:userType:"+t)})})}buildControlValueChanges(){const t=this.filtersForm.controls.sectorId;t.valueChanges.pipe((0,g.startWith)(t.value),(0,g.pairwise)()).subscribe(([r,i])=>{r!==i&&(this.filtersForm.controls.generalDepartmentId.setValue(void 0),this.filtersForm.controls.departmentId.setValue(void 0))});const a=this.filtersForm.controls.generalDepartmentId;a.valueChanges.pipe((0,g.startWith)(a.value),(0,g.pairwise)()).subscribe(([r,i])=>{r!==i&&this.filtersForm.controls.departmentId.setValue(void 0)})}_searchSectors(t){return this._userManagementService.getListSectors(t)}_searchDirectorsList(t){return this._userManagementService.getListUsers(t)}_searchMainDepartment(t){return this._userManagementService.getListGenDepartments(this.filtersForm.controls.sectorId.value,t)}_searchDepartment(t){return this._userManagementService.getListDepartments(this.filtersForm.controls.generalDepartmentId.value,t)}changeMultiDropDownValue(t,a){t instanceof Event||this.changeFilterValueForDropDown(t,a)}_getListrRules(){this.sub$=this._userManagementService.getListrRules({filter:"",maxResultCount:1e3}).subscribe(t=>this.permissions=t)}roleTypeName(t){return this.localizationService.instant("CMSService::RoleTypeEnum:"+t)}ngOnDestroy(){super.ngOnDestroy(),this.sub$?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(h))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-users-management-filter"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:50,vars:50,consts:[[3,"filterText","isShowFilters","searchInputText","advancedSearchText","filterTextChange","showAdvancedFilter"],[1,"filters-form",3,"formGroup","validateOnSubmit","ngSubmit"],[1,"scroll-bar"],[1,"row"],[1,"form-group"],["for","sectorId",1,"mb-1","form-label"],["formControlName","sectorId",3,"searchFn","valueChanged"],[1,"form-group","mt-2"],["for","generalDepartmentId",1,"form-label"],["formControlName","generalDepartmentId",3,"searchFn","valueChanged"],["for","departmentId",1,"form-label"],["formControlName","departmentId",3,"searchFn","valueChanged"],["for","directorUserName",1,"form-label"],["formControlName","directorUserName",3,"searchFn","valueChanged"],["for","ruleNames",1,"form-label"],["bindLabel","displayName","groupBy","roleType","bindValue","id","formControlName","ruleNames",3,"items","multiple","selectableGroup","selectableGroupAsModel","closeOnSelect","notFoundText","change"],["ng-optgroup-tmp",""],["ng-option-tmp",""],["for","employeeType",1,"form-label"],["class","col-12",3,"ngClass",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","align-items-center","actions","mt-3"],["type","submit",1,"btn","btn-primary","d-flex","align-item-center","gap","me-2"],["src","../../../../../assets/images/apply-filter.svg",1,"filter",3,"alt"],["type","button",1,"text-primary",3,"click"],["type","checkbox",3,"id","checked"],[1,"col-12",3,"ngClass"],[1,"form-check"],["type","radio","name","employeeType","formControlName","employeeType",1,"form-check-input","input-check",3,"value","id"],[1,"form-label",3,"for"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"app-sw-filter",0),e.\u0275\u0275listener("filterTextChange",function(l){return r.chnageFilterText(l)})("showAdvancedFilter",function(l){return l?r.showFilterSidebar():r.closeFilterSidebar()}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return r.submitFilterForm()}),e.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"app-ng-select-auto-complete",6),e.\u0275\u0275listener("valueChanged",function(l){return r.changeFilterValueForDropDown(l,"sectorId")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",7)(12,"label",8),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"app-ng-select-auto-complete",9),e.\u0275\u0275listener("valueChanged",function(l){return r.changeFilterValueForDropDown(l,"generalDepartmentId")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",7)(17,"label",10),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"app-ng-select-auto-complete",11),e.\u0275\u0275listener("valueChanged",function(l){return r.changeFilterValueForDropDown(l,"departmentId")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",7)(22,"label",12),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"app-ng-select-auto-complete",13),e.\u0275\u0275listener("valueChanged",function(l){return r.changeFilterValueForDropDown(l,"directorUserName")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",7)(27,"label",14),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"ng-select",15),e.\u0275\u0275listener("change",function(l){return r.changeMultiDropDownValue(l,"ruleNames")}),e.\u0275\u0275pipe(31,"abpLocalization"),e.\u0275\u0275template(32,S,3,5,"ng-template",16),e.\u0275\u0275template(33,L,2,3,"ng-template",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",7)(35,"label",18),e.\u0275\u0275text(36),e.\u0275\u0275pipe(37,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",3),e.\u0275\u0275template(39,w,6,7,"div",19),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(40,"div",20)(41,"button",21)(42,"span"),e.\u0275\u0275text(43),e.\u0275\u0275pipe(44,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"img",22),e.\u0275\u0275pipe(46,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"span",23),e.\u0275\u0275listener("click",function(){return r.filtersForm.reset()}),e.\u0275\u0275text(48),e.\u0275\u0275pipe(49,"abpLocalization"),e.\u0275\u0275elementEnd()()()()),2&a&&(e.\u0275\u0275property("filterText",r.quickFilter.filterValue)("isShowFilters",r.isShowFilters)("searchInputText",e.\u0275\u0275pipeBind1(1,26,"CMSService::EmployeeGuide:Search"))("advancedSearchText",e.\u0275\u0275pipeBind1(2,28,"CMSService::usersManagement:FilterUsers")),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",r.filtersForm)("validateOnSubmit",!0),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,30,"CMSService::Calender:Sector")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",r.searchSectorsFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,32,"CMSService::Calendar:Management")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",r.searchMainDepartmentFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,34,"CMSService::usersManagement:Management")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",r.searchDepartmentFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,36,"CMSService::usersManagement:Director")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",r.searchDirectorsListFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,38,"CMSService::usersManagement:Permissions")),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",null==r.permissions?null:r.permissions.items)("multiple",!0)("selectableGroup",!0)("selectableGroupAsModel",!1)("closeOnSelect",!1)("notFoundText",e.\u0275\u0275pipeBind1(31,40,"::NgSelect:NoDataFound")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(37,42,"CMSService::usersManagement:userType")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",r.userTypeEnumOptions),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(44,44,"::AdvancedFilter:Refresh")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("alt",e.\u0275\u0275pipeBind1(46,46,"::AdvancedFilter:Refresh")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(49,48,"::AdvancedFilter:Clear")," "))},dependencies:[u.NgClass,u.NgForOf,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.RadioControlValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,d.FormSubmitDirective,M.ValidationGroupDirective,M.ValidationDirective,p.NgSelectAutoCompleteComponent,p.SwFilterComponent,C.NgSelectComponent,C.NgOptgroupTemplateDirective,C.NgOptionTemplateDirective,u.UpperCasePipe,d.LocalizationPipe],styles:["[_nghost-%COMP%]     .ng-select.ng-select-multiple .ng-select-container{min-height:2.3rem;height:-moz-fit-content!important;height:fit-content!important}"]})}return n})();var O=s(37385),D=function(n){return n[n.Assign=1]="Assign",n[n.Remove=2]="Remove",n}(D||{});function V(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,18),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngTemplateOutlet",t)}}function P(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,18),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(10);e.\u0275\u0275property("ngTemplateOutlet",t)}}function R(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,18),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngTemplateOutlet",t)}}function B(n,o){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275textInterpolate1(" ",t," ")}}function z(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",19),e.\u0275\u0275element(1,"div",20),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("background",a.RoleActionType(t.actionType)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,"CMSService::usersManagement:RoleActionType:"+t.actionType)," ")}}function A(n,o){if(1&n&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"date")),2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(1,1,t.actionDate,a.AppConsts.DateWithHourFormat)," ")}}function k(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",12),e.\u0275\u0275template(4,V,1,1,"ng-container",13),e.\u0275\u0275template(5,P,1,1,"ng-container",13),e.\u0275\u0275template(6,R,1,1,"ng-container",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,B,1,1,"ng-template",null,15,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(9,z,4,5,"ng-template",null,16,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(11,A,2,4,"ng-template",null,17,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,4,t.name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",t.prop),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionDate"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionType")}}function G(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"ngx-datatable-column",9),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275template(2,k,13,6,"ng-template",10),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit;e.\u0275\u0275property("name",e.\u0275\u0275pipeBind1(1,5,t.name))("prop",t.prop)("flexGrow",t.flexGrow)("resizeable",!1)("draggable",!1)}}function j(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-nodata-or-loading",21),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275elementStart(2,"div",22)(3,"app-pager",23),e.\u0275\u0275listener("pageNumberChanged",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onPageNumberChange(r))})("pageSizeChanged",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(),l=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(i.onPageSizeChange(r,l))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=o.rowCount,a=o.pageSize,r=o.curPage,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("isLoadingData",i.isLoading)("isDataNotEmpty",(null==i.data?null:i.data.items.length)>0)("isDataFiltered",!1)("nodataMessage",e.\u0275\u0275pipeBind1(1,7,"CMSService::NoDataCurrently")),e.\u0275\u0275advance(3),e.\u0275\u0275property("page",r)("size",a)("count",t)}}(0,d.mapEnumToOptions)(D);let W=(()=>{class n{constructor(t,a){this.service=t,this.list=a,this.data={items:[],totalCount:0},this.AppConsts=p.AppConsts,this._columns=[{name:"CMSService::usersManagement:Permission",prop:"roleName",flexGrow:4},{name:"CMSService::usersManagement:actionType",prop:"actionType",flexGrow:4},{name:"CMSService::usersManagement:actionDate",prop:"actionDate",flexGrow:4}],this.columns=this._columns,this.isLoading=!1}ngOnInit(){this._getListrRules(),this.getUserHistory()}getUserHistory(t){this.sub$=this.list.hookToQuery(i=>(this.data.items=[],this.isLoading=!0,this.service.getUserRulesHistoryByUserIdAndRoleIdAndInput(this.userId,t,{maxResultCount:i.maxResultCount,skipCount:null==t?i.skipCount:0,filter:i.filter}).pipe((0,g.finalize)(()=>this.isLoading=!1)))).subscribe(i=>{this.data=i})}onPageSizeChange(t,a){a.limit=t,this.list.maxResultCount=t,this.list.page=0}onPageNumberChange(t){this.list.page=t-1}_getListrRules(){this.sub$=this.service.getListrRules({filter:"",maxResultCount:1e3}).subscribe(t=>this.permissions=t)}changeFilterValueForDropDown(t){t?this.getUserHistory(t.id):this.getUserHistory()}RoleActionType(t){return t==D.Assign?"var(--Status-Success-400, #2DD4BF)":"var(--Status-Danger-600, #E11D48)"}ngOnDestroy(){this.sub$?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(h),e.\u0275\u0275directiveInject(d.ListService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-user-rules-history"]],inputs:{userId:"userId"},features:[e.\u0275\u0275ProvidersFeature([d.ListService])],decls:13,vars:15,consts:[[1,"main-card"],[1,"row","mb-3"],[1,"col-md-3","col-12"],["bindLabel","displayName","bindValue","id",3,"items","placeholder","notFoundText","change"],[1,"card","background"],["default","",3,"rows","count","limit","list","columnMode"],["table",""],[3,"name","prop","flexGrow","resizeable","draggable",4,"ngFor","ngForOf"],["ngx-datatable-footer-template",""],[3,"name","prop","flexGrow","resizeable","draggable"],["ngx-datatable-cell-template",""],[1,"column-label"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["valueOnly",""],["columnActionType",""],["columnDate",""],[3,"ngTemplateOutlet"],[1,"d-flex","align-items-center"],[1,"circle","me-1"],["loaderImage","table.svg","nodataImage","users.svg",3,"isLoadingData","isDataNotEmpty","isDataFiltered","nodataMessage"],[1,"w-100","footer"],[3,"page","size","count","pageNumberChanged","pageSizeChanged"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"ng-select",3),e.\u0275\u0275listener("change",function(l){return r.changeFilterValueForDropDown(l)}),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",4)(8,"ngx-datatable",5,6),e.\u0275\u0275template(10,G,3,7,"ngx-datatable-column",7),e.\u0275\u0275elementStart(11,"ngx-datatable-footer"),e.\u0275\u0275template(12,j,4,9,"ng-template",8),e.\u0275\u0275elementEnd()()()()()),2&a&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("items",null==r.permissions?null:r.permissions.items)("placeholder",e.\u0275\u0275pipeBind1(5,11,"CMSService::usersManagement:ArcheivePermissionPlaceholder"))("notFoundText",e.\u0275\u0275pipeBind1(6,13,"::NgSelect:NoDataFound")),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("is-empty",r.isLoading||0===(null==r.data.items?null:r.data.items.length)),e.\u0275\u0275property("rows",r.data.items)("count",r.data.totalCount)("limit",r.list.maxResultCount)("list",r.list)("columnMode","flex"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.columns))},dependencies:[u.NgForOf,u.NgTemplateOutlet,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,f.DatatableComponent,f.DataTableColumnDirective,f.DataTableColumnCellDirective,f.DataTableFooterTemplateDirective,f.DatatableFooterDirective,_.NgxDatatableDefaultDirective,_.NgxDatatableListDirective,p.PagerComponent,p.NodataOrLoadingComponent,C.NgSelectComponent,u.DatePipe,d.LocalizationPipe],styles:["app-nodata-or-loading[_ngcontent-%COMP%]{min-height:270px}.main-card[_ngcontent-%COMP%]{background:#f0f0f6;border-radius:10px;padding:1rem}.circle[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.background[_ngcontent-%COMP%]{background:#f0f0f6}[_nghost-%COMP%]     .ng-select.ng-select-single .ng-select-container{border-radius:80px}"]})}return n})();function $(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3)(1,"h3"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div")(5,"span",4),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"CMSService::usersManagement:Permissions")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate3("",e.\u0275\u0275pipeBind1(7,6,"CMSService::usersManagement:User")," : ",t.userName," (",t.employeeName,")")}}function H(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16)(1,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.enableEdit())}),e.\u0275\u0275element(2,"i",18),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd()()}2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,1,"CMSService::usersManagement:EditPermissions")," "))}function K(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",19)(1,"div",20),e.\u0275\u0275element(2,"i",21),e.\u0275\u0275elementStart(3,"input",22),e.\u0275\u0275listener("ngModelChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.filterText=r)})("input",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.onSearch(r.filterText))})("ngModelChangeDebounced",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.filterTextChange(r))}),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(4,3,"CMSService::EmployeeGuide:Search")),e.\u0275\u0275property("ngModel",t.filterText)("rejectSpecialCharacters",!0)}}function Y(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",28),e.\u0275\u0275listener("ngModelChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().index,l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.checkParentGroup[i]=r)})("change",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(),i=r.$implicit,l=r.index,U=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(U.checkedGroupBy(i,l))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().index,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngModel",a.checkParentGroup[t])}}function J(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",29)(1,"label",30)(2,"input",31),e.\u0275\u0275listener("ngModelChange",function(r){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.isAssignedToUser=r)})("change",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.checkAssignedToUser())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&n){const t=o.$implicit,a=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.isAssignedToUser)("disabled",!a.isEditable)("value",t.isAssignedToUser),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.roleName," ")}}function Q(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23)(1,"h6",24),e.\u0275\u0275template(2,Y,1,1,"input",25),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"hr",26),e.\u0275\u0275template(6,J,4,4,"div",27),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.isEditable),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,3,"CMSService::RoleTypeEnum:"+t.key)," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.value)}}function X(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",23)(1,"div",32)(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,1,"CMSService::About:results")))}function Z(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,H,5,3,"div",12),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275template(3,K,5,5,"div",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Q,7,5,"div",14),e.\u0275\u0275pipe(5,"keyvalue"),e.\u0275\u0275template(6,X,5,3,"div",15),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275styleProp("padding-top",t.isEditable?"2px":""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditable),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isEditable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(5,6,t.groupedItems)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0===t.filteredItems.length&&t.isLoading)}}function q(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"app-user-rules-history",33),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("userId",t.userId)}}function ee(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.submitForm())}),e.\u0275\u0275element(1,"i",38),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"AbpUi::Save")," "))}function te(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.cancelForm())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AbpUi::Cancel")," "))}function ne(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.close())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"::Close")," "))}function ae(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",34),e.\u0275\u0275template(1,ee,4,3,"button",35),e.\u0275\u0275template(2,te,3,3,"button",36),e.\u0275\u0275template(3,ne,4,3,"div",9),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditable&&"permissions"===t.tab),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditable&&"permissions"===t.tab),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditable||"history"===t.tab)}}function re(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ng-scrollbar",5)(1,"div",6)(2,"div",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.changeTab("permissions"))}),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.changeTab("history"))}),e.\u0275\u0275elementStart(7,"div"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(10,Z,7,8,"div",8),e.\u0275\u0275template(11,q,2,1,"div",9),e.\u0275\u0275template(12,ae,4,3,"div",10)}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("track","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("active","permissions"===t.tab),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,10,"CMSService::usersManagement:CurrentPermission")),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("active","history"===t.tab),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,12,"CMSService::usersManagement:PermissionsArchive")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","permissions"===t.tab),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","history"===t.tab),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.filteredItems.length)}}let ie=(()=>{class n{constructor(t,a,r,i){this.service=t,this._confirmationService=a,this._toasterService=r,this._localizationService=i,this.savedSuccess=new e.EventEmitter,this.isModalBusy=!1,this.isModalOpen=!1,this.modalOptions={centered:!0,size:"xl"},this.isEditable=!1,this.rules=[],this.groupedItems={},this.tab="permissions",this.filteredItems=[],this.checkParentGroup=[!1]}showModal(t,a,r,i){this.userId=t,this.userName=a,this.employeeName=this._localizationService.currentLang.includes("ar")?r:i,this.isModalOpen=!0,this.getUserRules()}enableEdit(){this.isEditable=!0}getUserRules(){this.isLoading=!1,this.sub$=this.service.getUserRules(this.userId).subscribe(t=>{this.isLoading=!0,this.rules=t,this.filteredItems=this.rules,this.getGroupedRoles()})}getGroupedRoles(){this.groupedItems=this.filteredItems.reduce((t,a)=>(t[a.roleType]??=[],t[a.roleType].push(a),t),{}),this.checkAssignedToUser()}submitForm(){this.isModalBusy=!0;const t={userId:this.userId,rules:[].concat(...Object.values(this.groupedItems))};this._confirmationService.warn("::CONF003","::AreYouSure",void 0,{yesSeverity:"success"}).pipe((0,g.filter)(a=>a===c.SWConfirmation.SWStatus.confirm)).pipe((0,g.finalize)(()=>this.isModalBusy=!1)).subscribe(()=>{this.service.saveUserRules(t).subscribe(()=>{this._toasterService.success("::Success"),this.savedSuccess.emit(!0),this.isEditable=!1})})}cancelForm(){this._confirmationService.warn("::CONF004","::AreYouSure",void 0,{yesSeverity:"error"}).pipe((0,g.filter)(t=>t===c.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this.isEditable=!1,this.getUserRules()})}close(){this.isEditable=!1,this.isModalBusy=!1,this.isModalOpen=!1,this.groupedItems={},this.tab="permissions",this.filterText=""}onSearch(t){this.filteredItems=this.rules.filter(a=>a.roleName.toLowerCase().includes(t.toLowerCase().trim())),this.getGroupedRoles()}changeTab(t){"history"==t&&this.isEditable?this._confirmationService.warn("::CONF004","::AreYouSure",void 0,{yesSeverity:"error"}).pipe((0,g.filter)(a=>a===c.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this.isEditable=!1,this.getUserRules(),this.tab=t}):this.tab=t}filterTextChange(t){this.filterText=t}checkedGroupBy(t,a){t.value.forEach(r=>{r.isAssignedToUser=1==this.checkParentGroup[a]})}checkAssignedToUser(){Object.values(this.groupedItems).forEach((t,a)=>{this.checkParentGroup[a]=!!t.every(r=>!0===r.isAssignedToUser)})}ngOnDestroy(){this.sub$?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(h),e.\u0275\u0275directiveInject(c.SWConfirmationService),e.\u0275\u0275directiveInject(_.ToasterService),e.\u0275\u0275directiveInject(d.LocalizationService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-users-management-view-or-update"]],outputs:{savedSuccess:"savedSuccess"},decls:5,vars:3,consts:[[3,"busy","visible","options","visibleChange","disappear"],["abpHeader",""],["abpBody",""],[1,"d-flex","flex-column","text-center"],[1,"employee-info"],[3,"track"],[1,"tab-container"],[1,"tab-item",3,"click"],["class","main-container",3,"paddingTop",4,"ngIf"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"main-container"],["class","mb-2",4,"ngIf"],["class","filter-section pt-2",4,"ngIf"],["class","row group-rules",4,"ngFor","ngForOf"],["class","row group-rules",4,"ngIf"],[1,"mb-2"],[1,"btn","btn-outline-primary","edit-permissions-btn",3,"click"],[1,"icon-pencil","h6"],[1,"filter-section","pt-2"],[1,"search-input"],[1,"icon-search"],["type","search",1,"form-control",3,"ngModel","rejectSpecialCharacters","placeholder","ngModelChange","input","ngModelChangeDebounced"],[1,"row","group-rules"],[1,"px-0","mb-0","group-title"],["type","checkbox","class","form-check-input",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"group-title-line"],["class","col-lg-4 col-md-6 col-12 px-0",4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"col-lg-4","col-md-6","col-12","px-0"],[1,"mb-1"],["type","checkbox",1,"form-check-input",3,"ngModel","disabled","value","ngModelChange","change"],[1,"text-center"],[3,"userId"],[1,"modal-footer"],["class","btn btn-primary ms-2",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-light",3,"click",4,"ngIf"],[1,"btn","btn-primary","ms-2",3,"click"],[1,"fa","fa-check","me-1"],["type","button",1,"btn","btn-outline-light",3,"click"],["type","button","abpClose","",1,"btn","btn-outline-light",3,"click"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(l){return r.isModalOpen=l})("disappear",function(){return r.close()}),e.\u0275\u0275template(1,$,8,8,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,re,13,14,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("busy",r.isModalBusy)("visible",r.isModalOpen)("options",r.modalOptions)},dependencies:[u.NgForOf,u.NgIf,m.DefaultValueAccessor,m.CheckboxControlValueAccessor,m.NgControlStatus,m.NgModel,_.ModalComponent,_.ModalCloseDirective,p.NgModelChangeDebouncedDirective,O.NgScrollbar,W,u.KeyValuePipe,d.LocalizationPipe],styles:["ng-scrollbar[_ngcontent-%COMP%]{height:75px}[_nghost-%COMP%]  ng-scrollbar .scrollbar-control{visibility:hidden}[_nghost-%COMP%]  ng-scrollbar:hover .scrollbar-control{visibility:visible}.employee[_ngcontent-%COMP%]{margin-bottom:24px;margin-top:-9px}.employee-info[_ngcontent-%COMP%]{color:var(--Text-Placeholder, #94A3B8);font-size:14px;font-weight:500;line-height:24px}.tab-container[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{border:2px solid var(--Neutral-300, #CBD5E1)}.main-container[_ngcontent-%COMP%]{border-radius:12px;background:var(--primary-6, #F0F0F6);padding:16px}.group-rules[_ngcontent-%COMP%]{border-radius:12px;border-bottom:1px solid var(--neutral-200, #E2E8F0);background:var(--Basic-White, #FFF);box-shadow:0 6px 16px #0000000a;padding:12px;margin:16px 0 0}.group-rules[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:var(--Text-Placeholder, #94A3B8);font-size:14px;font-weight:700;line-height:24px}.group-rules[_ngcontent-%COMP%]   .group-title-line[_ngcontent-%COMP%]{margin:8px 0}.edit-permissions-btn[_ngcontent-%COMP%]{padding:8px 16px!important}.form-check-input[_ngcontent-%COMP%]{border-color:#64748b!important;background-color:#fff}.form-check-input[_ngcontent-%COMP%]:disabled{background-color:#f0f4f7;opacity:.5}"]})}return n})(),oe=(()=>{class n{constructor(t){this.restService=t,this.apiName="UserProfileService",this.createEmployee=(a,r)=>this.restService.request({method:"POST",url:"/api/user-profile-service/employee-management/create-employee",body:a},{apiName:this.apiName,...r}),this.updateEmployee=(a,r)=>this.restService.request({method:"POST",url:"/api/user-profile-service/employee-management/update-employee",body:a},{apiName:this.apiName,...r})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(d.RestService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function se(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.isEditMode?e.\u0275\u0275pipeBind1(2,1,"CMSService::usersManagement:EditUser"):e.\u0275\u0275pipeBind1(3,3,"CMSService::usersManagement:AddUser")," ")}}function le(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",37),e.\u0275\u0275element(2,"input",38),e.\u0275\u0275elementStart(3,"label",39),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()()),2&n){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("checked",t)("id","userType"+t),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","userType"+t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"CMSService::usersManagement:userType:"+t)," ")}}function pe(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",4),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.submitForm())}),e.\u0275\u0275elementStart(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",7)(10,"div",8)(11,"label",11),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275template(15,le,6,6,"div",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",14)(17,"div",8)(18,"label",15),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"input",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",14)(23,"div",8)(24,"label",17),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",14)(29,"div",8)(30,"label",19),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"input",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",14)(35,"div",8)(36,"label",21),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"input",22),e.\u0275\u0275listener("keypress",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.keyPressNumbers(r))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(40,"div",14)(41,"div",8)(42,"label",23),e.\u0275\u0275text(43),e.\u0275\u0275pipe(44,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"input",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",14)(47,"div",8)(48,"label",25),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"app-ng-select-auto-complete",26),e.\u0275\u0275listener("valueChanged",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.selectRequestFormDropDown(r))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(52,"div",14)(53,"div",8)(54,"label",27),e.\u0275\u0275text(55),e.\u0275\u0275pipe(56,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"ng-select",28),e.\u0275\u0275listener("change",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.changeFilterValueForDropDown(r))}),e.\u0275\u0275pipe(58,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(59,"div",14)(60,"div",8)(61,"label",29),e.\u0275\u0275text(62),e.\u0275\u0275pipe(63,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(64,"ng-select",30),e.\u0275\u0275pipe(65,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(66,"div",14)(67,"div",8)(68,"label",31),e.\u0275\u0275text(69),e.\u0275\u0275pipe(70,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(71,"ng-select",32),e.\u0275\u0275pipe(72,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(73,"div",33)(74,"button",34),e.\u0275\u0275text(75),e.\u0275\u0275pipe(76,"abpLocalization"),e.\u0275\u0275element(77,"img",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.cancelForm())}),e.\u0275\u0275text(79),e.\u0275\u0275pipe(80,"abpLocalization"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.form)("validateOnSubmit",!0),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,27,"CMSService::usersManagement:Username")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",100),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,29,"CMSService::usersManagement:userType")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.userTypeEnumOptions),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(20,31,"CMSService::usersManagement:EmployeeNameArabic")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(26,33,"CMSService::usersManagement:EmployeeNameEnglish")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(32,35,"CMSService::EmployeeGuide:Email")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(38,37,"UserProfileService::Profile:mobileNumber")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(44,39,"CMSService::usersManagement:JobTitle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,41,"CMSService::Calender:Sector")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchServiceFn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(56,43,"CMSService::Documents:GeneralAdministration")),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",null==t.mainDepartment?null:t.mainDepartment.items)("notFoundText",e.\u0275\u0275pipeBind1(58,45,"::NgSelect:NoDataFound")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(63,47,"CMSService::usersManagement:Management")),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",null==t.department?null:t.department.items)("notFoundText",e.\u0275\u0275pipeBind1(65,49,"::NgSelect:NoDataFound")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(70,51,"CMSService::usersManagement:Director")),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",null==t.directors?null:t.directors.items)("notFoundText",e.\u0275\u0275pipeBind1(72,53,"::NgSelect:NoDataFound")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(76,55,t.isEditMode?"AbpUi::Edit":"AbpUi::Save")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(80,57,"AbpUi::Cancel")," ")}}function me(n,o){if(1&n&&e.\u0275\u0275template(0,pe,81,59,"form",3),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form)}}let F=(()=>{class n extends c.AbstractFormComponent{constructor(t,a,r,i,l){super(),this._fb=t,this._userManagementService=a,this._employeeManagementService=r,this._toasterService=i,this._confirmationService=l,this.ValidationConsts=p.ValidationConsts,this.userTypeEnumOptions=[...Object.values(v.w).filter(U=>!1===isNaN(Number(U)))],this.employeeTypeEnum=v.w,this.savedSuccess=new e.EventEmitter,this.isModalBusy=!1,this.isModalOpen=!1,this.modalOptions={centered:!0,size:"xl",backdrop:"static"},this.selectedTypeOption=v.w.Contracter,this.searchServiceFn=this._searchServices.bind(this)}showModal(t){this.isEditMode=null!=t,this.userData=void 0,this.form=void 0,this.isModalOpen=!0,this._getSectors(),this._getDirectorsList(),this.isEditMode?this._getUserDetails(t):this._InitForm()}_getUserDetails(t){this.sub$=this._userManagementService.getEmployee(t).subscribe(a=>{this.userData=a,this._InitForm(),this._getMainDepartment(this.userData.sectorId),this._getDepartment(this.userData.sectorId,this.userData.generalDepartmentId)})}_InitForm(){this.form=this._fb.group({userName:[{value:this.userData?.username,disabled:this.isEditMode},[p.CustomValidators.RequiredValidator(),m.Validators.maxLength(100),p.CustomValidators.userNameValidator()]],employeeNameAr:[this.userData?.empFullNameAr,[p.CustomValidators.RequiredValidator(),m.Validators.minLength(p.ValidationConsts.FD012MinLength),m.Validators.maxLength(p.ValidationConsts.FD012MaxLength),p.CustomValidators.InvalidCharacterValidator()]],employeeNameEn:[this.userData?.empFullNameEn,[p.CustomValidators.RequiredValidator(),m.Validators.minLength(p.ValidationConsts.FD012MinLength),m.Validators.maxLength(p.ValidationConsts.FD012MaxLength),p.CustomValidators.InvalidCharacterValidator()]],email:[this.userData?.email,[p.CustomValidators.RequiredValidator(),m.Validators.maxLength(70),p.CustomValidators.emailValidator()]],jobTitleAr:[this.userData?.jobTitleAr,[p.CustomValidators.RequiredValidator(),m.Validators.maxLength(p.ValidationConsts.FD012MaxLength),p.CustomValidators.InvalidCharacterValidator()]],jobTitleEn:[this.userData?.jobTitleEn],sectorId:[this.userData?.sectorId,[p.CustomValidators.RequiredValidator()]],generalDepartmentId:[this.userData?.generalDepartmentId,[p.CustomValidators.RequiredValidator()]],departmentId:[this.userData?.departmentId,[p.CustomValidators.RequiredValidator()]],directManagerUserName:[this.userData?.directManagerUserName,[p.CustomValidators.RequiredValidator()]],phoneNumber:[this.userData?.phoneNumber,[p.CustomValidators.RequiredValidator(),p.CustomValidators.MobileValidator()]]})}submitForm(){if(this.form.invalid)return this._toasterService.warn("::FormValidationWarining"),void this.scrollToFirstInvalidControl();this.form.controls.jobTitleEn.setValue(this.form.controls.jobTitleAr.value),this.sub$=this._confirmationService.warn(this.isEditMode?"::CONF003":"::CONF001","::AreYouSure",void 0,{yesSeverity:"success"}).pipe((0,g.filter)(t=>t===c.SWConfirmation.SWStatus.confirm)).subscribe(()=>{(this.isEditMode?this._employeeManagementService.updateEmployee({id:this.userData.id,...this.form.value,userName:this.userData.username}):this._employeeManagementService.createEmployee(this.form.value)).subscribe(()=>{this._toasterService.success("::Success"),this.savedSuccess.emit(!0),this.isModalOpen=!1})})}cancelForm(){this._confirmationService.warn("::CONF004","::AreYouSure",void 0,{yesSeverity:"error"}).pipe((0,g.filter)(t=>t===c.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this.isModalOpen=!1})}_searchServices(t){return this._userManagementService.getListSectors(t)}selectRequestFormDropDown(t){this._getMainDepartment(t.id),this.form.controls.generalDepartmentId.reset(),this.form.controls.departmentId.reset()}_getSectors(){this.sub$=this._userManagementService.getListSectors({filter:"",maxResultCount:1e3}).subscribe(t=>this.sectors=t)}_getMainDepartment(t){this.sub$=this._userManagementService.getListGenDepartments(t,{filter:"",maxResultCount:1e3}).subscribe(a=>this.mainDepartment=a)}changeFilterValueForDropDown(t){this._getDepartment(this.form.controls.sectorId.value,t.id),this.form.controls.departmentId.reset()}_getDepartment(t,a){this.sub$=this._userManagementService.getListDepartments(a,{filter:"",maxResultCount:1e3}).subscribe(r=>this.department=r)}_getDirectorsList(){this._userManagementService.getListUsers({filter:"",maxResultCount:1e3}).subscribe(t=>this.directors=t)}keyPressNumbers(t){const a=t.which?t.which:t.keyCode;return!(a<48||a>57)||43==a||(t.preventDefault(),!1)}close(){this.isModalBusy=!1}ngOnDestroy(){this.sub$?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(m.FormBuilder),e.\u0275\u0275directiveInject(h),e.\u0275\u0275directiveInject(oe),e.\u0275\u0275directiveInject(_.ToasterService),e.\u0275\u0275directiveInject(c.SWConfirmationService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-user-create-update"]],outputs:{savedSuccess:"savedSuccess"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:3,consts:[[3,"busy","visible","options","visibleChange","disappear"],["abpHeader",""],["abpBody",""],[3,"formGroup","validateOnSubmit","ngSubmit",4,"ngIf"],[3,"formGroup","validateOnSubmit","ngSubmit"],[1,"card","p-3"],[1,"row"],[1,"col-lg-6","col-md-12"],[1,"form-group"],["for","userName",1,"form-label"],["formControlName","userName",1,"form-control",3,"maxlength"],["for","userType",1,"form-label"],[1,"row","mt-1"],["class","col-lg-6 col-md-12",4,"ngFor","ngForOf"],[1,"col-lg-6","col-md-12","pt-2"],["for","employeeNameAr",1,"form-label"],["formControlName","employeeNameAr",1,"form-control",3,"maxlength"],["for","employeeNameEn",1,"form-label"],["formControlName","employeeNameEn",1,"form-control",3,"maxlength"],["for","email",1,"form-label"],["formControlName","email","maxlength","70",1,"form-control"],["for","",1,"form-label"],["type","text","maxlength","10","formControlName","phoneNumber",1,"form-control",3,"keypress"],["for","jobTitleAr",1,"form-label"],["formControlName","jobTitleAr",1,"form-control",3,"maxlength"],["for","sectorId",1,"mb-1","form-label"],["formControlName","sectorId",3,"searchFn","valueChanged"],["for","generalDepartmentId",1,"form-label"],["formControlName","generalDepartmentId","bindLabel","displayName","bindValue","id",3,"items","notFoundText","change"],["for","departmentId",1,"form-label"],["formControlName","departmentId","bindLabel","displayName","bindValue","id",3,"items","notFoundText"],["for","directManagerUserName",1,"form-label"],["formControlName","directManagerUserName","bindLabel","displayName","bindValue","id",3,"items","notFoundText"],[1,"d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-primary","d-flex","mx-3","btn-padding"],["src","assets/images/checkIcon.png","alt","save",1,"ms-2"],["type","button",1,"btn-cancel",3,"click"],[1,"form-check"],["disabled","","type","radio","name","userType",1,"form-check-input","input-check",3,"checked","id"],[1,"form-label",3,"for"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(l){return r.isModalOpen=l})("disappear",function(){return r.close()}),e.\u0275\u0275template(1,se,4,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,me,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("busy",r.isModalBusy)("visible",r.isModalOpen)("options",r.modalOptions)},dependencies:[u.NgForOf,u.NgIf,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.MaxLengthValidator,m.FormGroupDirective,m.FormControlName,d.FormSubmitDirective,M.ValidationGroupDirective,M.ValidationDirective,_.ModalComponent,p.NgSelectAutoCompleteComponent,C.NgSelectComponent,d.LocalizationPipe],styles:[".btn-padding[_ngcontent-%COMP%]{padding:8px 16px}.btn-cancel[_ngcontent-%COMP%]{border-radius:8px;border:1px solid var(--neutral-400, #94a3b8);padding:8px 30px;background-color:transparent;color:var(--neutral-500, #64748b);text-align:center;font-size:16px;font-weight:500}.disabled-input[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;background:#f8fafc;box-shadow:0 2px 4px #0000000f inset,0 3px 8px #0000000d;padding:12px;font-size:13px;font-weight:700}.form-check[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--Neutral-500, #64748B)}"]})}return n})();function ce(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",19),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const r=e.\u0275\u0275reference(28);return e.\u0275\u0275resetView(r.showModal(null))}),e.\u0275\u0275element(1,"img",20),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("alt",e.\u0275\u0275pipeBind1(2,2,"CMSService::usersManagement:AddUser")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"CMSService::usersManagement:AddUser")))}function de(n,o){1&n&&e.\u0275\u0275element(0,"span",21)}function ue(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,30),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(10);e.\u0275\u0275property("ngTemplateOutlet",t)}}function ge(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,30),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngTemplateOutlet",t)}}function _e(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,30),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngTemplateOutlet",t)}}function fe(n,o){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275textInterpolate1(" ",t," ")}}function he(n,o){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext().value,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275textInterpolate(a.employeeType(t))}}function ve(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.phoneNumber)}}function Ce(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",24),e.\u0275\u0275template(4,ue,1,1,"ng-container",25),e.\u0275\u0275template(5,ge,1,1,"ng-container",25),e.\u0275\u0275template(6,_e,1,1,"ng-container",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,fe,1,1,"ng-template",null,27,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(9,he,1,1,"ng-template",null,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(11,ve,2,1,"ng-template",null,29,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,4,t.name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",t.prop),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","employeeType"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","phoneNumber")}}function be(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"ngx-datatable-column",22),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275template(2,Ce,13,6,"ng-template",14),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit;e.\u0275\u0275property("name",e.\u0275\u0275pipeBind1(1,6,t.name))("prop",t.prop)("flexGrow",t.flexGrow)("sortable",t.sortable)("resizeable",!1)("draggable",!1)}}function xe(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2).row;e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(28);return e.\u0275\u0275resetView(i.showModal(null==r?null:r.userName))}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275element(2,"i",38),e.\u0275\u0275elementEnd()}2&n&&e.\u0275\u0275propertyInterpolate1("ngbTooltip","",e.\u0275\u0275pipeBind1(1,1,"CMSService::usersManagement:EditUser")," ")}function Se(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",39),e.\u0275\u0275element(1,"i",40),e.\u0275\u0275elementEnd())}function Me(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,xe,3,3,"div",36),e.\u0275\u0275template(2,Se,2,0,"div",37),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().row,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.employeeType===a.employeeTypeEnum.Contracter),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.employeeType!==a.employeeTypeEnum.Contracter)}}function ye(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,Me,3,2,"div",33),e.\u0275\u0275elementStart(2,"div",34),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).row;e.\u0275\u0275nextContext();const l=e.\u0275\u0275reference(26);return e.\u0275\u0275resetView(l.showModal(null==i?null:i.id,null==i?null:i.userName,null==i?null:i.employeeNameAr,null==i?null:i.employeeNameEn))}),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275element(4,"i",35),e.\u0275\u0275elementEnd()()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("abpPermission","UserProfileService.EmployeeInfos.Edit"),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(3,2,"CMSService::usersManagement:Permissions")))}function Te(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-nodata-or-loading",41),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementStart(4,"div",42)(5,"app-pager",43),e.\u0275\u0275listener("pageNumberChanged",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onPageNumberChange(r))})("pageSizeChanged",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(),l=e.\u0275\u0275reference(18);return e.\u0275\u0275resetView(i.onPageSizeChange(r,l))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=o.rowCount,a=o.pageSize,r=o.curPage,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("isLoadingData",i.service.isLoading)("isDataNotEmpty",i.service.data.items.length>0)("isDataFiltered",i.service.isFiltering)("nodataMessage",e.\u0275\u0275pipeBind1(1,9,"CMSService::NoUsersCurrently"))("noFilterResultMessage",e.\u0275\u0275pipeBind1(2,11,"CMSService::UsersNoFilterResult"))("noFilterResultHint",e.\u0275\u0275pipeBind1(3,13,"CMSService::ChangeFilters")),e.\u0275\u0275advance(5),e.\u0275\u0275property("page",r)("size",a)("count",t)}}function Ee(n){return new c.ListFilterService(n.getList)}const De=[{path:"",component:(()=>{class n extends c.AbstractListComponent{constructor(t,a){super(),this.service=t,this._userManagementService=a,this.columns=[{name:"CMSService::usersManagement:Username",prop:"userName",flexGrow:3},{name:"CMSService::usersManagement:userType",prop:"employeeType",flexGrow:3,sortable:!1},{name:"CMSService::usersManagement:EmployeeNameArabic",prop:"employeeNameAr",flexGrow:4,sortable:!1},{name:"CMSService::usersManagement:EmployeeNameEnglish",prop:"employeeNameEn",flexGrow:4,sortable:!1},{name:"CMSService::EmployeeGuide:Email",prop:"email",flexGrow:4,sortable:!1},{name:"CMSService::usersManagement:JobTitle",prop:"jobTitle",flexGrow:3,sortable:!1},{name:"UserProfileService::Profile:mobileNumber",prop:"phoneNumber",flexGrow:3,sortable:!1},{name:"CMSService::Calender:Sector",prop:"sector",flexGrow:3,sortable:!1},{name:"CMSService::Calendar:Management",prop:"generalDepartment",flexGrow:3,sortable:!1},{name:"CMSService::usersManagement:Management",prop:"management",flexGrow:3,sortable:!1},{name:"CMSService::usersManagement:Director",prop:"directManager",flexGrow:3,sortable:!1}],this.isExportToExcelBusy=!1,this.employeeTypeEnum=v.w}exportToExcel(){this.isExportToExcelBusy=!0,this._userManagementService.getDownloadToken().pipe((0,g.switchMap)(({token:t})=>this._userManagementService.getListAsExcelFile({downloadToken:t,ruleNames:[],...this.service.getFilters()})),(0,g.finalize)(()=>this.isExportToExcelBusy=!1)).subscribe(t=>{this.toasterService.success("CMSService::SuccessfullyExportData"),(0,d.downloadBlob)(t,"UsersList.xlsx")})}employeeType(t){if(t)return this.localizationService.instant("CMSService::usersManagement:userType:"+t)}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(c.ListFilterService),e.\u0275\u0275directiveInject(h))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-users-management-list"]],features:[e.\u0275\u0275ProvidersFeature([d.ListService,c.SelectedFiltersBannerService,{provide:c.ListFilterService,useFactory:Ee,deps:[h]}]),e.\u0275\u0275InheritDefinitionFeature],decls:29,vars:21,consts:[[3,"pageTitle","icon"],[1,"card-wrapper","mt-3"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-wrap","actions-btn","gap-2"],["class","btn btn-sm btn-primary d-flex align-items-center",3,"click",4,"abpPermission"],[1,"btn","btn-sm","btn-outline-primary","export-btn","d-flex","align-items-center",3,"click"],["src","../../../../../assets/images/export.svg",1,"me-1",3,"alt"],["class","spinner-border ms-1 spinner-border-sm","aria-hidden","true",4,"ngIf"],[1,"card","p-3","background"],["default","",3,"rows","count","list","columnMode"],["table",""],[3,"name","prop","flexGrow","sortable","resizeable","draggable",4,"ngFor","ngForOf"],[3,"flexGrow","name"],["ngx-datatable-cell-template",""],["ngx-datatable-footer-template",""],[3,"savedSuccess"],["permissionViewEdit",""],["userCreateEdit",""],[1,"btn","btn-sm","btn-primary","d-flex","align-items-center",3,"click"],["src","../../../../../assets/images/plus-circle-add.svg",1,"me-1",3,"alt"],["aria-hidden","true",1,"spinner-border","ms-1","spinner-border-sm"],[3,"name","prop","flexGrow","sortable","resizeable","draggable"],[1,"column-label"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["valueOnly",""],["columnEmployeeType",""],["columnPhoneNumber",""],[3,"ngTemplateOutlet"],[1,"phoneNumber"],[1,"table-actions"],[4,"abpPermission"],["placement","top","container","body",1,"btn","btn-outline-primary",3,"ngbTooltip","click"],[1,"icon-cog"],["class","btn btn-outline-primary","placement","top","container","body",3,"ngbTooltip","click",4,"ngIf"],["class","btn edit-user-btn",4,"ngIf"],[1,"icon-pencil"],[1,"btn","edit-user-btn"],[1,"icon-pencil","disabled-icon"],["loaderImage","table.svg","nodataImage","users.svg","noFilterResultImage","no-filter-result.svg",3,"isLoadingData","isDataNotEmpty","isDataFiltered","nodataMessage","noFilterResultMessage","noFilterResultHint"],[1,"w-100","footer"],[3,"page","size","count","pageNumberChanged","pageSizeChanged"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"abp-page")(1,"app-page-header",0),e.\u0275\u0275element(2,"app-users-management-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"app-selected-filters-banner"),e.\u0275\u0275elementStart(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4),e.\u0275\u0275template(8,ce,6,6,"button",5),e.\u0275\u0275elementStart(9,"button",6),e.\u0275\u0275listener("click",function(){return r.exportToExcel()}),e.\u0275\u0275element(10,"img",7),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,de,1,0,"span",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",9)(17,"ngx-datatable",10,11),e.\u0275\u0275template(19,be,3,8,"ngx-datatable-column",12),e.\u0275\u0275elementStart(20,"ngx-datatable-column",13),e.\u0275\u0275pipe(21,"abpLocalization"),e.\u0275\u0275template(22,ye,5,4,"ng-template",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"ngx-datatable-footer"),e.\u0275\u0275template(24,Te,6,15,"ng-template",15),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(25,"app-users-management-view-or-update",16,17),e.\u0275\u0275listener("savedSuccess",function(){return r.list.get()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"app-user-create-update",16,18),e.\u0275\u0275listener("savedSuccess",function(){return r.list.get()}),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("pageTitle","CMSService::Menu:ManageUsers")("icon","users"),e.\u0275\u0275advance(7),e.\u0275\u0275property("abpPermission","UserProfileService.EmployeeInfos.Create"),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("alt",e.\u0275\u0275pipeBind1(11,15,"CMSService::usersManagement:ExportData")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,17,"CMSService::usersManagement:ExportData")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.isExportToExcelBusy),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-empty",r.service.isLoading||0===r.service.data.items.length),e.\u0275\u0275property("rows",r.service.data.items)("count",r.service.data.totalCount)("list",r.list)("columnMode","flex"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.columns),e.\u0275\u0275advance(1),e.\u0275\u0275property("flexGrow",4)("name",e.\u0275\u0275pipeBind1(21,19,"AbpUi::Actions")))},dependencies:[u.NgForOf,u.NgIf,u.NgTemplateOutlet,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,d.PermissionDirective,x.PageComponent,f.DatatableComponent,f.DataTableColumnDirective,f.DataTableColumnCellDirective,f.DataTableFooterTemplateDirective,f.DatatableFooterDirective,_.NgxDatatableDefaultDirective,_.NgxDatatableListDirective,c.PageHeaderComponent,c.SelectedFiltersBannerComponent,p.PagerComponent,p.NodataOrLoadingComponent,T.NgbTooltip,E,ie,F,d.LocalizationPipe],styles:["[_nghost-%COMP%]     .ngx-datatable.material .datatable-body{overflow:auto!important}.background[_ngcontent-%COMP%]{background:#f0f0f6}.action-btn[_ngcontent-%COMP%]{border-radius:8px;border:1px solid var(--neutral-200, #e2e8f0);font-size:20px;padding:1px 5px!important}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7f92ff}.edit-user-btn[_ngcontent-%COMP%]{cursor:default;border:1px solid var(--Neutral-200, #e2e8f0)}.disabled-icon[_ngcontent-%COMP%], .disabled-icon[_ngcontent-%COMP%]:hover{opacity:.1;background-color:#fff!important;color:#1e293b!important}.export-btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:#5e1ad5}.card-body[_ngcontent-%COMP%]   .actions-btn[_ngcontent-%COMP%]{padding-bottom:1rem}.phoneNumber[_ngcontent-%COMP%]{direction:ltr}@media screen and (max-width: 576px){.actions-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1 1 auto}}"]})}return n})(),canActivate:[d.PermissionGuard],data:{requiredPolicy:"IdentityService.UserManagements"}},{path:"create",component:F,canActivate:[d.PermissionGuard],data:{requiredPolicy:"UserProfileService.EmployeeInfos.Create"}}];let Ue=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[b.RouterModule.forChild(De),b.RouterModule]})}return n})();var Ie=s(92134);let we=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[Ue,Ie.b]})}return n})()}}]);