(self.webpackChunkportal=self.webpackChunkportal||[]).push([[75162,49671,6099,40122,27351],{49671:(Yt,ye,P)=>{function W(f,y,e,F,x,re,D){try{var E=f[re](D),m=E.value}catch(C){return void e(C)}E.done?y(m):Promise.resolve(m).then(F,x)}function q(f){return function(){var y=this,e=arguments;return new Promise(function(F,x){var re=f.apply(y,e);function D(m){W(re,F,x,D,E,"next",m)}function E(m){W(re,F,x,D,E,"throw",m)}D(void 0)})}}P.d(ye,{Z:()=>q})},74995:(Yt,ye,P)=>{P.d(ye,{BR:()=>I,H3:()=>et,K:()=>Pe,ez:()=>oe});var W=P(81011),q=P(11705),y=function(S){return S[S.Success=1]="Success",S[S.InvalidUserNameOrPassword=2]="InvalidUserNameOrPassword",S[S.NotAllowed=3]="NotAllowed",S[S.LockedOut=4]="LockedOut",S[S.RequiresTwoFactor=5]="RequiresTwoFactor",S[S.NotLinked=6]="NotLinked",S}(y||{});(0,W.mapEnumToOptions)(y),class Ke{constructor(ue){this.restService=ue,this.apiName="AbpAccountPublic",this.checkPasswordByLogin=(R,h)=>this.restService.request({method:"POST",url:"/api/account/checkPassword",body:R},{apiName:this.apiName,...h}),this.linkLoginByLogin=(R,h)=>this.restService.request({method:"POST",url:"/api/account/linkLogin",body:R},{apiName:this.apiName,...h}),this.loginByLogin=(R,h)=>this.restService.request({method:"POST",url:"/api/account/login",body:R},{apiName:this.apiName,...h}),this.logout=R=>this.restService.request({method:"GET",url:"/api/account/logout"},{apiName:this.apiName,...R})}static#e=this.\u0275fac=function(R){return new(R||Ke)(q.\u0275\u0275inject(W.RestService))};static#t=this.\u0275prov=q.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"})};let I=(()=>{class S{constructor(R){this.restService=R,this.apiName="AbpAccountPublic",this.confirmEmail=(h,b)=>this.restService.request({method:"POST",url:"/api/account/confirm-email",body:h},{apiName:this.apiName,...b}),this.confirmPhoneNumber=(h,b)=>this.restService.request({method:"POST",url:"/api/account/confirm-phone-number",body:h},{apiName:this.apiName,...b}),this.getAuthenticatorInfo=h=>this.restService.request({method:"GET",url:"/api/account/authenticator-info"},{apiName:this.apiName,...h}),this.getConfirmationState=(h,b)=>this.restService.request({method:"GET",url:"/api/account/confirmation-state",params:{id:h}},{apiName:this.apiName,...b}),this.getProfilePicture=(h,b)=>this.restService.request({method:"GET",url:`/api/account/profile-picture/${h}`},{apiName:this.apiName,...b}),this.getProfilePictureFile=(h,b)=>this.restService.request({method:"GET",responseType:"blob",url:`/api/account/profile-picture-file/${h}`},{apiName:this.apiName,...b}),this.getSecurityLogList=(h,b)=>this.restService.request({method:"GET",url:"/api/account/security-logs",params:{startTime:h.startTime,endTime:h.endTime,applicationName:h.applicationName,identity:h.identity,action:h.action,userName:h.userName,clientId:h.clientId,correlationId:h.correlationId,sorting:h.sorting,skipCount:h.skipCount,maxResultCount:h.maxResultCount,extraProperties:h.extraProperties}},{apiName:this.apiName,...b}),this.getTwoFactorProviders=(h,b)=>this.restService.request({method:"GET",url:"/api/account/two-factor-providers",params:{userId:h.userId,token:h.token}},{apiName:this.apiName,...b}),this.hasAuthenticator=h=>this.restService.request({method:"GET",url:"/api/account/has-authenticator-key"},{apiName:this.apiName,...h}),this.recaptchaByCaptchaResponse=(h,b)=>this.restService.request({method:"GET",url:"/api/account/recaptcha-validate",params:{captchaResponse:h}},{apiName:this.apiName,...b}),this.register=(h,b)=>this.restService.request({method:"POST",url:"/api/account/register",body:h},{apiName:this.apiName,...b}),this.resetAuthenticator=h=>this.restService.request({method:"POST",url:"/api/account/reset-authenticator"},{apiName:this.apiName,...h}),this.resetPassword=(h,b)=>this.restService.request({method:"POST",url:"/api/account/reset-password",body:h},{apiName:this.apiName,...b}),this.sendEmailConfirmationToken=(h,b)=>this.restService.request({method:"POST",url:"/api/account/send-email-confirmation-token",body:h},{apiName:this.apiName,...b}),this.sendPasswordResetCode=(h,b)=>this.restService.request({method:"POST",url:"/api/account/send-password-reset-code",body:h},{apiName:this.apiName,...b}),this.sendPhoneNumberConfirmationToken=(h,b)=>this.restService.request({method:"POST",url:"/api/account/send-phone-number-confirmation-token",body:h},{apiName:this.apiName,...b}),this.sendTwoFactorCode=(h,b)=>this.restService.request({method:"POST",url:"/api/account/send-two-factor-code",body:h},{apiName:this.apiName,...b}),this.setProfilePicture=(h,b)=>this.restService.request({method:"POST",url:"/api/account/profile-picture",params:{type:h.type},body:h.imageContent},{apiName:this.apiName,...b}),this.verifyAuthenticatorCode=(h,b)=>this.restService.request({method:"POST",url:"/api/account/verify-authenticator-code",body:h},{apiName:this.apiName,...b}),this.verifyEmailConfirmationToken=(h,b)=>this.restService.request({method:"POST",url:"/api/account/verify-email-confirmation-token",body:h},{apiName:this.apiName,...b}),this.verifyPasswordResetToken=(h,b)=>this.restService.request({method:"POST",url:"/api/account/verify-password-reset-token",body:h},{apiName:this.apiName,...b})}static#e=this.\u0275fac=function(h){return new(h||S)(q.\u0275\u0275inject(W.RestService))};static#t=this.\u0275prov=q.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),Pe=(()=>{class S{constructor(R){this.restService=R,this.apiName="AbpAccountPublic",this.generateLinkLoginToken=h=>this.restService.request({method:"POST",responseType:"text",url:"/api/account/link-user/generate-link-login-token"},{apiName:this.apiName,...h}),this.generateLinkToken=h=>this.restService.request({method:"POST",responseType:"text",url:"/api/account/link-user/generate-link-token"},{apiName:this.apiName,...h}),this.getAllList=h=>this.restService.request({method:"GET",url:"/api/account/link-user"},{apiName:this.apiName,...h}),this.isLinked=(h,b)=>this.restService.request({method:"POST",url:"/api/account/link-user/is-linked",body:h},{apiName:this.apiName,...b}),this.link=(h,b)=>this.restService.request({method:"POST",url:"/api/account/link-user/link",body:h},{apiName:this.apiName,...b}),this.unlink=(h,b)=>this.restService.request({method:"POST",url:"/api/account/link-user/unlink",body:h},{apiName:this.apiName,...b}),this.verifyLinkLoginToken=(h,b)=>this.restService.request({method:"POST",url:"/api/account/link-user/verify-link-login-token",body:h},{apiName:this.apiName,...b}),this.verifyLinkToken=(h,b)=>this.restService.request({method:"POST",url:"/api/account/link-user/verify-link-token",body:h},{apiName:this.apiName,...b})}static#e=this.\u0275fac=function(h){return new(h||S)(q.\u0275\u0275inject(W.RestService))};static#t=this.\u0275prov=q.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),oe=(()=>{class S{constructor(R){this.restService=R,this.apiName="AbpAccountPublic",this.delegateNewUser=(h,b)=>this.restService.request({method:"POST",url:"/api/account/user-delegation/delegate-new-user",body:h},{apiName:this.apiName,...b}),this.deleteDelegation=(h,b)=>this.restService.request({method:"POST",url:"/api/account/user-delegation/delete-delegation",params:{id:h}},{apiName:this.apiName,...b}),this.getActiveDelegations=h=>this.restService.request({method:"GET",url:"/api/account/user-delegation/active-delegations"},{apiName:this.apiName,...h}),this.getDelegatedUsers=h=>this.restService.request({method:"GET",url:"/api/account/user-delegation/delegated-users"},{apiName:this.apiName,...h}),this.getMyDelegatedUsers=h=>this.restService.request({method:"GET",url:"/api/account/user-delegation/my-delegated-users"},{apiName:this.apiName,...h}),this.getUserLookup=(h,b)=>this.restService.request({method:"GET",url:"/api/account/user-delegation/user-lookup",params:{filter:h.filter}},{apiName:this.apiName,...b})}static#e=this.\u0275fac=function(h){return new(h||S)(q.\u0275\u0275inject(W.RestService))};static#t=this.\u0275prov=q.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();var Ie=function(S){return S[S.None=0]="None",S[S.Gravatar=1]="Gravatar",S[S.Image=2]="Image",S}(Ie||{});(0,W.mapEnumToOptions)(Ie);let et=(()=>{class S{constructor(R){this.restService=R,this.apiName="AbpAccountPublic",this.canEnableTwoFactor=h=>this.restService.request({method:"GET",url:"/api/account/my-profile/can-enable-two-factor"},{apiName:this.apiName,...h}),this.changePassword=(h,b)=>this.restService.request({method:"POST",url:"/api/account/my-profile/change-password",body:h},{apiName:this.apiName,...b}),this.get=h=>this.restService.request({method:"GET",url:"/api/account/my-profile"},{apiName:this.apiName,...h}),this.getTwoFactorEnabled=h=>this.restService.request({method:"GET",url:"/api/account/my-profile/two-factor-enabled"},{apiName:this.apiName,...h}),this.setTwoFactorEnabled=(h,b)=>this.restService.request({method:"POST",url:"/api/account/my-profile/set-two-factor-enabled",params:{enabled:h}},{apiName:this.apiName,...b}),this.update=(h,b)=>this.restService.request({method:"PUT",url:"/api/account/my-profile",body:h},{apiName:this.apiName,...b})}static#e=this.\u0275fac=function(h){return new(h||S)(q.\u0275\u0275inject(W.RestService))};static#t=this.\u0275prov=q.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})()},75162:(Yt,ye,P)=>{P.r(ye),P.d(ye,{ACCOUNT_CONFIG_OPTIONS:()=>We,AccountExtensionsGuard:()=>Ot,AccountPublicModule:()=>ao,AccountService:()=>ie,AuthenticationFlowGuard:()=>Te,AuthenticatorAppComponent:()=>Ui,AuthenticatorAppService:()=>Mt,ChangePasswordComponent:()=>Vt,ChangePasswordService:()=>Lt,EmailConfirmationComponent:()=>bt,ForgotPasswordComponent:()=>yt,LinkLoggedComponent:()=>St,LoginComponent:()=>xt,LoginWithRecoveryCodeComponent:()=>ji,ManageProfileComponent:()=>At,ManageProfileResolver:()=>Wt,ManageProfileStateService:()=>Ae,MySecurityLogsComponent:()=>$e,PERIODICALLY_CHANGE_PASSWORD:()=>Di,PersonalSettingsComponent:()=>zt,PersonalSettingsEmailComponent:()=>Rt,PersonalSettingsHalfRowComponent:()=>Ye,PersonalSettingsPhoneNumberComponent:()=>kt,PersonalSettingsVerifyButtonComponent:()=>Xe,ProfilePictureComponent:()=>Ut,QrCodeComponent:()=>zi,RECAPTCHA_STRATEGY:()=>_t,REQUIRES_TWO_FACTOR:()=>Ni,RE_LOGIN_CONFIRMATION_TOKEN:()=>jt,RecaptchaLoginStrategy:()=>Ti,RecaptchaPageStrategy:()=>Ct,RecaptchaRegisterStrategy:()=>Ei,RecaptchaService:()=>Fe,RecaptchaStrategy:()=>wt,RecaptchaV2Strategy:()=>Pi,RecaptchaV3Strategy:()=>Ii,RecoveryCodeGuard:()=>Bt,RecoveryCodeService:()=>Ve,RefreshPasswordComponent:()=>qt,RegisterComponent:()=>Et,ResetPasswordComponent:()=>Pt,SHOULD_CHANGE_PASSWORD_ON_NEXT_LOGIN:()=>Li,SecurityCodeGuard:()=>Ft,SecurityCodeService:()=>Be,SendSecurityCodeComponent:()=>It,TwoFactorTabComponent:()=>Gt,TwoFactorTabService:()=>Dt,UrlComponentEncoder:()=>Ai,accountOptionsFactory:()=>Gi,getRedirectUrl:()=>He});var W=P(49671),q=P(42595),f=P(81011),y=P(27437),e=P(11705),F=P(82830),x=P(74478),re=P(86418),D=P(28675),E=P(62411),m=P(36394),C=P(32070),Z=P(74995),_=P(4125),Ee=P(47615),Xt=P(87145),Ze=P(67861),I=P(32709),Pe=P(33028),oe=P(30973);function Ie(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function Je(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ie(Object(t),!0).forEach(function(i){Yi(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ie(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function S(n){var r=function et(n,r){if("object"!=typeof n||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(n)}(n,"string");return"symbol"==typeof r?r:r+""}function ue(n){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(n)}function h(n,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,S(i.key),i)}}function Yi(n,r,t){return(r=S(r))in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function Qt(n){return function Xi(n){if(Array.isArray(n))return tt(n)}(n)||function Qi(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function Ki(n,r){if(n){if("string"==typeof n)return tt(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tt(n,r)}}(n)||function Zi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(n,r){(null==r||r>n.length)&&(r=n.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=n[t];return i}var ze=typeof window<"u"&&typeof window.document<"u",ee=ze?window:{},it=!(!ze||!ee.document.documentElement)&&"ontouchstart"in ee.document.documentElement,nt=!!ze&&"PointerEvent"in ee,k="cropper",ce="n",Ne="ne",Le="nw",De="se",Me="sw",ot="".concat(k,"-crop"),ei="".concat(k,"-disabled"),H="".concat(k,"-hidden"),ti="".concat(k,"-hide"),Ji="".concat(k,"-invisible"),Ue="".concat(k,"-modal"),at="".concat(k,"-move"),Re="".concat(k,"Action"),Ge="".concat(k,"Preview"),st="crop",ct="crop",lt="cropend",pt="cropmove",dt="cropstart",ri="dblclick",oi=nt?"pointerdown":it?"touchstart":"mousedown",ai=nt?"pointermove":it?"touchmove":"mousemove",si=nt?"pointerup pointercancel":it?"touchend touchcancel":"mouseup",ut="zoom",di="image/jpeg",rn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,on=/^data:/,an=/^data:image\/jpeg;base64,/,sn=/^img|canvas$/i,hi={viewMode:0,dragMode:st,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ln=Number.isNaN||ee.isNaN;function A(n){return"number"==typeof n&&!ln(n)}var fi=function(r){return r>0&&r<1/0};function mt(n){return typeof n>"u"}function fe(n){return"object"===ue(n)&&null!==n}var pn=Object.prototype.hasOwnProperty;function Ce(n){if(!fe(n))return!1;try{var r=n.constructor,t=r.prototype;return r&&t&&pn.call(t,"isPrototypeOf")}catch{return!1}}function $(n){return"function"==typeof n}var dn=Array.prototype.slice;function gi(n){return Array.from?Array.from(n):dn.call(n)}function B(n,r){return n&&$(r)&&(Array.isArray(n)||A(n.length)?gi(n).forEach(function(t,i){r.call(n,t,i,n)}):fe(n)&&Object.keys(n).forEach(function(t){r.call(n,n[t],t,n)})),n}var O=Object.assign||function(r){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return fe(r)&&i.length>0&&i.forEach(function(a){fe(a)&&Object.keys(a).forEach(function(s){r[s]=a[s]})}),r},un=/\.\d*(?:0|9){12}\d*$/;function _e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return un.test(n)?Math.round(n*r)/r:n}var mn=/^width|height|left|top|marginLeft|marginTop$/;function le(n,r){var t=n.style;B(r,function(i,o){mn.test(o)&&A(i)&&(i="".concat(i,"px")),t[o]=i})}function U(n,r){if(r){if(A(n.length))return void B(n,function(i){U(i,r)});if(n.classList)return void n.classList.add(r);var t=n.className.trim();t?t.indexOf(r)<0&&(n.className="".concat(t," ").concat(r)):n.className=r}}function te(n,r){if(r){if(A(n.length))return void B(n,function(t){te(t,r)});if(n.classList)return void n.classList.remove(r);n.className.indexOf(r)>=0&&(n.className=n.className.replace(r,""))}}function we(n,r,t){if(r){if(A(n.length))return void B(n,function(i){we(i,r,t)});t?U(n,r):te(n,r)}}var fn=/([a-z\d])([A-Z])/g;function ht(n){return n.replace(fn,"$1-$2").toLowerCase()}function ft(n,r){return fe(n[r])?n[r]:n.dataset?n.dataset[r]:n.getAttribute("data-".concat(ht(r)))}function ke(n,r,t){fe(t)?n[r]=t:n.dataset?n.dataset[r]=t:n.setAttribute("data-".concat(ht(r)),t)}var vi=/\s\s*/,bi=function(){var n=!1;if(ze){var r=!1,t=function(){},i=Object.defineProperty({},"once",{get:function(){return n=!0,r},set:function(a){r=a}});ee.addEventListener("test",t,i),ee.removeEventListener("test",t,i)}return n}();function J(n,r,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t;r.trim().split(vi).forEach(function(a){if(!bi){var s=n.listeners;s&&s[a]&&s[a][t]&&(o=s[a][t],delete s[a][t],0===Object.keys(s[a]).length&&delete s[a],0===Object.keys(s).length&&delete n.listeners)}n.removeEventListener(a,o,i)})}function Q(n,r,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t;r.trim().split(vi).forEach(function(a){if(i.once&&!bi){var s=n.listeners,c=void 0===s?{}:s;o=function(){delete c[a][t],n.removeEventListener(a,o,i);for(var u=arguments.length,l=new Array(u),p=0;p<u;p++)l[p]=arguments[p];t.apply(n,l)},c[a]||(c[a]={}),c[a][t]&&n.removeEventListener(a,c[a][t],i),c[a][t]=o,n.listeners=c}n.addEventListener(a,o,i)})}function xe(n,r,t){var i;return $(Event)&&$(CustomEvent)?i=new CustomEvent(r,{detail:t,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(r,!0,!0,t),n.dispatchEvent(i)}function yi(n){var r=n.getBoundingClientRect();return{left:r.left+(window.pageXOffset-document.documentElement.clientLeft),top:r.top+(window.pageYOffset-document.documentElement.clientTop)}}var gt=ee.location,vn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Si(n){var r=n.match(vn);return null!==r&&(r[1]!==gt.protocol||r[2]!==gt.hostname||r[3]!==gt.port)}function Ci(n){var r="timestamp=".concat((new Date).getTime());return n+(-1===n.indexOf("?")?"?":"&")+r}function Oe(n){var r=n.rotate,t=n.scaleX,i=n.scaleY,o=n.translateX,a=n.translateY,s=[];A(o)&&0!==o&&s.push("translateX(".concat(o,"px)")),A(a)&&0!==a&&s.push("translateY(".concat(a,"px)")),A(r)&&0!==r&&s.push("rotate(".concat(r,"deg)")),A(t)&&1!==t&&s.push("scaleX(".concat(t,")")),A(i)&&1!==i&&s.push("scaleY(".concat(i,")"));var c=s.length?s.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function qe(n,r){var t=n.pageX,i=n.pageY,o={endX:t,endY:i};return r?o:Je({startX:t,startY:i},o)}function pe(n){var r=n.aspectRatio,t=n.height,i=n.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=fi(i),s=fi(t);if(a&&s){var c=t*r;"contain"===o&&c>i||"cover"===o&&c<i?t=i/r:i=t*r}else a?t=i/r:s&&(i=t*r);return{width:i,height:t}}var _i=String.fromCharCode,wn=/^data:.*,/;var Pn={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var r=this.element,t=this.options,i=this.container,o=this.cropper,a=Number(t.minContainerWidth),s=Number(t.minContainerHeight);U(o,H),te(r,H);var c={width:Math.max(i.offsetWidth,a>=0?a:200),height:Math.max(i.offsetHeight,s>=0?s:100)};this.containerData=c,le(o,{width:c.width,height:c.height}),U(r,H),te(o,H)},initCanvas:function(){var r=this.containerData,t=this.imageData,i=this.options.viewMode,o=Math.abs(t.rotate)%180==90,a=o?t.naturalHeight:t.naturalWidth,s=o?t.naturalWidth:t.naturalHeight,c=a/s,d=r.width,u=r.height;r.height*c>r.width?3===i?d=r.height*c:u=r.width/c:3===i?u=r.width/c:d=r.height*c;var l={aspectRatio:c,naturalWidth:a,naturalHeight:s,width:d,height:u};this.canvasData=l,this.limited=1===i||2===i,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(r.width-l.width)/2,l.top=(r.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=O({},l)},limitCanvas:function(r,t){var i=this.options,o=this.containerData,a=this.canvasData,s=this.cropBoxData,c=i.viewMode,d=a.aspectRatio,u=this.cropped&&s;if(r){var l=Number(i.minCanvasWidth)||0,p=Number(i.minCanvasHeight)||0;c>1?(l=Math.max(l,o.width),p=Math.max(p,o.height),3===c&&(p*d>l?l=p*d:p=l/d)):c>0&&(l?l=Math.max(l,u?s.width:0):p?p=Math.max(p,u?s.height:0):u&&((p=s.height)*d>(l=s.width)?l=p*d:p=l/d));var g=pe({aspectRatio:d,width:l,height:p});p=g.height,a.minWidth=l=g.width,a.minHeight=p,a.maxWidth=1/0,a.maxHeight=1/0}if(t)if(c>(u?0:1)){var T=o.width-a.width,w=o.height-a.height;a.minLeft=Math.min(0,T),a.minTop=Math.min(0,w),a.maxLeft=Math.max(0,T),a.maxTop=Math.max(0,w),u&&this.limited&&(a.minLeft=Math.min(s.left,s.left+(s.width-a.width)),a.minTop=Math.min(s.top,s.top+(s.height-a.height)),a.maxLeft=s.left,a.maxTop=s.top,2===c&&(a.width>=o.width&&(a.minLeft=Math.min(0,T),a.maxLeft=Math.max(0,T)),a.height>=o.height&&(a.minTop=Math.min(0,w),a.maxTop=Math.max(0,w))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=o.width,a.maxTop=o.height},renderCanvas:function(r,t){var i=this.canvasData,o=this.imageData;if(t){var a=function Sn(n){var r=n.width,t=n.height,i=n.degree;if(90==(i=Math.abs(i)%180))return{width:t,height:r};var o=i%90*Math.PI/180,a=Math.sin(o),s=Math.cos(o),c=r*s+t*a,d=r*a+t*s;return i>90?{width:d,height:c}:{width:c,height:d}}({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),s=a.width,c=a.height,d=i.width*(s/i.naturalWidth),u=i.height*(c/i.naturalHeight);i.left-=(d-i.width)/2,i.top-=(u-i.height)/2,i.width=d,i.height=u,i.aspectRatio=s/c,i.naturalWidth=s,i.naturalHeight=c,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,le(this.canvas,O({width:i.width,height:i.height},Oe({translateX:i.left,translateY:i.top}))),this.renderImage(r),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(r){var t=this.canvasData,i=this.imageData,o=i.naturalWidth*(t.width/t.naturalWidth),a=i.naturalHeight*(t.height/t.naturalHeight);O(i,{width:o,height:a,left:(t.width-o)/2,top:(t.height-a)/2}),le(this.image,O({width:i.width,height:i.height},Oe(O({translateX:i.left,translateY:i.top},i)))),r&&this.output()},initCropBox:function(){var r=this.options,t=this.canvasData,i=r.aspectRatio||r.initialAspectRatio,o=Number(r.autoCropArea)||.8,a={width:t.width,height:t.height};i&&(t.height*i>t.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*o),a.height=Math.max(a.minHeight,a.height*o),a.left=t.left+(t.width-a.width)/2,a.top=t.top+(t.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=O({},a)},limitCropBox:function(r,t){var i=this.options,o=this.containerData,a=this.canvasData,s=this.cropBoxData,c=this.limited,d=i.aspectRatio;if(r){var u=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,p=c?Math.min(o.width,a.width,a.width+a.left,o.width-a.left):o.width,g=c?Math.min(o.height,a.height,a.height+a.top,o.height-a.top):o.height;u=Math.min(u,o.width),l=Math.min(l,o.height),d&&(u&&l?l*d>u?l=u/d:u=l*d:u?l=u/d:l&&(u=l*d),g*d>p?g=p/d:p=g*d),s.minWidth=Math.min(u,p),s.minHeight=Math.min(l,g),s.maxWidth=p,s.maxHeight=g}t&&(c?(s.minLeft=Math.max(0,a.left),s.minTop=Math.max(0,a.top),s.maxLeft=Math.min(o.width,a.left+a.width)-s.width,s.maxTop=Math.min(o.height,a.top+a.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=o.width-s.width,s.maxTop=o.height-s.height))},renderCropBox:function(){var r=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,r.movable&&r.cropBoxMovable&&ke(this.face,Re,i.width>=t.width&&i.height>=t.height?"move":"all"),le(this.cropBox,O({width:i.width,height:i.height},Oe({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),xe(this.element,ct,this.getData())}},In={initPreview:function(){var r=this.element,t=this.crossOrigin,i=this.options.preview,o=t?this.crossOriginUrl:this.url,a=r.alt||"The image to preview",s=document.createElement("img");if(t&&(s.crossOrigin=t),s.src=o,s.alt=a,this.viewBox.appendChild(s),this.viewBoxImage=s,i){var c=i;"string"==typeof i?c=r.ownerDocument.querySelectorAll(i):i.querySelector&&(c=[i]),this.previews=c,B(c,function(d){var u=document.createElement("img");ke(d,Ge,{width:d.offsetWidth,height:d.offsetHeight,html:d.innerHTML}),t&&(u.crossOrigin=t),u.src=o,u.alt=a,u.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',d.innerHTML="",d.appendChild(u)})}},resetPreview:function(){B(this.previews,function(r){var t=ft(r,Ge);le(r,{width:t.width,height:t.height}),r.innerHTML=t.html,function gn(n,r){if(fe(n[r]))try{delete n[r]}catch{n[r]=void 0}else if(n.dataset)try{delete n.dataset[r]}catch{n.dataset[r]=void 0}else n.removeAttribute("data-".concat(ht(r)))}(r,Ge)})},preview:function(){var r=this.imageData,t=this.canvasData,i=this.cropBoxData,o=i.width,a=i.height,s=r.width,c=r.height,d=i.left-t.left-r.left,u=i.top-t.top-r.top;!this.cropped||this.disabled||(le(this.viewBoxImage,O({width:s,height:c},Oe(O({translateX:-d,translateY:-u},r)))),B(this.previews,function(l){var p=ft(l,Ge),g=p.width,T=p.height,w=g,M=T,N=1;o&&(M=a*(N=g/o)),a&&M>T&&(w=o*(N=T/a),M=T),le(l,{width:w,height:M}),le(l.getElementsByTagName("img")[0],O({width:s*N,height:c*N},Oe(O({translateX:-d*N,translateY:-u*N},r))))}))}},Nn={bind:function(){var r=this.element,t=this.options,i=this.cropper;$(t.cropstart)&&Q(r,dt,t.cropstart),$(t.cropmove)&&Q(r,pt,t.cropmove),$(t.cropend)&&Q(r,lt,t.cropend),$(t.crop)&&Q(r,ct,t.crop),$(t.zoom)&&Q(r,ut,t.zoom),Q(i,oi,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&Q(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Q(i,ri,this.onDblclick=this.dblclick.bind(this)),Q(r.ownerDocument,ai,this.onCropMove=this.cropMove.bind(this)),Q(r.ownerDocument,si,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&Q(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var r=this.element,t=this.options,i=this.cropper;$(t.cropstart)&&J(r,dt,t.cropstart),$(t.cropmove)&&J(r,pt,t.cropmove),$(t.cropend)&&J(r,lt,t.cropend),$(t.crop)&&J(r,ct,t.crop),$(t.zoom)&&J(r,ut,t.zoom),J(i,oi,this.onCropStart),t.zoomable&&t.zoomOnWheel&&J(i,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&J(i,ri,this.onDblclick),J(r.ownerDocument,ai,this.onCropMove),J(r.ownerDocument,si,this.onCropEnd),t.responsive&&J(window,"resize",this.onResize)}},Ln={resize:function(){if(!this.disabled){var c,d,r=this.options,t=this.container,i=this.containerData,o=t.offsetWidth/i.width,a=t.offsetHeight/i.height,s=Math.abs(o-1)>Math.abs(a-1)?o:a;1!==s&&(r.restore&&(c=this.getCanvasData(),d=this.getCropBoxData()),this.render(),r.restore&&(this.setCanvasData(B(c,function(u,l){c[l]=u*s})),this.setCropBoxData(B(d,function(u,l){d[l]=u*s}))))}},dblclick:function(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function hn(n,r){return n.classList?n.classList.contains(r):n.className.indexOf(r)>-1}(this.dragBox,ot)?"move":st)},wheel:function(r){var t=this,i=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(r.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),r.deltaY?o=r.deltaY>0?1:-1:r.wheelDelta?o=-r.wheelDelta/120:r.detail&&(o=r.detail>0?1:-1),this.zoom(-o*i,r)))},cropStart:function(r){var t=r.buttons,i=r.button;if(!(this.disabled||("mousedown"===r.type||"pointerdown"===r.type&&"mouse"===r.pointerType)&&(A(t)&&1!==t||A(i)&&0!==i||r.ctrlKey))){var s,o=this.options,a=this.pointers;r.changedTouches?B(r.changedTouches,function(c){a[c.identifier]=qe(c)}):a[r.pointerId||0]=qe(r),s=Object.keys(a).length>1&&o.zoomable&&o.zoomOnTouch?"zoom":ft(r.target,Re),rn.test(s)&&!1!==xe(this.element,dt,{originalEvent:r,action:s})&&(r.preventDefault(),this.action=s,this.cropping=!1,"crop"===s&&(this.cropping=!0,U(this.dragBox,Ue)))}},cropMove:function(r){var t=this.action;if(!this.disabled&&t){var i=this.pointers;r.preventDefault(),!1!==xe(this.element,pt,{originalEvent:r,action:t})&&(r.changedTouches?B(r.changedTouches,function(o){O(i[o.identifier]||{},qe(o,!0))}):O(i[r.pointerId||0]||{},qe(r,!0)),this.change(r))}},cropEnd:function(r){if(!this.disabled){var t=this.action,i=this.pointers;r.changedTouches?B(r.changedTouches,function(o){delete i[o.identifier]}):delete i[r.pointerId||0],t&&(r.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,we(this.dragBox,Ue,this.cropped&&this.options.modal)),xe(this.element,lt,{originalEvent:r,action:t}))}}},Dn={change:function(r){var ae,i=this.canvasData,o=this.containerData,a=this.cropBoxData,s=this.pointers,c=this.action,d=this.options.aspectRatio,u=a.left,l=a.top,p=a.width,g=a.height,T=u+p,w=l+g,M=0,N=0,j=o.width,G=o.height,V=!0;!d&&r.shiftKey&&(d=p&&g?p/g:1),this.limited&&(N=a.minTop,j=(M=a.minLeft)+Math.min(o.width,i.width,i.left+i.width),G=N+Math.min(o.height,i.height,i.top+i.height));var X=s[Object.keys(s)[0]],v={x:X.endX-X.startX,y:X.endY-X.startY},L=function(K){switch(K){case"e":T+v.x>j&&(v.x=j-T);break;case"w":u+v.x<M&&(v.x=M-u);break;case ce:l+v.y<N&&(v.y=N-l);break;case"s":w+v.y>G&&(v.y=G-w)}};switch(c){case"all":u+=v.x,l+=v.y;break;case"e":if(v.x>=0&&(T>=j||d&&(l<=N||w>=G))){V=!1;break}L("e"),(p+=v.x)<0&&(c="w",u-=p=-p),d&&(l+=(a.height-(g=p/d))/2);break;case ce:if(v.y<=0&&(l<=N||d&&(u<=M||T>=j))){V=!1;break}L(ce),l+=v.y,(g-=v.y)<0&&(c="s",l-=g=-g),d&&(u+=(a.width-(p=g*d))/2);break;case"w":if(v.x<=0&&(u<=M||d&&(l<=N||w>=G))){V=!1;break}L("w"),u+=v.x,(p-=v.x)<0&&(c="e",u-=p=-p),d&&(l+=(a.height-(g=p/d))/2);break;case"s":if(v.y>=0&&(w>=G||d&&(u<=M||T>=j))){V=!1;break}L("s"),(g+=v.y)<0&&(c=ce,l-=g=-g),d&&(u+=(a.width-(p=g*d))/2);break;case Ne:if(d){if(v.y<=0&&(l<=N||T>=j)){V=!1;break}L(ce),l+=v.y,p=(g-=v.y)*d}else L(ce),L("e"),v.x>=0?T<j?p+=v.x:v.y<=0&&l<=N&&(V=!1):p+=v.x,v.y<=0?l>N&&(g-=v.y,l+=v.y):(g-=v.y,l+=v.y);p<0&&g<0?(c=Me,l-=g=-g,u-=p=-p):p<0?(c=Le,u-=p=-p):g<0&&(c=De,l-=g=-g);break;case Le:if(d){if(v.y<=0&&(l<=N||u<=M)){V=!1;break}L(ce),l+=v.y,u+=a.width-(p=(g-=v.y)*d)}else L(ce),L("w"),v.x<=0?u>M?(p-=v.x,u+=v.x):v.y<=0&&l<=N&&(V=!1):(p-=v.x,u+=v.x),v.y<=0?l>N&&(g-=v.y,l+=v.y):(g-=v.y,l+=v.y);p<0&&g<0?(c=De,l-=g=-g,u-=p=-p):p<0?(c=Ne,u-=p=-p):g<0&&(c=Me,l-=g=-g);break;case Me:if(d){if(v.x<=0&&(u<=M||w>=G)){V=!1;break}L("w"),u+=v.x,g=(p-=v.x)/d}else L("s"),L("w"),v.x<=0?u>M?(p-=v.x,u+=v.x):v.y>=0&&w>=G&&(V=!1):(p-=v.x,u+=v.x),v.y>=0?w<G&&(g+=v.y):g+=v.y;p<0&&g<0?(c=Ne,l-=g=-g,u-=p=-p):p<0?(c=De,u-=p=-p):g<0&&(c=Le,l-=g=-g);break;case De:if(d){if(v.x>=0&&(T>=j||w>=G)){V=!1;break}L("e"),g=(p+=v.x)/d}else L("s"),L("e"),v.x>=0?T<j?p+=v.x:v.y>=0&&w>=G&&(V=!1):p+=v.x,v.y>=0?w<G&&(g+=v.y):g+=v.y;p<0&&g<0?(c=Le,l-=g=-g,u-=p=-p):p<0?(c=Me,u-=p=-p):g<0&&(c=Ne,l-=g=-g);break;case"move":this.move(v.x,v.y),V=!1;break;case"zoom":this.zoom(function bn(n){var r=Je({},n),t=0;return B(n,function(i,o){delete r[o],B(r,function(a){var s=Math.abs(i.startX-a.startX),c=Math.abs(i.startY-a.startY),d=Math.abs(i.endX-a.endX),u=Math.abs(i.endY-a.endY),l=Math.sqrt(s*s+c*c),g=(Math.sqrt(d*d+u*u)-l)/l;Math.abs(g)>Math.abs(t)&&(t=g)})}),t}(s),r),V=!1;break;case"crop":if(!v.x||!v.y){V=!1;break}ae=yi(this.cropper),u=X.startX-ae.left,l=X.startY-ae.top,p=a.minWidth,g=a.minHeight,v.x>0?c=v.y>0?De:Ne:v.x<0&&(u-=p,c=v.y>0?Me:Le),v.y<0&&(l-=g),this.cropped||(te(this.cropBox,H),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}V&&(a.width=p,a.height=g,a.left=u,a.top=l,this.action=c,this.renderCropBox()),B(s,function(z){z.startX=z.endX,z.startY=z.endY})}},Mn={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&U(this.dragBox,Ue),te(this.cropBox,H),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=O({},this.initialImageData),this.canvasData=O({},this.initialCanvasData),this.cropBoxData=O({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(O(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),te(this.dragBox,Ue),U(this.cropBox,H)),this},replace:function(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&r&&(this.isImg&&(this.element.src=r),t?(this.url=r,this.image.src=r,this.ready&&(this.viewBoxImage.src=r,B(this.previews,function(i){i.getElementsByTagName("img")[0].src=r}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(r))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,te(this.cropper,ei)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,U(this.cropper,ei)),this},destroy:function(){var r=this.element;return r[k]?(r[k]=void 0,this.isImg&&this.replaced&&(r.src=this.originalUrl),this.uncreate(),this):this},move:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=this.canvasData,o=i.left,a=i.top;return this.moveTo(mt(r)?r:o+Number(r),mt(t)?t:a+Number(t))},moveTo:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=this.canvasData,o=!1;return r=Number(r),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(A(r)&&(i.left=r,o=!0),A(t)&&(i.top=t,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(r,t){var i=this.canvasData;return r=Number(r),this.zoomTo(i.width*(r=r<0?1/(1-r):1+r)/i.naturalWidth,null,t)},zoomTo:function(r,t,i){var o=this.options,a=this.canvasData,s=a.width,c=a.height,d=a.naturalWidth,u=a.naturalHeight;if((r=Number(r))>=0&&this.ready&&!this.disabled&&o.zoomable){var l=d*r,p=u*r;if(!1===xe(this.element,ut,{ratio:r,oldRatio:s/d,originalEvent:i}))return this;if(i){var g=this.pointers,T=yi(this.cropper),w=g&&Object.keys(g).length?function yn(n){var r=0,t=0,i=0;return B(n,function(o){r+=o.startX,t+=o.startY,i+=1}),{pageX:r/=i,pageY:t/=i}}(g):{pageX:i.pageX,pageY:i.pageY};a.left-=(w.pageX-T.left-a.left)/s*(l-s),a.top-=(w.pageY-T.top-a.top)/c*(p-c)}else Ce(t)&&A(t.x)&&A(t.y)?(a.left-=(t.x-a.left)/s*(l-s),a.top-=(t.y-a.top)/c*(p-c)):(a.left-=(l-s)/2,a.top-=(p-c)/2);a.width=l,a.height=p,this.renderCanvas(!0)}return this},rotate:function(r){return this.rotateTo((this.imageData.rotate||0)+Number(r))},rotateTo:function(r){return A(r=Number(r))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=r%360,this.renderCanvas(!0,!0)),this},scaleX:function(r){var t=this.imageData.scaleY;return this.scale(r,A(t)?t:1)},scaleY:function(r){var t=this.imageData.scaleX;return this.scale(A(t)?t:1,r)},scale:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=this.imageData,o=!1;return r=Number(r),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(A(r)&&(i.scaleX=r,o=!0),A(t)&&(i.scaleY=t,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var s,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.options,i=this.imageData,o=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){var c=i.width/i.naturalWidth;if(B(s={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height},function(l,p){s[p]=l/c}),r){var d=Math.round(s.y+s.height),u=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=u-s.x,s.height=d-s.y}}else s={x:0,y:0,width:0,height:0};return t.rotatable&&(s.rotate=i.rotate||0),t.scalable&&(s.scaleX=i.scaleX||1,s.scaleY=i.scaleY||1),s},setData:function(r){var t=this.options,i=this.imageData,o=this.canvasData,a={};if(this.ready&&!this.disabled&&Ce(r)){var s=!1;t.rotatable&&A(r.rotate)&&r.rotate!==i.rotate&&(i.rotate=r.rotate,s=!0),t.scalable&&(A(r.scaleX)&&r.scaleX!==i.scaleX&&(i.scaleX=r.scaleX,s=!0),A(r.scaleY)&&r.scaleY!==i.scaleY&&(i.scaleY=r.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var c=i.width/i.naturalWidth;A(r.x)&&(a.left=r.x*c+o.left),A(r.y)&&(a.top=r.y*c+o.top),A(r.width)&&(a.width=r.width*c),A(r.height)&&(a.height=r.height*c),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?O({},this.containerData):{}},getImageData:function(){return this.sized?O({},this.imageData):{}},getCanvasData:function(){var r=this.canvasData,t={};return this.ready&&B(["left","top","width","height","naturalWidth","naturalHeight"],function(i){t[i]=r[i]}),t},setCanvasData:function(r){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&Ce(r)&&(A(r.left)&&(t.left=r.left),A(r.top)&&(t.top=r.top),A(r.width)?(t.width=r.width,t.height=r.width/i):A(r.height)&&(t.height=r.height,t.width=r.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,r=this.cropBoxData;return this.ready&&this.cropped&&(t={left:r.left,top:r.top,width:r.width,height:r.height}),t||{}},setCropBoxData:function(r){var o,a,t=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&Ce(r)&&(A(r.left)&&(t.left=r.left),A(r.top)&&(t.top=r.top),A(r.width)&&r.width!==t.width&&(o=!0,t.width=r.width),A(r.height)&&r.height!==t.height&&(a=!0,t.height=r.height),i&&(o?t.height=t.width/i:a&&(t.width=t.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,i=function Cn(n,r,t,i){var o=r.aspectRatio,a=r.naturalWidth,s=r.naturalHeight,c=r.rotate,d=void 0===c?0:c,u=r.scaleX,l=void 0===u?1:u,p=r.scaleY,g=void 0===p?1:p,T=t.aspectRatio,w=t.naturalWidth,M=t.naturalHeight,N=i.fillColor,j=void 0===N?"transparent":N,G=i.imageSmoothingEnabled,V=void 0===G||G,ae=i.imageSmoothingQuality,X=void 0===ae?"low":ae,v=i.maxWidth,L=void 0===v?1/0:v,z=i.maxHeight,K=void 0===z?1/0:z,se=i.minWidth,ge=void 0===se?0:se,ve=i.minHeight,de=void 0===ve?0:ve,ne=document.createElement("canvas"),Y=ne.getContext("2d"),be=pe({aspectRatio:T,width:L,height:K}),Qe=pe({aspectRatio:T,width:ge,height:de},"cover"),Ht=Math.min(be.width,Math.max(Qe.width,w)),$t=Math.min(be.height,Math.max(Qe.height,M)),qi=pe({aspectRatio:o,width:L,height:K}),Wi=pe({aspectRatio:o,width:ge,height:de},"cover"),Hi=Math.min(qi.width,Math.max(Wi.width,a)),$i=Math.min(qi.height,Math.max(Wi.height,s)),so=[-Hi/2,-$i/2,Hi,$i];return ne.width=_e(Ht),ne.height=_e($t),Y.fillStyle=j,Y.fillRect(0,0,Ht,$t),Y.save(),Y.translate(Ht/2,$t/2),Y.rotate(d*Math.PI/180),Y.scale(l,g),Y.imageSmoothingEnabled=V,Y.imageSmoothingQuality=X,Y.drawImage.apply(Y,[n].concat(Qt(so.map(function(co){return Math.floor(_e(co))})))),Y.restore(),ne}(this.image,this.imageData,t,r);if(!this.cropped)return i;var o=this.getData(r.rounded),a=o.x,s=o.y,c=o.width,d=o.height,u=i.width/Math.floor(t.naturalWidth);1!==u&&(a*=u,s*=u,c*=u,d*=u);var l=c/d,p=pe({aspectRatio:l,width:r.maxWidth||1/0,height:r.maxHeight||1/0}),g=pe({aspectRatio:l,width:r.minWidth||0,height:r.minHeight||0},"cover"),T=pe({aspectRatio:l,width:r.width||(1!==u?i.width:c),height:r.height||(1!==u?i.height:d)}),w=T.width,M=T.height;w=Math.min(p.width,Math.max(g.width,w)),M=Math.min(p.height,Math.max(g.height,M));var N=document.createElement("canvas"),j=N.getContext("2d");N.width=_e(w),N.height=_e(M),j.fillStyle=r.fillColor||"transparent",j.fillRect(0,0,w,M);var G=r.imageSmoothingEnabled,ae=r.imageSmoothingQuality;j.imageSmoothingEnabled=void 0===G||G,ae&&(j.imageSmoothingQuality=ae);var K,se,ge,ve,de,ne,X=i.width,v=i.height,L=a,z=s;L<=-c||L>X?(L=0,K=0,ge=0,de=0):L<=0?(ge=-L,L=0,de=K=Math.min(X,c+L)):L<=X&&(ge=0,de=K=Math.min(c,X-L)),K<=0||z<=-d||z>v?(z=0,se=0,ve=0,ne=0):z<=0?(ve=-z,z=0,ne=se=Math.min(v,d+z)):z<=v&&(ve=0,ne=se=Math.min(d,v-z));var Y=[L,z,K,se];if(de>0&&ne>0){var be=w/c;Y.push(ge*be,ve*be,de*be,ne*be)}return j.drawImage.apply(j,[i].concat(Qt(Y.map(function(Qe){return Math.floor(_e(Qe))})))),N},setAspectRatio:function(r){var t=this.options;return!this.disabled&&!mt(r)&&(t.aspectRatio=Math.max(0,r)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(r){var t=this.options,i=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var a=r===st,s=t.movable&&"move"===r;t.dragMode=r=a||s?r:"none",ke(i,Re,r),we(i,ot,a),we(i,at,s),t.cropBoxMovable||(ke(o,Re,r),we(o,ot,a),we(o,at,s))}return this}},Rn=ee.Cropper,wi=function(){function n(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function R(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),!r||!sn.test(r.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=r,this.options=O({},hi,Ce(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function b(n,r,t){return r&&h(n.prototype,r),t&&h(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(n,[{key:"init",value:function(){var o,t=this.element,i=t.tagName.toLowerCase();if(!t[k]){if(t[k]=this,"img"===i){if(this.isImg=!0,o=t.getAttribute("src")||"",this.originalUrl=o,!o)return;o=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(o=t.toDataURL());this.load(o)}}},{key:"load",value:function(t){var i=this;if(t){this.url=t,this.imageData={};var o=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer)return void this.clone();if(on.test(t))return void(an.test(t)?this.read(function xn(n){var r=n.replace(wn,""),t=atob(r),i=new ArrayBuffer(t.length),o=new Uint8Array(i);return B(o,function(a,s){o[s]=t.charCodeAt(s)}),i}(t)):this.clone());var s=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=c,s.onerror=c,s.ontimeout=c,s.onprogress=function(){s.getResponseHeader("content-type")!==di&&s.abort()},s.onload=function(){i.read(s.response)},s.onloadend=function(){i.reloading=!1,i.xhr=null},a.checkCrossOrigin&&Si(t)&&o.crossOrigin&&(t=Ci(t)),s.open("GET",t,!0),s.responseType="arraybuffer",s.withCredentials="use-credentials"===o.crossOrigin,s.send()}}},{key:"read",value:function(t){var i=this.options,o=this.imageData,a=function Tn(n){var t,r=new DataView(n);try{var i,o,a;if(255===r.getUint8(0)&&216===r.getUint8(1))for(var s=r.byteLength,c=2;c+1<s;){if(255===r.getUint8(c)&&225===r.getUint8(c+1)){o=c;break}c+=1}if(o){var u=o+10;if("Exif"===function _n(n,r,t){var i="";t+=r;for(var o=r;o<t;o+=1)i+=_i(n.getUint8(o));return i}(r,o+4,4)){var l=r.getUint16(u);if(((i=18761===l)||19789===l)&&42===r.getUint16(u+2,i)){var p=r.getUint32(u+4,i);p>=8&&(a=u+p)}}}if(a){var T,w,g=r.getUint16(a,i);for(w=0;w<g;w+=1)if(274===r.getUint16(T=a+12*w+2,i)){t=r.getUint16(T+=8,i),r.setUint16(T,1,i);break}}}catch{t=1}return t}(t),s=0,c=1,d=1;if(a>1){this.url=function An(n,r){for(var t=[],o=new Uint8Array(n);o.length>0;)t.push(_i.apply(null,gi(o.subarray(0,8192)))),o=o.subarray(8192);return"data:".concat(r,";base64,").concat(btoa(t.join("")))}(t,di);var u=function En(n){var r=0,t=1,i=1;switch(n){case 2:t=-1;break;case 3:r=-180;break;case 4:i=-1;break;case 5:r=90,i=-1;break;case 6:r=90;break;case 7:r=90,t=-1;break;case 8:r=-90}return{rotate:r,scaleX:t,scaleY:i}}(a);s=u.rotate,c=u.scaleX,d=u.scaleY}i.rotatable&&(o.rotate=s),i.scalable&&(o.scaleX=c,o.scaleY=d),this.clone()}},{key:"clone",value:function(){var t=this.element,i=this.url,o=t.crossOrigin,a=i;this.options.checkCrossOrigin&&Si(i)&&(o||(o="anonymous"),a=Ci(i)),this.crossOrigin=o,this.crossOriginUrl=a;var s=document.createElement("img");o&&(s.crossOrigin=o),s.src=a||i,s.alt=t.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),U(s,ti),t.parentNode.insertBefore(s,t.nextSibling)}},{key:"start",value:function(){var t=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var o=ee.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ee.navigator.userAgent),a=function(u,l){O(t.imageData,{naturalWidth:u,naturalHeight:l,aspectRatio:u/l}),t.initialImageData=O({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!i.naturalWidth||o){var s=document.createElement("img"),c=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){a(s.width,s.height),o||c.removeChild(s)},s.src=i.src,o||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",c.appendChild(s))}else a(i.naturalWidth,i.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,i=this.options,o=this.image,a=t.parentNode,s=document.createElement("div");s.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var c=s.querySelector(".".concat(k,"-container")),d=c.querySelector(".".concat(k,"-canvas")),u=c.querySelector(".".concat(k,"-drag-box")),l=c.querySelector(".".concat(k,"-crop-box")),p=l.querySelector(".".concat(k,"-face"));this.container=a,this.cropper=c,this.canvas=d,this.dragBox=u,this.cropBox=l,this.viewBox=c.querySelector(".".concat(k,"-view-box")),this.face=p,d.appendChild(o),U(t,H),a.insertBefore(c,t.nextSibling),te(o,ti),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,U(l,H),i.guides||U(l.getElementsByClassName("".concat(k,"-dashed")),H),i.center||U(l.getElementsByClassName("".concat(k,"-center")),H),i.background&&U(c,"".concat(k,"-bg")),i.highlight||U(p,Ji),i.cropBoxMovable&&(U(p,at),ke(p,Re,"all")),i.cropBoxResizable||(U(l.getElementsByClassName("".concat(k,"-line")),H),U(l.getElementsByClassName("".concat(k,"-point")),H)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),$(i.ready)&&Q(t,"ready",i.ready,{once:!0}),xe(t,"ready")}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),te(this.element,H)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Rn,n}},{key:"setDefaults",value:function(t){O(hi,Ce(t)&&t)}}])}();O(wi.prototype,Pn,In,Nn,Ln,Dn,Mn);var vt=P(27823),kn=P(60871);const On=["qrcElement"];let Fn=(()=>{class n{constructor(t,i){this.renderer=t,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new e.EventEmitter,this.context=null}ngOnChanges(){var t=this;return(0,W.Z)(function*(){yield t.createQRCode()})()}isValidQrCodeText(t){return!1===this.allowEmptyString?!(typeof t>"u"||""===t||"null"===t||null===t):!(typeof t>"u")}toDataURL(t){return new Promise((i,o)=>{(0,vt.toDataURL)(this.qrdata,t,(a,s)=>{a?o(a):i(s)})})}toCanvas(t,i){return new Promise((o,a)=>{(0,vt.toCanvas)(t,this.qrdata,i,s=>{s?a(s):o("success")})})}toSVG(t){return new Promise((i,o)=>{(0,vt.toString)(this.qrdata,t,(a,s)=>{a?o(a):i(s)})})}renderElement(t){for(const i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){var t=this;return(0,W.Z)(function*(){t.version&&t.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),t.version=40):t.version&&t.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),t.version=1):void 0!==t.version&&isNaN(t.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),t.version=void 0);try{if(!t.isValidQrCodeText(t.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");t.isValidQrCodeText(t.qrdata)&&""===t.qrdata&&(t.qrdata=" ");const i={color:{dark:t.colorDark,light:t.colorLight},errorCorrectionLevel:t.errorCorrectionLevel,margin:t.margin,scale:t.scale,version:t.version,width:t.width},o=t.imageSrc,a=t.imageHeight||40,s=t.imageWidth||40;switch(t.elementType){case"canvas":{const c=t.renderer.createElement("canvas");t.context=c.getContext("2d"),t.toCanvas(c,i).then(()=>{if(t.ariaLabel&&t.renderer.setAttribute(c,"aria-label",`${t.ariaLabel}`),t.title&&t.renderer.setAttribute(c,"title",`${t.title}`),o&&t.context){t.centerImage=new Image(s,a),o!==t.centerImage.src&&(t.centerImage.src=o),a!==t.centerImage.height&&(t.centerImage.height=a),s!==t.centerImage.width&&(t.centerImage.width=s);const d=t.centerImage;d&&(d.onload=()=>{t.context?.drawImage(d,c.width/2-s/2,c.height/2-a/2,s,a)})}t.renderElement(c),t.emitQRCodeURL(c)}).catch(d=>{console.error("[angularx-qrcode] canvas error:",d)});break}case"svg":{const c=t.renderer.createElement("div");t.toSVG(i).then(d=>{t.renderer.setProperty(c,"innerHTML",d);const u=c.firstChild;t.renderer.setAttribute(u,"height",`${t.width}`),t.renderer.setAttribute(u,"width",`${t.width}`),t.renderElement(u),t.emitQRCodeURL(u)}).catch(d=>{console.error("[angularx-qrcode] svg error:",d)});break}default:{const c=t.renderer.createElement("img");t.toDataURL(i).then(d=>{t.alt&&c.setAttribute("alt",t.alt),t.ariaLabel&&c.setAttribute("aria-label",t.ariaLabel),c.setAttribute("src",d),t.title&&c.setAttribute("title",t.title),t.renderElement(c),t.emitQRCodeURL(c)}).catch(d=>{console.error("[angularx-qrcode] img/url error:",d)})}}}catch(i){console.error("[angularx-qrcode] Error generating QR Code:",i.message)}})()}emitQRCodeURL(t){const i=t.constructor.name;if(i===SVGSVGElement.name){const s=new Blob([t.outerHTML],{type:"image/svg+xml"}),c=URL.createObjectURL(s),d=this.sanitizer.bypassSecurityTrustUrl(c);return void this.qrCodeURL.emit(d)}let o="";i===HTMLCanvasElement.name&&(o=t.toDataURL("image/png")),i===HTMLImageElement.name&&(o=t.src),fetch(o).then(a=>a.blob()).then(a=>URL.createObjectURL(a)).then(a=>this.sanitizer.bypassSecurityTrustUrl(a)).then(a=>{this.qrCodeURL.emit(a)}).catch(a=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+a)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(kn.DomSanitizer))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["qrcode"]],viewQuery:function(i,o){if(1&i&&e.\u0275\u0275viewQuery(On,7),2&i){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.qrcElement=a.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,o){1&i&&e.\u0275\u0275element(0,"div",null,0),2&i&&e.\u0275\u0275classMap(o.cssClass)},encapsulation:2,changeDetection:0})}return n})(),Bn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#i=this.\u0275inj=e.\u0275\u0275defineInjector({})}return n})();function Vn(n,r){1&n&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AbpAccount::YourEmailAddressIsSuccessfullyConfirmed")," "))}function jn(n,r){1&n&&(e.\u0275\u0275elementStart(0,"p",3),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AbpUi::ValidationErrorMessage")," "))}const zn=function(){return["/account/login"]};function Un(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",2),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementStart(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3)(5,"div",4),e.\u0275\u0275element(6,"input",5),e.\u0275\u0275elementStart(7,"label",6),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",7)(11,"a",8),e.\u0275\u0275element(12,"i",9),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"abp-button",10),e.\u0275\u0275element(16,"i",11),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,7,"AbpAccount::SendPasswordResetLink_Information")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,9,"AbpAccount::EmailAddress")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,11,"AbpAccount::Login")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("loading",t.inProgress)("disabled",null==t.form?null:t.form.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(18,13,"AbpAccount::Submit")," ")}}function Gn(n,r){1&n&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",12)(4,"button",13),e.\u0275\u0275element(5,"i",14),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"AbpAccount::PasswordResetMailSentMessage")," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,4,"AbpAccount::BackToLogin")," "))}const xi=["recaptcha"];function qn(n,r){1&n&&(e.\u0275\u0275element(0,"div",21),e.\u0275\u0275pipe(1,"abpLocalization")),2&n&&e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(1,1,"AbpAccount::LinkAccountWarning","/account/login"),e.\u0275\u0275sanitizeHtml)}function Wn(n,r){1&n&&(e.\u0275\u0275elementStart(0,"h5",22),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"a",23),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"AbpAccount::NotAMemberYet")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"AbpAccount::Register")," "))}const Hn=function(n){return{active:n}};function $n(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.selected=o)}),e.\u0275\u0275elementStart(1,"a",12),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,Hn,(null==i.selected?null:i.selected.name)===t.name)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,2,t.name)," ")}}function Yn(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,$n,4,6,"li",10),e.\u0275\u0275elementContainerEnd()),2&n){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("abpPermission",t.requiredPolicy)}}function Xn(n,r){1&n&&e.\u0275\u0275elementContainer(0)}function Qn(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"hr",15),e.\u0275\u0275template(6,Xn,1,0,"ng-container",16),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("@fadeIn",void 0)("id",t.selected.name+"-tab"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,4,t.selected.name)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngComponentOutlet",t.selected.component)}}function Kn(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",5)(2,"ul",6),e.\u0275\u0275template(3,Yn,2,1,"ng-container",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",8),e.\u0275\u0275template(5,Qn,7,6,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=r.ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t)("ngForTrackBy",i.track.by("name")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.isProfileLoaded&&t.length&&i.selected)}}function Zn(n,r){1&n&&e.\u0275\u0275element(0,"div",17),2&n&&e.\u0275\u0275property("abpLoading",!0)}const Jn=function(){return{standalone:!0}};function er(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",3),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementStart(1,"div",4),e.\u0275\u0275element(2,"input",5),e.\u0275\u0275elementStart(3,"label",6),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275element(7,"input",7),e.\u0275\u0275elementStart(8,"label",8),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",4)(12,"input",9),e.\u0275\u0275listener("abpCapsLock",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.capsLock=o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"label",10),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"i",11),e.\u0275\u0275pipe(17,"abpLocalization"),e.\u0275\u0275elementStart(18,"i",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.showPassword=!o.showPassword)}),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(20,"div",null,13),e.\u0275\u0275elementStart(22,"div",14)(23,"div",15)(24,"abp-button",16),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"abpLocalization"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,14,"AbpAccount::UserName")," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,16,"AbpAccount::EmailAddress")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("abpShowPassword",t.showPassword),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(15,18,"AbpAccount::Password")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("d-none",!t.capsLock),e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(17,20,"AbpAccount::CapsLockOn")),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("bi bi-eye",t.showPassword?"":"-slash"," show-pass-icon"),e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(19,22,"AbpAccount::"+(t.showPassword?"HidePassword":"ShowPassword"))),e.\u0275\u0275advance(6),e.\u0275\u0275property("loading",t.inProgress),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,24,"AbpAccount::Register")," ")}}function tr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",2),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementStart(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3)(5,"label",4),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275text(9," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"input",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",3)(12,"label",6),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"span"),e.\u0275\u0275text(16," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"button",8),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"abp-button",9),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"abpLocalization"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form)("mapErrorsFn",t.mapErrorsFn),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,8,"AbpAccount::ResetPassword_Information")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,10,"AbpAccount::Password")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,12,"AbpAccount::ConfirmPassword")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,14,"AbpAccount::Cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("loading",t.inProgress),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(23,16,"AbpAccount::Submit")," ")}}function ir(n,r){1&n&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",10)(4,"button",11),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"AbpAccount::YourPasswordIsSuccessfullyReset")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,4,"AbpAccount::BackToLogin")," "))}function nr(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"option",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=r.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function rr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form")(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2)(5,"label",3),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"select",4),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.selectedProvider=o)}),e.\u0275\u0275template(9,nr,2,2,"option",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"abp-button",6),e.\u0275\u0275listener("abpClick",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.sendTwoFactorCode())}),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,"AbpAccount::SendSecurityCode_Information")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,8,"AbpAccount::SelectedProvider")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.selectedProvider),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.providers),e.\u0275\u0275advance(1),e.\u0275\u0275property("loading",t.loading),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,10,"AbpAccount::Submit")," ")}}const or=function(){return["/account/login-with-recovery-code"]};function ar(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",8),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.login())}),e.\u0275\u0275elementStart(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2)(5,"label",9),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"abp-button",11),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",12)(13,"p")(14,"a",13),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.codeForm),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,7,"AbpAccount::VerifySecurityCode_Information")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,9,"AbpAccount::Code")),e.\u0275\u0275advance(3),e.\u0275\u0275property("loading",t.loading),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,11,"AbpAccount::Submit")," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(15,or)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(16,13,"AbpAccount::LoginWithRecoveryCode_URL"),". ")}}function sr(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275element(1,"i",5),e.\u0275\u0275elementStart(2,"span",6),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,1,t.verifiedLabel||"AbpAccount::Verified"))}}function cr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.onBtnClick())}),e.\u0275\u0275element(1,"i",8),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,t.buttonLabel||"AbpAccount::Verify")," ")}}function lr(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,sr,5,3,"span",2),e.\u0275\u0275template(2,cr,4,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.verified)("ngIfElse",t)}}function pr(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275element(2,"i",10),e.\u0275\u0275elementStart(3,"span",11),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(1,2,t.editedTooltip||"AbpAccount::FirstlySubmitToVerify")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,t.editedLabel||"AbpAccount::NotVerified")," ")}}function dr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"abp-personal-settings-verify-button",6),e.\u0275\u0275listener("btnClick",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.sendEmailVerificationToken())}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("verified",t.isVerified)("edited",e.\u0275\u0275pipeBind1(2,2,t.isValueChanged$))}}function ur(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"abp-personal-settings-verify-button",10),e.\u0275\u0275listener("btnClick",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.initPhoneNumberConfirmation())}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("verified",t.isVerified)("edited",e.\u0275\u0275pipeBind1(2,2,t.isValueChanged$))}}function mr(n,r){1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"AbpAccount::Verify")))}function hr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",11),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.confirmPhoneNumber())}),e.\u0275\u0275elementStart(1,"div",12)(2,"p"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",0)(6,"label",13),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",14),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.token=o)}),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(4,3,"AbpAccount::ConfirmationTokenSentMessage",t.formControl.value)," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,6,"AbpAccount::PhoneConfirmationToken")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.token)}}function fr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"abp-button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.confirmPhoneNumber())}),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"AbpAccount::Cancel")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"AbpAccount::Save")," "))}const gr=function(){return{size:"sm"}};function vr(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",2)(1,"label",8),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"abp-password",9),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"AbpIdentity::DisplayName:CurrentPassword")))}function br(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275element(1,"abp-extensible-form",2),e.\u0275\u0275elementStart(2,"abp-button",3),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("selectedRecord",t.storedProfile),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",null==t.form?null:t.form.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,"AbpIdentity::Save"),"")}}const yr=["uploadFile"],Sr=["selectedImgRef"],Cr=["preview"];function _r(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",23),e.\u0275\u0275element(2,"img",24,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",26),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",27)(8,"ul",28)(9,"li",29),e.\u0275\u0275element(10,"img",30,31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"li",32),e.\u0275\u0275element(13,"img",33,31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"li",34),e.\u0275\u0275element(16,"img",35,31),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("src",t.selectedImage,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,2,"AbpAccount::MoveCursorOnExamples")," ")}}function wr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"div",3)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4)(6,"label",19),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",20,21),e.\u0275\u0275listener("change",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onSelectImage(o.target.files[0]))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,_r,18,4,"ng-container",22),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,"AbpAccount::ChangeProfilePicture")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,5,"AbpAccount::SelectNewImage")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.selectedImage)}}function xr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br")(8,"img",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"div",2)(12,"div",3)(13,"div",7)(14,"input",8),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.profilePictureType=o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"label",9),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",7)(19,"input",10),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.profilePictureType=o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"label",11),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"small",12),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",7)(27,"input",13),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.profilePictureType=o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"label",14),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"abpLocalization"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(31,wr,12,7,"div",15),e.\u0275\u0275elementStart(32,"div",16)(33,"div",3)(34,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();let i;e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,15,"AbpAccount::CurrentProfilePicture")),e.\u0275\u0275advance(3),e.\u0275\u0275property("src",null==(i=e.\u0275\u0275pipeBind1(9,17,t.profilePicture$))?null:i.source,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(6),e.\u0275\u0275property("value",0)("ngModel",t.profilePictureType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(17,19,"AbpAccount::UseDefault")),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",1)("ngModel",t.profilePictureType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(22,21,"AbpAccount::DisplayName:UseGravatar")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(25,23,"AbpAccount::Description:UseGravatar")),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",2)("ngModel",t.profilePictureType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(30,25,"AbpAccount::UploadFile")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",2===t.profilePictureType),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.inProgress||2===t.profilePictureType&&!t.selectedImage),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(36,27,"AbpAccount::SaveChanges")," ")}}function Ar(n,r){if(1&n&&e.\u0275\u0275element(0,"div",36),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("abpLoading",!t.profileLoaded)}}function Tr(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",2)(2,"div",3),e.\u0275\u0275element(3,"input",4),e.\u0275\u0275elementStart(4,"label",5),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"span",6),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,3,"AbpAccount::DisplayName:TwoFactorEnabled")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,5,"AbpAccount::TwoFactorEnabledInfo"))}}function Er(n,r){1&n&&e.\u0275\u0275element(0,"div",7),2&n&&e.\u0275\u0275property("abpLoading",!0)}function Pr(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"qrcode",2),e.\u0275\u0275elementContainerEnd()),2&n){const t=r.ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("qrdata",t)("width",i.width||256)("errorCorrectionLevel",i.errorCorrectionLevel||"M")}}function Ir(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275element(1,"i",4),e.\u0275\u0275elementEnd())}function Nr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",19)(2,"div",20)(3,"div",21)(4,"h5"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",22),e.\u0275\u0275element(8,"abp-qr-code",23),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",24)(10,"div",25)(11,"span",26),e.\u0275\u0275text(12,"Or"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"div",19)(14,"div",20)(15,"div",21)(16,"h5"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",27)(20,"code",28),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(o.copySharedKey())}),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"abpLocalization"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=r.ngIf;e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,"AbpAccount::UseQrCode")),e.\u0275\u0275advance(3),e.\u0275\u0275property("qrData",t.uri),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,7,"AbpAccount::ManuallyEnterCode")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.key),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,9,"AbpAccount::CopyToClipboard")," ")}}function Lr(n,r){1&n&&e.\u0275\u0275elementContainer(0)}const Dr=function(){return{$implicit:"VerifyTheAuthenticator"}};function Mr(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",12)(1,"h4",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p",14),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",15)(8,"div",16),e.\u0275\u0275template(9,Nr,25,11,"ng-container",0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",17),e.\u0275\u0275template(11,Lr,1,0,"ng-container",18),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2),i=e.\u0275\u0275reference(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,5,"AbpAccount::Authenticator")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,7,"AbpAccount::UseTwoFactorAuthenticatorApp_Information")," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.authenticatorInfo()),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(9,Dr))}}function Rr(n,r){1&n&&e.\u0275\u0275elementContainer(0)}const kr=function(n){return{$implicit:"RecoveryCodes",disabled:n}};function Or(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30)(1,"h4",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p",14),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",31)(8,"div",19)(9,"abp-form-input",32),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.verifyCode=o)}),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",19)(12,"abp-button",33),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.verifyQrCode())}),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",17),e.\u0275\u0275template(16,Rr,1,0,"ng-container",18),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2),i=e.\u0275\u0275reference(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,10,"AbpAccount::VerifyTheAuthenticator")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,12,"AbpAccount::UseTwoFactorAuthenticatorApp_Code")," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("inputId","code")("ngModel",t.verifyCode)("label",e.\u0275\u0275pipeBind1(10,14,"AbpAccount::Code")),e.\u0275\u0275advance(3),e.\u0275\u0275property("id","verifyQRCode")("buttonClass","btn btn-outline-success mt-3"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.isVerifiedAuthenticatorCode()?"Verified":e.\u0275\u0275pipeBind1(14,16,"AbpAccount::Verify")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(18,kr,!t.isVerifiedAuthenticatorCode()))}}function Fr(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"code"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"br"),e.\u0275\u0275elementContainerEnd()),2&n){const t=r.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function Br(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"h4",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p",14),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"ul",35)(8,"li",36)(9,"div",37)(10,"div",38)(11,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.printRecoverCodes())}),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.copyRecoveryCodes())}),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",41)(18,"div",42),e.\u0275\u0275template(19,Fr,4,1,"ng-container",43),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",38)(21,"abp-button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.recoveryCodeOk())}),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"abpLocalization"),e.\u0275\u0275elementEnd()()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,13,"AbpAccount::RecoveryCodes")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,15,"AbpAccount::RecoveryCodes_Information")," "),e.\u0275\u0275advance(6),e.\u0275\u0275classProp("disabled",!t.hasRecoveryCodes()),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,17,"AbpAccount::PrintCodes")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("disabled",!t.hasRecoveryCodes()),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(16,19,"AbpAccount::CopyToClipboard")," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.recoveryCodeList()),e.\u0275\u0275advance(2),e.\u0275\u0275property("id","recoveryCodeOk")("disabled",!t.hasRecoveryCodes())("buttonClass","btn btn-primary mt-2"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(23,21,"AbpAccount::Done")," ")}}function Vr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ul",2,3),e.\u0275\u0275listener("activeIdChange",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.activeStep=o)}),e.\u0275\u0275elementStart(3,"li",4)(4,"button",5)(5,"small",6),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p",7),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,Mr,12,10,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"li",4)(13,"button",5)(14,"small",6),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"p",7),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(20,Or,17,20,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"li",9)(22,"button",5)(23,"small",6),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"p",7),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,Br,24,23,"ng-template",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",10),e.\u0275\u0275element(31,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(2),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("activeId",i.activeStep),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngbNavItem","Authenticator"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(7,14,"AbpAccount::Step","1")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,17,"AbpAccount::Authenticator")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngbNavItem","VerifyTheAuthenticator"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(16,19,"AbpAccount::Step","2")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,22,"AbpAccount::VerifyTheAuthenticator")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngbNavItem","RecoveryCodes")("classList","recovery-codes-tab")("disabled",!i.isVerifiedAuthenticatorCode()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(25,24,"AbpAccount::Step","3")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(28,27,"AbpAccount::RecoveryCodes")),e.\u0275\u0275advance(3),e.\u0275\u0275property("id",i.activeStep),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngbNavOutlet",t)}}function jr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",45)(2,"div",46)(3,"h4",13),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"p",14),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"abp-button",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.resetAuthenticator())}),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,3,"AbpAccount::ResetAuthenticator")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,5,"AbpAccount::ResetAuthenticator_Information")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,7,"AbpAccount::ResetAuthenticator")," "))}function zr(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",48),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.activeStep=a)}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275element(3,"i",49),e.\u0275\u0275elementEnd()}if(2&n){const t=r.$implicit;e.\u0275\u0275classProp("disabled",r.disabled),e.\u0275\u0275propertyInterpolate1("id","next-btn-",t,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,"AbpAccount::NextStep")," ")}}class Ai{encodeKey(r){return encodeURIComponent(r)}encodeValue(r){return encodeURIComponent(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}}let ie=(()=>{class n{getMySecurityLogsByInput(t={}){return this.restService.request({url:"/api/identity/security-logs/my",method:"GET",params:t},{apiName:this.apiName})}constructor(t){this.restService=t,this.apiName="AbpAccountPublic",this.confirmEmail=i=>this.restService.request({method:"POST",url:"/api/account/confirm-email",body:i},{apiName:this.apiName}),this.confirmPhoneNumber=i=>this.restService.request({method:"POST",url:"/api/account/confirm-phone-number",body:i},{apiName:this.apiName}),this.getProfilePicture=i=>this.restService.request({method:"GET",url:`/api/account/profile-picture/${i}`},{apiName:this.apiName}),this.getProfilePictureFile=i=>this.restService.request({method:"GET",url:`/api/account/profile-picture-file/${i}`},{apiName:this.apiName}),this.register=i=>this.restService.request({method:"POST",url:"/api/account/register",body:i},{apiName:this.apiName}),this.resetPassword=i=>this.restService.request({method:"POST",url:"/api/account/reset-password",body:i},{apiName:this.apiName}),this.sendEmailConfirmationToken=i=>this.restService.request({method:"POST",url:"/api/account/send-email-confirmation-token",body:i},{apiName:this.apiName}),this.sendPasswordResetCode=i=>this.restService.request({method:"POST",url:"/api/account/send-password-reset-code",body:i},{apiName:this.apiName}),this.sendPhoneNumberConfirmationToken=i=>this.restService.request({method:"POST",url:"/api/account/send-phone-number-confirmation-token",body:i},{apiName:this.apiName}),this.setProfilePicture=i=>this.restService.request({method:"POST",url:"/api/account/profile-picture",body:i},{apiName:this.apiName}),this.uploadProfilePictureFile=i=>this.restService.request({method:"POST",url:"/api/account/profile-picture-file"},{apiName:this.apiName}),this.recaptchaByCaptchaResponse=i=>this.restService.request({method:"GET",url:"/api/account/recaptcha-validate",params:{captchaResponse:i}},{apiName:this.apiName}),this.getTwoFactorProviders=i=>this.restService.request({url:"/api/account/two-factor-providers",method:"GET",params:i},{apiName:this.apiName,httpParamEncoder:new Ai}),this.sendTwoFactorCode=i=>this.restService.request({url:"/api/account/send-two-factor-code",method:"POST",body:i},{apiName:this.apiName})}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(f.RestService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bt=(()=>{class n{constructor(t,i,o){this.multiTenancy=t,this.accountService=i,this.route=o,this.resetTenantBox=()=>{}}ngOnInit(){const{isTenantBoxVisible:t}=this.multiTenancy;this.resetTenantBox=()=>this.multiTenancy.isTenantBoxVisible=t,setTimeout(()=>this.multiTenancy.isTenantBoxVisible=!1,0),this.confirmation()}ngOnDestroy(){this.resetTenantBox()}confirmation(){const{userId:t,confirmationToken:i}=this.route.snapshot.queryParams;t&&i?this.accountService.confirmEmail({userId:t,token:i}).subscribe(()=>this.confirmed=!0):this.notValid=!0}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(f.MultiTenancyService),e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(D.ActivatedRoute))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-email-confirmation"]],decls:5,vars:7,consts:[[4,"ngIf"],["class","text-danger font-weight-bold",4,"ngIf"],["role","button",1,"btn","btn-primary",3,"routerLink"],[1,"text-danger","font-weight-bold"]],template:function(i,o){1&i&&(e.\u0275\u0275template(0,Vn,3,3,"p",0),e.\u0275\u0275template(1,jn,3,3,"p",1),e.\u0275\u0275elementStart(2,"a",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275property("ngIf",o.confirmed),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.notValid),e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(6,zn)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,4,"AbpAccount::Login")))},dependencies:[E.NgIf,D.RouterLink,f.LocalizationPipe],encapsulation:2})}return n})();const{required:Ur,email:Gr}=m.Validators;let yt=(()=>{class n{constructor(t,i){this.fb=t,this.accountService=i,this.isEmailSent=!1,this.form=this.fb.group({email:["",[Ur,Gr]]})}onSubmit(){this.form.invalid||(this.inProgress=!0,this.accountService.sendPasswordResetCode({email:this.form.get("email").value,appName:"Angular"}).pipe((0,C.finalize)(()=>this.inProgress=!1)).subscribe(()=>{this.isEmailSent=!0}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(m.UntypedFormBuilder),e.\u0275\u0275directiveInject(ie))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-forgot-password"]],decls:3,vars:2,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["emailSentTemplate",""],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-floating","mb-3"],["autofocus","","type","email","id","email","formControlName","email","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],[1,"d-flex","gap-2"],["routerLink","/account/login",1,"btn","btn-outline-primary","btn-lg","text-nowrap"],[1,"bi","bi-arrow-left-short"],["buttonClass","btn btn-primary btn-lg text-nowrap w-100","buttonType","submit",1,"flex-fill",3,"loading","disabled"],[1,"bi","bi-send","me-1"],["routerLink","/account/login",1,"d-grid"],[1,"d-block","mt-2","mb-3","btn","btn-primary"],["aria-hidden","true",1,"fa","fa-long-arrow-left","me-1"]],template:function(i,o){if(1&i&&(e.\u0275\u0275template(0,Un,19,15,"form",0),e.\u0275\u0275template(1,Gn,8,6,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.isEmailSent)("ngIfElse",a)}},dependencies:[E.NgIf,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,D.RouterLink,f.AutofocusDirective,f.FormSubmitDirective,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent,f.LocalizationPipe],encapsulation:2})}return n})();const We=new e.InjectionToken("ACCOUNT_CONFIG_OPTIONS");function He(n){const r=n.get(D.ActivatedRoute),t=n.get(We);return r.snapshot.queryParams.returnUrl||t.redirectUrl}let St=(()=>{class n{get linkUser(){const{linkUserId:t,linkTenantId:i,linkUserName:o,linkTenantName:a}=this.route.snapshot.queryParams;return{linkUserId:t,linkTenantId:i,linkUserName:o,linkTenantName:a}}constructor(t,i,o,a){this.injector=t,this.router=i,this.route=o,this.identityLinkUserService=a,this.tenantAndUserName=""}ngOnInit(){this.init()}init(){const{linkUserId:t,linkTenantId:i,linkUserName:o,linkTenantName:a}=this.linkUser;t?(this.identityLinkUserService.isLinked({tenantId:i,userId:t}).subscribe(s=>{s||this.navigateToLogin()}),this.tenantAndUserName=i?`${a}\\${o}`:o):this.navigateToLogin()}navigateToLogin(){this.router.navigateByUrl("/account/login")}navigateToMainPage(t){this.router.navigate([He(this.injector)||"/"],{queryParams:t})}navigateToMainPageForLinkLogin(){const{linkUserId:t,linkTenantId:i}=this.linkUser;this.navigateToMainPage({handler:"linkLogin",linkUserId:t,linkTenantId:i})}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(D.Router),e.\u0275\u0275directiveInject(D.ActivatedRoute),e.\u0275\u0275directiveInject(Z.K))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-link-logged"]],decls:11,vars:7,consts:[[1,"d-grid"],["type","button",1,"btn","btn-primary","mb-3",3,"click"],[1,"ms-1"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"me-1"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"button",1),e.\u0275\u0275listener("click",function(){return o.navigateToMainPage()}),e.\u0275\u0275text(2," \u2190 "),e.\u0275\u0275elementStart(3,"span",2),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return o.navigateToMainPageForLinkLogin()}),e.\u0275\u0275elementStart(7,"span",4),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10," \u2192 "),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,2,"AbpAccount::StayWithCurrentAccount")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(9,4,"AbpAccount::ReturnToPreviousAccount",o.tenantAndUserName)))},dependencies:[f.LocalizationPipe],encapsulation:2})}return n})();class Ct{constructor(r,t){this.configState=r,this.targetElement=t}setIsEnabled(){this.isEnabled="true"===(this.configState.getSetting(this.settingKey)||"").toLowerCase()}}class Ti extends Ct{constructor(r,t){super(r,t),this.action="login",this.settingKey="Abp.Account.Captcha.UseCaptchaOnLogin",this.setIsEnabled()}}class Ei extends Ct{constructor(r,t){super(r,t),this.action="register",this.settingKey="Abp.Account.Captcha.UseCaptchaOnRegistration",this.setIsEnabled()}}const _t={Login:(n,r)=>new Ti(n,r),Register:(n,r)=>new Ei(n,r)};class wt{get cultureName(){return this.configState.getAll().localization.currentCulture.cultureName}get siteKey(){return this.configState.getSetting("Abp.Account.Captcha.SiteKey")}get verifyBaseUrl(){return this.configState.getSetting("Abp.Account.Captcha.VerifyBaseUrl")}constructor(r){this.injector=r,this.lazyLoadService=r.get(f.LazyLoadService),this.configState=r.get(f.ConfigStateService),this.appendScript()}appendScript(){this.lazyLoadService.load(f.LOADING_STRATEGY.AppendScriptToBody(this.scriptPath)).subscribe()}destroy(){this.scriptPath&&this.lazyLoadService.remove(this.scriptPath)}reset(){}}class Pi extends wt{constructor(r,t){super(r),this.zone=this.injector.get(e.NgZone),this.token=new _.BehaviorSubject(null),this.targetElement=t}appendScript(){window.recaptchaV2Loaded=()=>{grecaptcha.render(this.targetElement,{sitekey:this.siteKey,"expired-callback":()=>{this.zone.run(()=>this.token.next(null))},callback:r=>this.token.next(r)})},this.scriptPath=`${this.verifyBaseUrl}recaptcha/api.js?render=explicit&hl=${this.cultureName}&onload=recaptchaV2Loaded`,super.appendScript()}reset(){grecaptcha.reset()}getVerificationToken(){return this.token.asObservable()}}class Ii extends wt{constructor(r,t){super(r),this.action=t}appendScript(){this.scriptPath=`${this.verifyBaseUrl}recaptcha/api.js?hl=${this.cultureName}&render=${this.siteKey}`,super.appendScript()}getVerificationToken(){try{grecaptcha}catch{return(0,_.of)(null)}return new _.Observable(r=>{grecaptcha.ready(()=>{grecaptcha.execute(this.siteKey,{action:this.action}).then(t=>{r.next(t)})})})}destroy(){super.destroy();const r=document.querySelector(".grecaptcha-badge");r.parentElement.removeChild(r)}}let Fe=(()=>{class n{get isEnabled(){return this.pageStrategy.isEnabled}get reCaptchaVersion(){return this.configState.getSetting("Abp.Account.Captcha.Version")}constructor(t,i,o){this.injector=t,this.configState=i,this.accountService=o}setStrategy(t){this.pageStrategy=t,this.pageStrategy.isEnabled&&this.init()}init(){"2"===this.reCaptchaVersion?this.strategy=new Pi(this.injector,this.pageStrategy.targetElement):"3"===this.reCaptchaVersion&&(this.strategy=new Ii(this.injector,this.pageStrategy.action))}validate(){return this.strategy.getVerificationToken().pipe((0,C.switchMap)(t=>this.accountService.recaptchaByCaptchaResponse(t).pipe((0,C.mapTo)(!0))))}getVerificationToken(){return this.strategy.getVerificationToken()}ngOnDestroy(){this.pageStrategy.isEnabled&&this.strategy.destroy()}reset(){this.isEnabled&&this.strategy.reset()}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(e.Injector),e.\u0275\u0275inject(f.ConfigStateService),e.\u0275\u0275inject(ie))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),Be=(()=>{class n{constructor(t,i){this.injector=t,this.toaster=i,this.pipeToLogin=this.injector.get(f.PIPE_TO_LOGIN_FN_KEY),this.authService=this.injector.get(f.AuthService)}login(t){const{username:i,password:o}=this.data,c=this.authService.loginUsingGrant("password",{username:i,password:o,TwoFactorProvider:t.provider,TwoFactorCode:t.code});return(0,_.from)(c).pipe(this.pipeToLogin&&this.pipeToLogin({redirectUrl:this.data.redirectUrl,rememberMe:this.data.rememberMe},this.injector),(0,C.catchError)(d=>(this.toaster.error(d.error?.error_description||d.error?.error.message||"AbpAccount::DefaultErrorMessage",null,{life:7e3}),(0,_.throwError)(()=>d))))}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(e.Injector),e.\u0275\u0275inject(y.ToasterService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),Ve=(()=>{class n{constructor(){this.pipeToLogin=(0,e.inject)(f.PIPE_TO_LOGIN_FN_KEY),this.injector=(0,e.inject)(e.Injector),this.authService=(0,e.inject)(f.AuthService),this.toaster=(0,e.inject)(y.ToasterService),this.data=(0,e.signal)(null),this.hasData=(0,e.computed)(()=>!!this.data())}login(t){const{username:i,password:o,redirectUrl:a,rememberMe:s}=this.data(),u=this.authService.loginUsingGrant("password",{username:i,password:o,RecoveryCode:t});return(0,_.from)(u).pipe(this.pipeToLogin&&this.pipeToLogin({redirectUrl:a,rememberMe:s},this.injector),(0,_.catchError)(l=>(this.toaster.error(l.error?.error_description||l.error?.error.message||"AbpAccount::DefaultErrorMessage",null,{life:7e3}),(0,_.throwError)(()=>l))))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})();const Ni="RequiresTwoFactor",Li="ShouldChangePasswordOnNextLogin",Di="PeriodicallyChangePassword",{maxLength:Mi,required:Ri}=m.Validators;let xt=(()=>{class n{constructor(t){this.injector=t,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapper",this.showPassword=!1,this.capsLock=!1,this.recoveryCodeService=(0,e.inject)(Ve),this.fb=t.get(m.UntypedFormBuilder),this.toasterService=t.get(y.ToasterService),this.authService=t.get(f.AuthService),this.configState=t.get(f.ConfigStateService),this.route=t.get(D.ActivatedRoute),this.router=t.get(D.Router),this.identityLinkUserService=t.get(Z.K),this.recaptchaService=t.get(Fe),this.securityCodeService=t.get(Be)}ngOnInit(){this.init(),this.buildForm(),this.setLinkUserParams()}ngAfterViewInit(){this.recaptchaService.setStrategy(_t.Login(this.configState,this.recaptchaRef.nativeElement))}setLinkUserParams(){const{linkUserId:t,linkToken:i,linkTenantId:o}=this.route.snapshot.queryParams;t&&i&&this.identityLinkUserService.verifyLinkToken({token:i,userId:t,tenantId:o}).subscribe(a=>{a&&(this.linkUser={userId:t,token:i,tenantId:o})})}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase()}buildForm(){this.form=this.fb.group({username:["",[Ri,Mi(255)]],password:["",[Ri,Mi(128)]],rememberMe:[!1]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const{username:t,password:i,rememberMe:o}=this.form.value,s={username:t,password:i,rememberMe:o,redirectUrl:He(this.injector)||(this.linkUser?null:"/")};this.checkRecaptcha().pipe((0,C.switchMap)(c=>c?this.authService.login(s).pipe(this.handleLoginError(s)).pipe(this.linkUser?this.switchToLinkUser():(0,C.tap)()):(0,_.of)(null)),(0,C.finalize)(()=>this.inProgress=!1)).subscribe()}checkRecaptcha(){return this.recaptchaService.isEnabled?this.recaptchaService.validate():(0,_.of)(!0)}switchToLinkUser(){return(0,_.pipe)((0,C.switchMap)(()=>this.identityLinkUserService.link(this.linkUser)),(0,C.tap)(()=>{this.router.navigate(["/account/link-logged"],{queryParams:this.route.snapshot.queryParams})}))}handleLoginError(t){return(0,C.catchError)(i=>{switch(i.error?.error_description){case Ni:const a={...t,userId:i.error.userId};return this.securityCodeService.data={...a,twoFactorToken:i.error.twoFactorToken},this.recoveryCodeService.data.set({...a}),(0,_.from)(this.router.navigate(["/account/send-security-code"]));case Di:case Li:return(0,_.from)(this.router.navigate(["/account/change-password"],{queryParams:{token:i.error.changePasswordToken,redirectUrl:t.redirectUrl,username:t.username}}))}return this.recaptchaService.reset(),this.toasterService.error(i.error?.error_description||i.error?.error?.message||"AbpAccount::DefaultErrorMessage",null,{life:7e3}),(0,_.throwError)(()=>i)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(e.Injector))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-login"]],viewQuery:function(i,o){if(1&i&&e.\u0275\u0275viewQuery(xi,5),2&i){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.recaptchaRef=a.first)}},features:[e.\u0275\u0275ProvidersFeature([Fe])],decls:36,vars:31,consts:[["role","alert","class","alert alert-warning",3,"innerHTML",4,"ngIf"],["class","mb-2",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"form-floating","mb-2"],["autofocus","","type","text","id","login-input-user-name-or-email-address","formControlName","username","placeholder","name@example.com",1,"form-control"],["for","login-input-user-name-or-email-address"],["id","password","placeholder","Password","formControlName","password",1,"form-control",3,"abpShowPassword","abpCapsLock"],["for","floatingPassword"],["id","capslockicon",1,"bi","bi-capslock","caps-lock-icon",3,"ngbTooltip"],["id","passwordicon","aria-label","Show/Hide password",3,"ngbTooltip","click"],[1,"row","mb-3"],[1,"col"],[1,"form-check","form-switch"],["type","checkbox","id","rememberMe","formControlName","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],[1,"col","text-end"],["routerLink","/account/forgot-password",1,"text-decoration-none"],[1,"row"],["recaptcha",""],["buttonClass","mt-2 mb-3 btn btn-primary btn-lg","buttonType","submit",1,"d-grid",3,"loading"],[1,"bi","bi-box-arrow-in-right","me-1"],["role","alert",1,"alert","alert-warning",3,"innerHTML"],[1,"mb-2"],["routerLink","/account/register","queryParamsHandling","preserve",1,"text-decoration-none"]],template:function(i,o){1&i&&(e.\u0275\u0275template(0,qn,2,4,"div",0),e.\u0275\u0275template(1,Wn,6,6,"h5",1),e.\u0275\u0275elementStart(2,"form",2),e.\u0275\u0275listener("ngSubmit",function(){return o.onSubmit()}),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275element(4,"input",4),e.\u0275\u0275elementStart(5,"label",5),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",3)(9,"input",6),e.\u0275\u0275listener("abpCapsLock",function(s){return o.capsLock=s}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"label",7),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"i",8),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementStart(15,"i",9),e.\u0275\u0275listener("click",function(){return o.showPassword=!o.showPassword}),e.\u0275\u0275pipe(16,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",10)(18,"div",11)(19,"div",12),e.\u0275\u0275element(20,"input",13),e.\u0275\u0275elementStart(21,"label",14),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"div",15)(25,"a",16),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"div",17)(29,"div",11),e.\u0275\u0275element(30,"div",null,18),e.\u0275\u0275elementStart(32,"abp-button",19),e.\u0275\u0275element(33,"i",20),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"abpLocalization"),e.\u0275\u0275elementEnd()()()()),2&i&&(e.\u0275\u0275property("ngIf",o.linkUser),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.isSelfRegistrationEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,17,"AbpAccount::UserNameOrEmailAddress")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("abpShowPassword",o.showPassword),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,19,"AbpAccount::Password")),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("d-none",!o.capsLock),e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(14,21,"AbpAccount::CapsLockOn")),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("bi bi-eye",o.showPassword?"":"-slash"," show-pass-icon"),e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(16,23,"AbpAccount::"+(o.showPassword?"HidePassword":"ShowPassword"))),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(23,25,"AbpAccount::RememberMe")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,27,"AbpAccount::ForgotPassword")," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("loading",o.inProgress),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(35,29,"AbpAccount::Login")," "))},dependencies:[E.NgIf,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.CheckboxControlValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,D.RouterLink,f.AutofocusDirective,f.FormSubmitDirective,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent,F.NgbTooltip,f.ShowPasswordDirective,f.TrackCapsLockDirective,f.LocalizationPipe],encapsulation:2})}return n})(),Ae=(()=>{class n{constructor(){this.store=new f.InternalStore({})}get createStateStream(){return this.store.sliceState}getProfile$(){return this.store.sliceState(t=>t.profile)}getProfile(){return this.store.state.profile}setProfile(t){this.store.patch({profile:t})}setHideEmailVerificationBtn(t){this.store.patch({hideEmailVerificationBtn:t})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),At=(()=>{class n{get isTwoFactorEnabled(){const{key:t}=Xt.twoFactorBehaviourOptions[0];return this.configState.getFeature("Identity.TwoFactor")===t&&this.configState.getSetting("Abp.Identity.TwoFactor.Behaviour")===t&&"true"===(this.configState.getSetting("Abp.Identity.TwoFactor.UsersCanChange")||"").toLowerCase()}setProfile(t){this.manageProfileState.setProfile(t),this.isProfileLoaded=!0,t.isExternal&&(this.tabsService.patch("AbpAccount::ProfileTab:Password",{invisible:!0}),this.selected=this.firstTab)}patchTwoFactorTab(t){this.tabsService.patch("AbpAccount::ProfileTab:TwoFactor",{invisible:!this.isTwoFactorEnabled||!t})}init(){const t=this.profileService.get().pipe((0,_.tap)(i=>this.setProfile(i)),(0,_.switchMap)(()=>this.profileService.canEnableTwoFactor()),(0,_.tap)(i=>this.patchTwoFactorTab(i)));this.subscriptionService.addOne(t)}constructor(t,i,o,a,s){this.track=t,this.tabsService=i,this.configState=o,this.profileService=a,this.manageProfileState=s,this.subscriptionService=(0,e.inject)(f.SubscriptionService),this.tabs$=this.tabsService.visible$.pipe((0,_.tap)(c=>{this.firstTab=c[0],!this.selected&&c[0].component&&(this.selected=c[0])})),this.init()}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(f.TrackByService),e.\u0275\u0275directiveInject(Ze.hY),e.\u0275\u0275directiveInject(f.ConfigStateService),e.\u0275\u0275directiveInject(Z.H3),e.\u0275\u0275directiveInject(Ae))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-manage-profile"]],decls:7,vars:4,consts:[[1,"card"],[1,"card-body"],[1,"row"],[4,"ngIf","ngIfElse"],["loader",""],[1,"col-12","col-md-3"],["id","nav-tab","role","tablist",1,"nav","flex-column","nav-pills"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12","col-md-9"],["class","tab-content",4,"ngIf"],["class","nav-item",3,"click",4,"abpPermission"],[1,"nav-item",3,"click"],["role","tab","href","javascript:void(0)",1,"nav-link",3,"ngClass"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","fade","show","active",3,"id"],[1,"my-4"],[4,"ngComponentOutlet"],[3,"abpLoading"]],template:function(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,Kn,6,3,"ng-container",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(5,Zn,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(6);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,2,o.tabs$))("ngIfElse",a)}},dependencies:[E.NgClass,E.NgComponentOutlet,E.NgForOf,E.NgIf,f.PermissionDirective,y.LoadingDirective,E.AsyncPipe,f.LocalizationPipe],encapsulation:2,data:{animation:[(0,Ee.trigger)("fadeIn",[(0,Ee.transition)(":enter",(0,Ee.useAnimation)(y.fadeIn))])]},changeDetection:0})}return n})(),$e=(()=>{class n{constructor(t,i){this.list=t,this.service=i,this.data={items:[],totalCount:0},this.filter={}}ngOnInit(){this.hookToQuery()}hookToQuery(){this.list.hookToQuery(t=>this.service.getSecurityLogList({...t,...this.filter})).subscribe(t=>this.data=t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(f.ListService),e.\u0275\u0275directiveInject(Z.BR))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-my-security-logs"]],features:[e.\u0275\u0275ProvidersFeature([f.ListService,{provide:I.EXTENSIONS_IDENTIFIER,useValue:"Account.MySecurityLogs"},{provide:F.NgbDateAdapter,useClass:I.DateAdapter}])],decls:22,vars:17,consts:[["id","wrapper"],[3,"title","toolbar"],[1,"card"],[1,"card-body","pb-lg-3"],[1,"row","align-items-end",3,"keyup.enter"],[1,"col-md-12","col-lg-3"],[1,"mb-3"],[1,"form-label"],["startDateProp","startTime","endDateProp","endTime",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-md-6","col-lg-3"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-6","col-lg-2"],[1,"mt-md-4","mb-md-3","btn","btn-primary","w-100",3,"click"],["aria-hidden","true",1,"fas","fa-search"],[3,"data","recordsTotal","list"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"abp-page",1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"div",2)(4,"div",3)(5,"div",4),e.\u0275\u0275listener("keyup.enter",function(){return o.list.get()}),e.\u0275\u0275elementStart(6,"div",5)(7,"div",6)(8,"label",7),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"abp-date-range-picker",8),e.\u0275\u0275listener("ngModelChange",function(s){return o.filter=s}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",9)(13,"div",6)(14,"label",7),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"input",10),e.\u0275\u0275listener("ngModelChange",function(s){return o.filter.action=s}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",11)(19,"button",12),e.\u0275\u0275listener("click",function(){return o.list.get()}),e.\u0275\u0275element(20,"i",13),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(21,"abp-extensible-table",14),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(2,10,"AbpAccount::MySecurityLogs"))("toolbar",o.data.items),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,12,"AbpAccount::Date")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",o.filter)("ngModelOptions",e.\u0275\u0275pureFunction0(16,Jn)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,14,"AbpAccount::MySecurityLogs:Action")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",o.filter.action),e.\u0275\u0275advance(4),e.\u0275\u0275property("data",o.data.items)("recordsTotal",o.data.totalCount)("list",o.list))},dependencies:[m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,re.DateRangePickerComponent,I.ExtensibleTableComponent,q.PageComponent,f.LocalizationPipe],encapsulation:2})}return n})();const{maxLength:qr,required:Tt,email:Wr}=m.Validators;let Et=(()=>{class n{constructor(t){this.injector=t,this.isSelfRegistrationEnabled=!0,this.showPassword=!1,this.capsLock=!1,this.fb=t.get(m.UntypedFormBuilder),this.accountService=t.get(ie),this.toasterService=t.get(y.ToasterService),this.configState=t.get(f.ConfigStateService),this.authService=t.get(f.AuthService),this.recaptchaService=t.get(Fe)}ngOnInit(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase(),this.isSelfRegistrationEnabled?this.form=this.fb.group({username:["",[Tt,qr(255)]],password:["",[Tt,...(0,y.getPasswordValidators)(this.injector)]],email:["",[Tt,Wr]]}):this.toasterService.warn({key:"AbpAccount::SelfRegistrationDisabledMessage",defaultValue:"Self registration is disabled."},null,{life:1e4})}ngAfterViewInit(){this.recaptchaService.setStrategy(_t.Register(this.configState,this.recaptchaRef.nativeElement))}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const t={userName:this.form.get("username").value,password:this.form.get("password").value,emailAddress:this.form.get("email").value,appName:"Angular"};(this.recaptchaService.isEnabled?this.recaptchaService.getVerificationToken():(0,_.of)(void 0)).pipe((0,C.switchMap)(i=>this.accountService.register({...t,captchaResponse:i}).pipe((0,C.switchMap)(()=>this.authService.login({username:t.userName,password:t.password,redirectUrl:He(this.injector)||"/"})),(0,C.catchError)(o=>(this.recaptchaService.reset(),this.toasterService.error(o.error?.error_description||o.error?.error?.message||"AbpAccount::DefaultErrorMessage",null,{life:7e3}),(0,_.throwError)(o))))),(0,C.finalize)(()=>this.inProgress=!1)).subscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(e.Injector))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-register"]],viewQuery:function(i,o){if(1&i&&e.\u0275\u0275viewQuery(xi,5),2&i){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.recaptchaRef=a.first)}},features:[e.\u0275\u0275ProvidersFeature([Fe])],decls:7,vars:7,consts:[[1,"mb-3"],["routerLink","/account/login",1,"text-decoration-none"],["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"form-floating","mb-2"],["autofocus","","type","text","id","input-user-name","placeholder","name@example.com","formControlName","username",1,"form-control"],["for","input-user-name"],["type","email","id","input-email-address","placeholder","name@example.com","formControlName","email",1,"form-control"],["for","input-email-address"],["id","password","placeholder","Password","formControlName","password",1,"form-control",3,"abpShowPassword","abpCapsLock"],["for","input-password"],["id","capslockicon",1,"bi","bi-capslock","caps-lock-icon",3,"ngbTooltip"],["id","passwordicon","aria-label","Show/Hide password",3,"ngbTooltip","click"],["recaptcha",""],[1,"row","mb-3"],[1,"col"],["buttonClass","btn btn-primary register-btn btn-lg w-100","buttonType","submit",1,"d-grid",3,"loading"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"h5",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"a",1),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,er,27,26,"form",2)),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,"AbpAccount::AlreadyRegistered")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,5,"AbpAccount::Login")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.isSelfRegistrationEnabled))},dependencies:[E.NgIf,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,D.RouterLink,f.AutofocusDirective,f.FormSubmitDirective,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent,F.NgbTooltip,f.ShowPasswordDirective,f.TrackCapsLockDirective,f.LocalizationPipe],encapsulation:2})}return n})();const ki=["password","confirmPassword"];let Pt=(()=>{class n{constructor(t,i,o,a,s){this.fb=t,this.accountService=i,this.route=o,this.router=a,this.injector=s,this.inProgress=!1,this.isPasswordReset=!1,this.mapErrorsFn=(c,d,u)=>ki.indexOf(String(u.name))<0?c:c.concat(d.filter(({key:l})=>"passwordMismatch"===l))}ngOnInit(){this.route.queryParams.subscribe(({userId:t,resetToken:i})=>{(!t||!i)&&this.router.navigateByUrl("/account/login"),this.form=this.fb.group({userId:[t,[m.Validators.required]],resetToken:[i,[m.Validators.required]],password:["",[m.Validators.required,...(0,y.getPasswordValidators)(this.injector)]],confirmPassword:["",[m.Validators.required,...(0,y.getPasswordValidators)(this.injector)]]},{validators:[(0,x.comparePasswords)(ki)]})})}onSubmit(){this.form.invalid||this.inProgress||(this.inProgress=!0,this.accountService.resetPassword({userId:this.form.get("userId").value,resetToken:this.form.get("resetToken").value,password:this.form.get("password").value}).pipe((0,C.finalize)(()=>this.inProgress=!1)).subscribe(()=>{this.isPasswordReset=!0}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(m.UntypedFormBuilder),e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(D.ActivatedRoute),e.\u0275\u0275directiveInject(D.Router),e.\u0275\u0275directiveInject(e.Injector))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-reset-password"]],decls:3,vars:2,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit",4,"ngIf","ngIfElse"],["passwordResetTemplate",""],["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],[1,"mb-3"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password",1,"form-control"],["for","input-confirm-password",1,"form-label"],["type","password","id","input-confirm-password","formControlName","confirmPassword",1,"form-control"],["type","button",1,"me-2","btn","btn-secondary"],["buttonClass","me-2 btn btn-primary","buttonType","submit",3,"loading"],["routerLink","/account/login"],[1,"d-block","mt-2","mb-3","btn","btn-primary"]],template:function(i,o){if(1&i&&(e.\u0275\u0275template(0,tr,24,18,"form",0),e.\u0275\u0275template(1,ir,7,6,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.isPasswordReset)("ngIfElse",a)}},dependencies:[E.NgIf,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,D.RouterLink,f.FormSubmitDirective,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent,f.LocalizationPipe],encapsulation:2})}return n})(),It=(()=>{class n{constructor(t,i,o){this.service=t,this.accountService=i,this.fb=o,this.providers=[],this.codeForm=this.fb.group({code:[null,[m.Validators.required]]})}ngOnInit(){const{twoFactorToken:t,userId:i}=this.service.data;this.accountService.getTwoFactorProviders({token:t,userId:i}).subscribe(o=>{this.providers=o,this.selectedProvider=o[0]})}ngOnDestroy(){this.service.data=null}sendTwoFactorCode(){if(this.loading)return;this.loading=!0;const{twoFactorToken:t,userId:i}=this.service.data;this.accountService.sendTwoFactorCode({token:t,userId:i,provider:this.selectedProvider}).pipe((0,C.finalize)(()=>this.loading=!1)).subscribe(()=>{this.showCodeForm=!0})}login(){if(this.codeForm.invalid)return;const{code:t}=this.codeForm.value;this.loading=!0,this.service.login({code:t,provider:this.selectedProvider}).pipe((0,C.finalize)(()=>this.loading=!1)).subscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(Be),e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(m.UntypedFormBuilder))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-send-security-code"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["codeFormTmp",""],[1,"mb-3"],["for","selected-provider",1,"form-label"],["id","selected-provider","name","selected-provider",1,"form-select","form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"loading","abpClick"],[3,"ngValue"],[3,"formGroup","ngSubmit"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code","autocomplete","off","autofocus","",1,"form-control"],["buttonType","submit",3,"loading"],[1,"mt-3"],[3,"routerLink"]],template:function(i,o){if(1&i&&(e.\u0275\u0275template(0,rr,13,12,"form",0),e.\u0275\u0275template(1,ar,17,16,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.showCodeForm)("ngIfElse",a)}},dependencies:[E.NgForOf,E.NgIf,m.\u0275NgNoValidate,m.NgSelectOption,m.\u0275NgSelectMultipleOption,m.DefaultValueAccessor,m.SelectControlValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.NgModel,m.NgForm,m.FormGroupDirective,m.FormControlName,D.RouterLink,f.AutofocusDirective,f.FormSubmitDirective,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent,f.LocalizationPipe],encapsulation:2})}return n})(),Te=(()=>{class n{constructor(t){this.authService=t}canActivate(){return!!this.authService.isInternalAuth||(this.authService.navigateToLogin(),!1)}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(f.AuthService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})();const Hr=I.EntityAction.createMany([]),$r=I.EntityProp.createMany([{type:"string",name:"creationTime",displayName:"AbpAccount::MySecurityLogs:Time",sortable:!0,columnWidth:180,valueResolver:n=>{const r=n.getInjected(f.ConfigStateService),t=n.getInjected(E.DatePipe);return(0,_.of)(t.transform(n.record.creationTime,(0,f.getShortDateShortTimeFormat)(r)))}},{type:"string",name:"action",displayName:"AbpAccount::MySecurityLogs:Action",sortable:!0,columnWidth:180,valueResolver:n=>(0,_.of)(`<div style="max-width: 160px" class="pointer abp-ellipsis-inline">${n.record.action||""}</div>`),action:n=>{const r=n.getInjected($e);r.filter.action=n.record.action,r.list.get()}},{type:"string",name:"clientIpAddress",displayName:"AbpAccount::MySecurityLogs:IpAddress",sortable:!1,columnWidth:200,valueResolver:n=>(0,_.of)(`<div style="max-width: 180px" class="abp-ellipsis-inline">${n.record.clientIpAddress||""}</div>`)},{type:"string",name:"browserInfo",displayName:"AbpAccount::MySecurityLogs:Browser",sortable:!1,columnWidth:200,valueResolver:n=>(0,_.of)(`<div style="max-width: 180px" class="abp-ellipsis-inline">${n.record.browserInfo||""}</div>`)},{type:"string",name:"applicationName",displayName:"AbpAccount::MySecurityLogs:Application",sortable:!0,columnWidth:150,valueResolver:n=>(0,_.of)(`<div style="max-width: 135px" class="abp-ellipsis-inline">${n.record.applicationName||""}</div>`)},{type:"string",name:"identity",displayName:"AbpAccount::MySecurityLogs:Identity",sortable:!0,columnWidth:150,valueResolver:n=>(0,_.of)(`<div style="max-width: 135px" class="abp-ellipsis-inline">${n.record.identity||""}</div>`)},{type:"string",name:"clientId",displayName:"AbpAccount::MySecurityLogs:Client",sortable:!0,columnWidth:320,valueResolver:n=>(0,_.of)(`<div>${n.record.clientId||""}</div>`)}]),Yr=I.ToolbarAction.createMany([]);let Ye=(()=>{class n{constructor(t){this.formProp=t,this.displayName=t.displayName,this.name=t.name,this.id=t.id}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(I.EXTENSIONS_FORM_PROP))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-personal-settings-half-row"]],features:[e.\u0275\u0275ProvidersFeature([],[I.EXTENSIBLE_FORM_VIEW_PROVIDER])],decls:6,vars:7,consts:[[1,"w-50","d-inline"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"formControlName"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"label",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",3),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275attribute("for",o.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(4,5,o.displayName)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",o.name),e.\u0275\u0275attribute("id",o.id)("name",o.name))},dependencies:[m.DefaultValueAccessor,m.NgControlStatus,m.FormControlName,x.ValidationDirective,f.LocalizationPipe],encapsulation:2})}return n})();const{required:Nt}=m.Validators;let Lt=(()=>{class n{constructor(){this.manageProfileState=(0,e.inject)(Ae),this.fb=(0,e.inject)(m.FormBuilder),this.toasterService=(0,e.inject)(y.ToasterService),this.activatedRoute=(0,e.inject)(D.ActivatedRoute),this.router=(0,e.inject)(D.Router),this.profileService=(0,e.inject)(Z.H3),this.authService=(0,e.inject)(f.AuthService),this.toasterSuccessOption={message:"AbpAccount::PasswordChangedMessage",title:"",options:{life:5e3}},this.legacyInjector=(0,e.inject)(e.Injector),this.PASSWORD_FIELDS=["newPassword","repeatNewPassword"],this.MapErrorsFnFactory=()=>(t,i,o)=>this.PASSWORD_FIELDS.indexOf(String(o.name))<0?t:t.concat(i.filter(({key:a})=>"passwordMismatch"===a))}getQueryParams(){const{token:t,username:i}=this.activatedRoute.snapshot.queryParams;return{token:t,username:i}}get hasPassword(){return!!this.manageProfileState.getProfile()?.hasPassword}get returnUrl(){return this.activatedRoute.snapshot.queryParams.returnUrl}buildForm(t=!1){const i=(0,y.getPasswordValidators)(this.legacyInjector),o=this.fb.group({currentPassword:["",Nt],newPassword:["",{validators:[Nt,...i]}],repeatNewPassword:["",{validators:[Nt,...i]}]},{validators:[(0,x.comparePasswords)(this.PASSWORD_FIELDS)]});return t&&o.removeControl("currentPassword"),o}changePassword(t){return this.profileService.changePassword(t)}changePasswordAndLogin(t){const i=this.getQueryParams();return(0,_.from)(this.authService.loginUsingGrant("password",{password:t.currentPassword,NewPassword:t.newPassword,username:i.username,ChangePasswordToken:i.token}))}redirectToReturnUrl(){return(0,_.from)(this.router.navigateByUrl(this.returnUrl||"/"))}showSuccessMessage(){const{message:t,title:i,options:o}=this.toasterSuccessOption;this.toasterService.success(t,i,o)}showErrorMessage(t){this.toasterService.error(t.error?.error?.message||"AbpAccount::DefaultErrorMessage")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dt=(()=>{class n{constructor(){this.accountService=(0,e.inject)(Z.BR),this.profileService=(0,e.inject)(Z.H3)}get isTwoFactorEnabled$(){return this.profileService.getTwoFactorEnabled()}setTwoFactorStatus(t){return this.profileService.setTwoFactorEnabled(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),Mt=(()=>{class n{constructor(){this.accountService=(0,e.inject)(Z.BR),this.hasAuthenticator=(0,Pe.toSignal)(this.accountService.hasAuthenticator()),this.authenticatorInfo=(0,Pe.toSignal)(this.accountService.getAuthenticatorInfo())}resetAuthenticator(){return this.accountService.resetAuthenticator()}verifyAuthenticatorCode(t){return this.accountService.verifyAuthenticatorCode({code:t})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),Xe=(()=>{class n{constructor(){this.btnClick=new e.EventEmitter}onBtnClick(){this.btnClick.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-personal-settings-verify-button"]],inputs:{buttonLabel:"buttonLabel",verifiedLabel:"verifiedLabel",verified:"verified",edited:"edited",editedLabel:"editedLabel",editedTooltip:"editedTooltip"},outputs:{btnClick:"btnClick"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["editedTemplate",""],["class","input-group-text",4,"ngIf","ngIfElse"],["verifyButton",""],[1,"input-group-text"],["aria-hidden","true",1,"me-1","text-success","fa","fa-check-square"],[1,"text-success"],["type","button",1,"btn","btn-warning",3,"click"],["aria-hidden","true",1,"me-1","fa","fa-vcard"],["placement","top",1,"input-group-text",3,"ngbTooltip"],["aria-hidden","true",1,"me-1","fa","fa-times"],[1,"text-danger"]],template:function(i,o){if(1&i&&(e.\u0275\u0275template(0,lr,4,2,"ng-container",0),e.\u0275\u0275template(1,pr,6,6,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.edited)("ngIfElse",a)}},dependencies:[E.NgIf,F.NgbTooltip,f.LocalizationPipe],encapsulation:2,changeDetection:0})}return n})(),Rt=(()=>{class n{constructor(t,i,o,a,s,c,d,u){this.formProp=t,this.propData=i,this.formGroupDirective=o,this.manageProfileState=a,this.toasterService=s,this.accountService=c,this.configState=d,this.environmentService=u,this.subscriptionService=(0,e.inject)(f.SubscriptionService),this.displayName=t.displayName,this.name=t.name,this.id=t.id,this.formGroup=this.formGroupDirective.control,this.formControl=this.formGroup.controls[this.name],this.initialValue=i.email,this.isValueChanged$=this.formControl.valueChanges.pipe((0,C.map)(l=>l!==this.initialValue)),this.isReadonly$=d.getSetting$("Abp.Identity.User.IsEmailUpdateEnabled").pipe((0,C.map)(l=>"true"!==l.toLowerCase())),this.isVerified=i.emailConfirmed,this.showEmailVerificationBtn$=this.manageProfileState.createStateStream(l=>!l.hideEmailVerificationBtn)}get userId(){return this.configState.getDeep("currentUser.id")}sendEmailVerificationToken(){if(this.formControl.invalid)return;const t=this.formControl.value,i=this.userId,o=this.environmentService.getEnvironment$().pipe((0,C.map)(({application:{baseUrl:a},oAuthConfig:{responseType:s}})=>({appName:"code"===s?"MVC":"Angular",returnUrl:`${a}/account/login`})),(0,C.switchMap)(({appName:a,returnUrl:s})=>this.accountService.sendEmailConfirmationToken({appName:a,email:t,userId:i,returnUrl:s})));this.subscriptionService.addOne(o,()=>{this.toasterService.success("AbpAccount::EmailConfirmationSentMessage","",{messageLocalizationParams:[t]}),this.manageProfileState.setHideEmailVerificationBtn(!0)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(I.EXTENSIONS_FORM_PROP),e.\u0275\u0275directiveInject(I.EXTENSIONS_FORM_PROP_DATA),e.\u0275\u0275directiveInject(m.FormGroupDirective),e.\u0275\u0275directiveInject(Ae),e.\u0275\u0275directiveInject(y.ToasterService),e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(f.ConfigStateService),e.\u0275\u0275directiveInject(f.EnvironmentService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-personal-settings-email"]],features:[e.\u0275\u0275ProvidersFeature([],[I.EXTENSIBLE_FORM_VIEW_PROVIDER])],decls:11,vars:12,consts:[[1,"mb-3"],[1,"form-label"],["validationTarget","","validationStyle","",1,"input-group"],["type","email",1,"form-control",3,"formControlName","readonly"],["class","input-group-append",4,"ngIf"],[1,"input-group-append"],[3,"verified","edited","btnClick"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"label",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275element(7,"input",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275template(9,dr,3,4,"div",4),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275attribute("for",o.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,o.displayName)),e.\u0275\u0275advance(5),e.\u0275\u0275property("formControlName",o.name)("readonly",e.\u0275\u0275pipeBind1(8,8,o.isReadonly$)),e.\u0275\u0275attribute("id",o.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,10,o.showEmailVerificationBtn$)))},dependencies:[E.NgIf,m.DefaultValueAccessor,m.NgControlStatus,m.FormControlName,x.ValidationStyleDirective,x.ValidationTargetDirective,x.ValidationDirective,Xe,E.AsyncPipe,f.LocalizationPipe],encapsulation:2})}return n})(),kt=(()=>{class n{constructor(t,i,o,a,s,c,d,u,l){this.formProp=t,this.propData=i,this.formGroupDirective=o,this.configState=a,this.accountService=s,this.toasterService=c,this.manageProfileState=d,this.confirmationService=u,this.cdr=l,this.initPhoneNumberConfirmation=()=>{this.formControl.invalid||this.accountService.sendPhoneNumberConfirmationToken({phoneNumber:this.formControl.value,userId:this.userId}).pipe((0,C.tap)(()=>this.token="")).subscribe(this.openModal)},this.openModal=()=>{this.modalVisible=!0,this.cdr.detectChanges()},this.removeModal=()=>{this.modalVisible=!1},this.setPhoneNumberAsConfirmed=()=>{const p={...this.manageProfileState.getProfile(),phoneNumberConfirmed:!0};this.manageProfileState.setProfile(p)},this.name=t.name,this.id=t.id,this.isVerified=i.phoneNumberConfirmed,this.displayName=t.displayName,this.formGroup=this.formGroupDirective.control,this.formControl=this.formGroup.controls[this.name],this.isEnablePhoneNumberConfirmation=this.getIsEnablePhoneNumberConfirmation(),this.initialValue=i.phoneNumber,this.isValueChanged$=this.formControl.valueChanges.pipe((0,C.map)(p=>p!==this.initialValue))}getIsEnablePhoneNumberConfirmation(){return"True"===this.configState.getSetting("Abp.Identity.SignIn.EnablePhoneNumberConfirmation")}get userId(){return this.configState.getDeep("currentUser.id")}confirmPhoneNumber(){this.accountService.confirmPhoneNumber({token:this.token,userId:this.userId}).pipe((0,C.tap)(this.setPhoneNumberAsConfirmed),(0,C.tap)(this.removeModal)).subscribe(()=>{this.toasterService.success("AbpAccount::Verified","",{life:5e3})})}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(I.EXTENSIONS_FORM_PROP),e.\u0275\u0275directiveInject(I.EXTENSIONS_FORM_PROP_DATA),e.\u0275\u0275directiveInject(m.FormGroupDirective),e.\u0275\u0275directiveInject(f.ConfigStateService),e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(y.ToasterService),e.\u0275\u0275directiveInject(Ae),e.\u0275\u0275directiveInject(y.ConfirmationService),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-personal-settings-phone-number"]],features:[e.\u0275\u0275ProvidersFeature([],[I.EXTENSIBLE_FORM_VIEW_PROVIDER])],decls:14,vars:11,consts:[[1,"mb-3"],[1,"form-label"],["validationTarget","","validationStyle","",1,"input-group"],["type","text",1,"form-control",3,"formControlName"],["class","input-group-append",4,"ngIf"],[3,"visible","busy","options","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[1,"input-group-append"],[3,"verified","edited","btnClick"],[3,"ngSubmit"],[1,"mt-2"],["for","confirm-phone-number",1,"form-label"],["id","confirm-phone-number","name","confirm-phone-number","type","text","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["abpClose","","type","button",1,"btn","btn-secondary"],["type","abp-button","iconClass","fa fa-check",3,"click"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"label",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275element(5,"input",3),e.\u0275\u0275template(6,ur,3,4,"div",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"abp-modal",5),e.\u0275\u0275listener("visibleChange",function(s){return o.modalVisible=s}),e.\u0275\u0275template(8,mr,3,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(10,hr,10,8,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(12,fr,6,6,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275attribute("for",o.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,8,o.displayName)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formControlName",o.name),e.\u0275\u0275attribute("id",o.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.initialValue&&o.isEnablePhoneNumberConfirmation),e.\u0275\u0275advance(1),e.\u0275\u0275property("visible",o.modalVisible)("busy",o.modalBusy)("options",e.\u0275\u0275pureFunction0(10,gr)))},dependencies:[E.NgIf,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.NgModel,m.NgForm,m.FormControlName,f.AutofocusDirective,x.ValidationStyleDirective,x.ValidationTargetDirective,x.ValidationDirective,y.ButtonComponent,y.ModalComponent,y.ModalCloseDirective,Xe,E.AsyncPipe,f.LocalizationPipe],encapsulation:2})}return n})();const{maxLength:je,required:Oi,email:Xr}=m.Validators,Qr=I.FormProp.createMany([{type:"string",name:"userName",displayName:"AbpIdentity::DisplayName:UserName",id:"username",validators:()=>[Oi,je(256)],readonly:n=>"false"===(n.getInjected(f.ConfigStateService).getSettings()["Abp.Identity.User.IsUserNameUpdateEnabled"]||"").toLowerCase()},{type:"string",name:"name",displayName:"AbpIdentity::DisplayName:Name",id:"name",validators:()=>[je(64)],template:Ye,className:"d-inline-block w-50"},{type:"string",name:"surname",displayName:"AbpIdentity::DisplayName:Surname",id:"surname",validators:()=>[je(64)],className:"d-inline-block w-50 ps-4",template:Ye},{type:"string",name:"email",displayName:"AbpIdentity::DisplayName:Email",id:"email-address",validators:()=>[Oi,Xr,je(256)],template:Rt,readonly:n=>"false"===(n.getInjected(f.ConfigStateService).getSettings()["Abp.Identity.User.IsEmailUpdateEnabled"]||"").toLowerCase()},{type:"string",name:"phoneNumber",displayName:"AbpIdentity::DisplayName:PhoneNumber",id:"phone-number",validators:()=>[je(16)],template:kt}]),Kr={"Account.MySecurityLogs":Hr},Zr={"Account.MySecurityLogs":Yr},Jr={"Account.MySecurityLogs":$r},eo={"Account.PersonalSettingsComponent":Qr},Fi=new e.InjectionToken("ACCOUNT_ENTITY_ACTION_CONTRIBUTORS"),Bi=new e.InjectionToken("ACCOUNT_TOOLBAR_ACTION_CONTRIBUTORS"),Vi=new e.InjectionToken("ACCOUNT_ENTITY_PROP_CONTRIBUTORS"),to=new e.InjectionToken("ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS");let Ot=(()=>{class n{constructor(t){this.injector=t}canActivate(){const t=this.injector.get(I.ExtensionsService),i=this.injector.get(Fi,null)||{},o=this.injector.get(Bi,null)||{},a=this.injector.get(Vi,null)||{},s=this.injector.get(to,null)||{},c=this.injector.get(f.ConfigStateService),d=(0,I.getObjectExtensionEntitiesFromStore)(c,"Identity").pipe((0,C.map)(l=>({"Account.PersonalSettingsComponent":l.User})),(0,I.mapEntitiesToContributors)(c,"AbpIdentity"),(0,C.tap)(l=>{(0,I.mergeWithDefaultProps)(t.editFormProps,eo,l.editForm,s)})),u=(0,I.getObjectExtensionEntitiesFromStore)(c,"Account").pipe((0,C.map)(l=>({"Account.MySecurityLogs":l.SecurityLogs})),(0,I.mapEntitiesToContributors)(c,"AbpAccount"),(0,C.tap)(l=>{(0,I.mergeWithDefaultActions)(t.entityActions,Kr,i),(0,I.mergeWithDefaultActions)(t.toolbarActions,Zr,o),(0,I.mergeWithDefaultProps)(t.entityProps,Jr,l.prop,a)}));return(0,_.zip)(u,d).pipe((0,C.mapTo)(!0))}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(e.Injector))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),Ft=(()=>{class n{constructor(t,i){this.service=t,this.router=i}canActivate(){const t=this.router.createUrlTree(["/account/login"]);return!!this.service.data||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(Be),e.\u0275\u0275inject(D.Router))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),Bt=(()=>{class n{constructor(){this.router=(0,e.inject)(D.Router),this.recoveryCodeService=(0,e.inject)(Ve)}canActivate(){const t=this.router.createUrlTree(["/account/login"]);return!!this.recoveryCodeService.hasData()||t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})(),Vt=(()=>{class n{constructor(){this.service=(0,e.inject)(Lt),this.subscription=(0,e.inject)(f.SubscriptionService),this.hideCurrentPassword=!1,this.mapErrorsFn=this.service.MapErrorsFnFactory()}ngOnInit(){this.hideCurrentPassword=!this.service.hasPassword,this.form=this.service.buildForm(this.hideCurrentPassword)}onSuccess(){this.service.showSuccessMessage(),this.hideCurrentPassword=!1,this.form=this.service.buildForm(this.hideCurrentPassword)}onSubmit(){if(this.form.invalid)return;const t=this.service.changePassword(this.form.value);this.subscription.addOne(t,this.onSuccess,this.service.showErrorMessage)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-change-password-form"]],exportAs:["abpChangePasswordForm"],features:[e.\u0275\u0275ProvidersFeature([f.SubscriptionService])],decls:19,vars:12,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["for","new-password",1,"form-label"],["inputId","new-password","formControlName","newPassword"],["for","confirm-new-password",1,"form-label"],["inputId","confirm-new-password","formControlName","repeatNewPassword"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit"],["for","current-password",1,"form-label"],["inputId","current-password","formControlName","currentPassword"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return o.onSubmit()}),e.\u0275\u0275template(1,vr,7,3,"div",1),e.\u0275\u0275elementStart(2,"div",2)(3,"label",3),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span"),e.\u0275\u0275text(7," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"abp-password",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",2)(10,"label",5),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"span"),e.\u0275\u0275text(14," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"abp-password",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"abp-button",7),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275property("formGroup",o.form)("mapErrorsFn",o.mapErrorsFn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.hideCurrentPassword),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,6,"AbpIdentity::DisplayName:NewPassword")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,8,"AbpIdentity::DisplayName:NewPasswordConfirm")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,10,"AbpIdentity::Save")))},dependencies:[E.NgIf,m.\u0275NgNoValidate,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,f.FormSubmitDirective,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent,y.PasswordComponent,f.LocalizationPipe],encapsulation:2})}return n})();const jt=new e.InjectionToken("RE_LOGIN_CONFIRMATION_TOKEN");let zt=(()=>{class n{loadData(){this.storedProfile=this.manageProfileState.getProfile(),this.buildForm(this.storedProfile)}constructor(t,i,o,a,s,c,d,u,l,p,g,T){this.fb=t,this.accountService=i,this.toasterService=o,this.confirmationService=a,this.configState=s,this.subscription=c,this.manageProfileState=d,this.profileService=u,this.cdr=l,this.injector=p,this.authService=g,this.isPersonalSettingsChangedConfirmationActive=T,this.profile$=this.manageProfileState.getProfile$(),this.modalVisible=!1,this.modalBusy=!1,this.token="",this.isEmailUpdateEnabled=!0,this.isUserNameUpdateEnabled=!0,this.buildForm=w=>{const M=new I.FormPropData(this.injector,w);this.form=(0,I.generateFormFromProps)(M)},this.removeModal=()=>{this.modalVisible=!1},this.logoutConfirmation=()=>{this.authService.logout().subscribe()}}ngOnDestroy(){this.removeModal()}ngOnInit(){this.subscription.addOne(this.profile$.pipe((0,C.filter)(Boolean),(0,C.tap)(t=>this.storedProfile=t)),this.buildForm)}submit(){if(this.form.invalid)return;const t=this.isLogoutConfirmMessageActive(),{phoneNumberConfirmed:i,...o}=this.form.value;this.profileService.update(o).subscribe(a=>{this.manageProfileState.setProfile(a),this.cdr.detectChanges(),this.toasterService.success("AbpAccount::PersonalSettingsSaved","",{life:5e3}),t&&this.showLogoutConfirmMessage()})}isDataSame(t,i){return Object.entries(t).some(([o,a])=>o in i&&a!==i[o])}isLogoutConfirmMessageActive(){return!!this.isPersonalSettingsChangedConfirmationActive&&this.isDataSame(this.storedProfile,this.form.value)}showLogoutConfirmMessage(){this.confirmationService.info("AbpAccount::PersonalSettingsChangedConfirmationModalDescription","AbpAccount::PersonalSettingsChangedConfirmationModalTitle").pipe((0,C.filter)(t=>t===y.Confirmation.Status.confirm)).subscribe(this.logoutConfirmation)}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(m.UntypedFormBuilder),e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(y.ToasterService),e.\u0275\u0275directiveInject(y.ConfirmationService),e.\u0275\u0275directiveInject(f.ConfigStateService),e.\u0275\u0275directiveInject(f.SubscriptionService),e.\u0275\u0275directiveInject(Ae),e.\u0275\u0275directiveInject(Z.H3),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(f.AuthService),e.\u0275\u0275directiveInject(jt))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-personal-settings-form"]],features:[e.\u0275\u0275ProvidersFeature([f.SubscriptionService,{provide:I.EXTENSIONS_IDENTIFIER,useValue:"Account.PersonalSettingsComponent"}])],decls:1,vars:1,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[3,"selectedRecord"],["buttonType","submit","iconClass","fa fa-check","buttonClass","btn btn-primary color-white",3,"disabled"]],template:function(i,o){1&i&&e.\u0275\u0275template(0,br,5,6,"form",0),2&i&&e.\u0275\u0275property("ngIf",o.form)},dependencies:[E.NgIf,m.\u0275NgNoValidate,m.NgControlStatusGroup,m.FormGroupDirective,f.FormSubmitDirective,I.ExtensibleFormComponent,x.ValidationGroupDirective,y.ButtonComponent,f.LocalizationPipe],encapsulation:2})}return n})(),Ut=(()=>{class n{get currentUserId(){return this.configState.getDeep("currentUser.id")}constructor(t,i,o,a,s){this.profilePicture$=t,this.cdRef=i,this.confirmation=o,this.profilePictureService=a,this.configState=s,this.profilePictureType=oe.eProfilePictureType.None}toBase64(t){return new Promise((i,o)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>i(a.result),a.onerror=s=>o(s)})}ngOnInit(){this.getProfilePhoto()}getProfilePhoto(){this.profilePictureService.getProfilePicture(this.currentUserId).pipe((0,C.finalize)(()=>{this.profileLoaded=!0,this.cdRef.markForCheck()})).subscribe({next:t=>{this.profilePictureType=t.type;const i=t.source||`data:image/png;base64,${t.fileContent}`;this.profilePicture$.value.source!==i&&this.profilePicture$.next({type:"image",source:i})},error:()=>this.profilePicture$.next(oe.DEFAULT_PROFILE_ICON)})}submit(){let t="";switch(this.profilePictureType){case oe.eProfilePictureType.Gravatar:t="UseGravatarConfirm";break;case oe.eProfilePictureType.Image:t="PPUploadConfirm";break;default:t="NoProfilePictureConfirm"}this.confirmation.warn(`AbpAccount::${t}`,"AbpAccount::AreYouSure").pipe((0,C.filter)(i=>i===y.Confirmation.Status.confirm),(0,C.tap)(()=>this.inProgress=!0),(0,C.switchMap)(()=>{if(this.profilePictureType===oe.eProfilePictureType.Image){const i=new _.Subject;return this.cropper.getCroppedCanvas().toBlob(o=>{this.profilePictureService.setProfilePicture({type:this.profilePictureType,imageContent:o}).pipe((0,C.finalize)(()=>i.complete())).subscribe(a=>i.next(a),a=>i.error(a))}),i.asObservable()}return this.profilePictureService.setProfilePicture({type:this.profilePictureType})}),(0,C.take)(1),(0,C.finalize)(()=>this.inProgress=!1)).subscribe(()=>{this.getProfilePhoto(),this.selectedImage=null,this.uploadFileRef&&(this.uploadFileRef.nativeElement.value=null)})}onSelectImage(t){var i=this;return(0,W.Z)(function*(){i.selectedImage=yield i.toBase64(t),i.cropper&&i.cropper.destroy();const o=[250,150,75],a=()=>{i.selectedImagePreviews.forEach((s,c)=>{const d=o[c];s.nativeElement.src=i.cropper.getCroppedCanvas({width:d,height:d}).toDataURL()}),i.cdRef.detectChanges()};setTimeout(()=>{i.cropper=new wi(i.selectedImgRef.nativeElement,{aspectRatio:1,viewMode:1,cropend:()=>a(),ready:()=>a()})},0)})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(oe.PROFILE_PICTURE),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(y.ConfirmationService),e.\u0275\u0275directiveInject(oe.ProfilePictureService),e.\u0275\u0275directiveInject(f.ConfigStateService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-profile-picture"]],viewQuery:function(i,o){if(1&i&&(e.\u0275\u0275viewQuery(yr,5,e.ElementRef),e.\u0275\u0275viewQuery(Sr,5,e.ElementRef),e.\u0275\u0275viewQuery(Cr,5,e.ElementRef)),2&i){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.uploadFileRef=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.selectedImgRef=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.selectedImagePreviews=a)}},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"row"],[1,"col"],[1,"mb-3"],[1,"form-label"],["alt","current-profile-picture",1,"current-profile-picture",3,"src"],[1,"form-check","mb-2"],["type","radio","name","pptype","id","Radio_UseDefault",1,"form-check-input","pp-type-selector",3,"value","ngModel","ngModelChange"],["for","Radio_UseDefault",1,"form-check-label"],["type","radio","name","pptype","id","Radio_UseGravatar",1,"form-check-input","pp-type-selector",3,"value","ngModel","ngModelChange"],["for","Radio_UseGravatar",1,"form-check-label"],[1,"d-block","form-text","text-muted"],["type","radio","name","pptype","id","Radio_UploadFile",1,"form-check-input","pp-type-selector",3,"value","ngModel","ngModelChange"],["for","Radio_UploadFile",1,"form-check-label"],["class","row","id","UploadPPContainer",4,"ngIf"],[1,"mt-2","row"],[1,"btn","btn-primary",3,"disabled","click"],["id","UploadPPContainer",1,"row"],["for","UploadProfilePictureInfo_Picture",1,"form-label"],["accept","image/*","type","file","id","UploadProfilePictureInfo_Picture",1,"form-control",3,"change"],["uploadFile",""],[4,"ngIf"],[1,"general-image-container"],["alt","selected-image",1,"selected-image",3,"src"],["selectedImgRef",""],["id","CursorInfo",1,"mt-2"],[1,"image-process-section"],[1,"sample-images","clearfix","mt-2"],[1,"big"],["alt","selected-image-preview-big"],["preview",""],[1,"medium"],["alt","selected-image-preview-medium"],[1,"small"],["alt","selected-image-preview-small"],[3,"abpLoading"]],template:function(i,o){if(1&i&&(e.\u0275\u0275template(0,xr,37,29,"ng-container",0),e.\u0275\u0275template(1,Ar,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",o.profileLoaded)("ngIfElse",a)}},dependencies:[E.NgIf,m.DefaultValueAccessor,m.RadioControlValueAccessor,m.NgControlStatus,m.NgModel,y.LoadingDirective,E.AsyncPipe,f.LocalizationPipe],styles:['/*!\n * Cropper.js v1.6.0\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2023-08-26T08:14:25.104Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;touch-action:none;-webkit-user-select:none;user-select:none}.cropper-container img{-webkit-backface-visibility:hidden;backface-visibility:hidden;display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-wrap-box,.cropper-canvas,.cropper-drag-box,.cropper-crop-box,.cropper-modal{inset:0;position:absolute}.cropper-wrap-box,.cropper-canvas{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:#3399ffbf;overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:calc(100% / 3);left:0;top:calc(100% / 3);width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:calc(100% / 3);top:0;width:calc(100% / 3)}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:before,.cropper-center:after{background-color:#eee;content:" ";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width: 768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width: 992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width: 1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:" ";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC)}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}\n',".current-profile-picture{display:block;margin:0 auto;width:250px}.selected-image{display:block;max-width:100%}.cursor-info{display:block}.sample-images{list-style-type:none}.sample-images img{border:1px dotted slategray}.sample-images img:hover{border-radius:50%}.sample-images li{float:left;margin-left:1.2em}.sample-images li.big img{width:250px;height:250px}.sample-images li.medium img{width:150px;height:150px}.sample-images li.small img{width:75px;height:75px}\n"],encapsulation:2})}return n})(),Gt=(()=>{class n{isTwoFactorEnabled(){this.isLoaded.set(!1),this.twoFactorTabService.isTwoFactorEnabled$.pipe((0,_.finalize)(()=>this.isLoaded.set(!0))).subscribe(t=>this.form.controls.isTwoFactorEnabled.setValue(t))}trackTwoFactorStatus(){this.form.valueChanges.pipe((0,_.skip)(1),(0,_.switchMap)(({isTwoFactorEnabled:t})=>this.twoFactorTabService.setTwoFactorStatus(t).pipe((0,_.catchError)(()=>(this.form.controls.isTwoFactorEnabled.setValue(!1,{emitEvent:!1}),_.EMPTY)))),(0,Pe.takeUntilDestroyed)()).subscribe()}constructor(){this.fb=(0,e.inject)(m.FormBuilder),this.twoFactorTabService=(0,e.inject)(Dt),this.form=this.fb.group({isTwoFactorEnabled:[!1]}),this.isLoaded=(0,e.signal)(!1),this.isTwoFactorEnabled(),this.trackTwoFactorStatus()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-two-factor-tab"]],standalone:!0,features:[e.\u0275\u0275ProvidersFeature([Dt]),e.\u0275\u0275StandaloneFeature],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup"],[1,"form-check","mb-2"],["type","checkbox","id","twoFactorEnabled","formControlName","isTwoFactorEnabled",1,"form-check-input"],["for","twoFactorEnabled",1,"form-check-label"],[1,"text-muted"],[3,"abpLoading"]],template:function(i,o){if(1&i&&(e.\u0275\u0275template(0,Tr,11,7,"ng-container",0),e.\u0275\u0275template(1,Er,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",o.isLoaded())("ngIfElse",a)}},dependencies:[E.NgIf,f.CoreModule,m.\u0275NgNoValidate,m.CheckboxControlValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,f.LocalizationPipe,y.ThemeSharedModule,x.ValidationGroupDirective,x.ValidationDirective,y.LoadingDirective],encapsulation:2,changeDetection:0})}return n})();const{required:io}=m.Validators;let ji=(()=>{class n{constructor(){this.fb=(0,e.inject)(m.FormBuilder),this.recoveryCodeService=(0,e.inject)(Ve),this.loading=!1,this.form=this.fb.group({recoveryCode:[null,io]})}login(){this.form.invalid||(this.loading=!0,this.recoveryCodeService.login(this.form.value.recoveryCode).pipe((0,_.finalize)(()=>this.loading=!1)).subscribe())}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-login-with-recovery-code"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:12,vars:12,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","recoveryCode",1,"form-label"],["autofocus","","id","recoveryCode","type","text","formControlName","recoveryCode","autocomplete","off",1,"form-control"],["buttonType","submit",3,"loading","disabled"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return o.login()}),e.\u0275\u0275elementStart(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",1)(5,"label",2),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"abp-button",4),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,"AbpAccount::LoginWithRecoveryCode_Information")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,8,"AbpAccount::RecoveryCode")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("loading",o.loading)("disabled",o.form.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,10,"AbpAccount::Submit")," "))},dependencies:[f.CoreModule,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,f.LocalizationPipe,f.AutofocusDirective,f.FormSubmitDirective,y.ThemeSharedModule,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent],encapsulation:2})}return n})(),qt=(()=>{class n{constructor(){this.service=(0,e.inject)(Lt),this.subscription=(0,e.inject)(f.SubscriptionService),this.mapErrorsFn=this.service.MapErrorsFnFactory()}ngOnInit(){this.form=this.service.buildForm()}onSuccess(){const t=this.service.redirectToReturnUrl();this.subscription.addOne(t)}onSubmit(){if(this.form.invalid)return;const t=this.service.changePasswordAndLogin(this.form.value);this.subscription.addOne(t,()=>this.onSuccess(),i=>this.service.showErrorMessage(i))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-refresh-password-form"]],exportAs:["abpRefreshPasswordForm"],features:[e.\u0275\u0275ProvidersFeature([f.SubscriptionService])],decls:25,vars:14,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],[1,"mb-3"],["for","current-password",1,"form-label"],["inputId","current-password","formControlName","currentPassword"],["for","new-password",1,"form-label"],["inputId","new-password","formControlName","newPassword"],["for","confirm-new-password",1,"form-label"],["inputId","confirm-new-password","formControlName","repeatNewPassword"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit",1,"d-grid"]],template:function(i,o){1&i&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return o.onSubmit()}),e.\u0275\u0275elementStart(1,"div",1)(2,"label",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"abp-password",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",1)(9,"label",4),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"abp-password",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",1)(16,"label",6),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span"),e.\u0275\u0275text(20," * "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"abp-password",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"abp-button",8),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275property("formGroup",o.form)("mapErrorsFn",o.mapErrorsFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,"AbpIdentity::DisplayName:CurrentPassword")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,8,"AbpIdentity::DisplayName:NewPassword")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,10,"AbpIdentity::DisplayName:NewPasswordConfirm")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,12,"AbpIdentity::Submit")))},dependencies:[m.\u0275NgNoValidate,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,f.FormSubmitDirective,x.ValidationGroupDirective,x.ValidationDirective,y.ButtonComponent,y.PasswordComponent,f.LocalizationPipe],encapsulation:2})}return n})(),zi=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-qr-code"]],inputs:{qrData:"qrData",width:"width",errorCorrectionLevel:"errorCorrectionLevel"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notFound",""],[3,"qrdata","width","errorCorrectionLevel"],[1,"text-center","text-muted"],[1,"fa","fa-qrcode","fa-5x"]],template:function(i,o){if(1&i&&(e.\u0275\u0275template(0,Pr,2,3,"ng-container",0),e.\u0275\u0275template(1,Ir,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i){const a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",o.qrData)("ngIfElse",a)}},dependencies:[E.NgIf,Bn,Fn,f.CoreModule],encapsulation:2,changeDetection:0})}return n})(),Ui=(()=>{class n{constructor(){this.authenticatorAppService=(0,e.inject)(Mt),this.windowService=(0,e.inject)(f.AbpWindowService),this.toasterService=(0,e.inject)(y.ToasterService),this.confirmationService=(0,e.inject)(y.ConfirmationService),this.activeStep="Authenticator",this.verifyCode="",this.isVerifiedAuthenticatorCode=(0,e.signal)(!1),this.hasAuthenticator=this.authenticatorAppService.hasAuthenticator,this.authenticatorInfo=this.authenticatorAppService.authenticatorInfo,this.recoveryCodeList=(0,e.signal)([]),this.hasRecoveryCodes=(0,e.computed)(()=>this.recoveryCodeList().length>0)}copyToClipboard(t){this.windowService.copyToClipboard(t),this.toasterService.success("AbpUi::CopiedToTheClipboard")}verifyQrCode(){this.verifyCode&&this.authenticatorAppService.verifyAuthenticatorCode(this.verifyCode).subscribe(({recoveryCodes:t})=>{this.isVerifiedAuthenticatorCode.set(!0),this.recoveryCodeList.set(t)})}printRecoverCodes(){if(this.recoveryCodeList().length<1)return;const t=this.windowService.open();t.document.write("<html><body>"),t.document.write(...this.recoveryCodeList().join("<br>")),t.document.write("</body></html>"),t.document.close(),t.print()}recoveryCodeOk(){this.windowService.reloadPage()}copySharedKey(){this.copyToClipboard(this.authenticatorInfo().key)}copyRecoveryCodes(){const t=this.recoveryCodeList().join("\n");this.copyToClipboard(t)}resetAuthenticator(){this.confirmationService.warn("AbpAccount::ResetAuthenticatorWarningMessage","AbpUi::AreYouSure").pipe((0,_.filter)(t=>t===y.Confirmation.Status.confirm),(0,_.switchMap)(()=>this.authenticatorAppService.resetAuthenticator())).subscribe(()=>this.windowService.reloadPage())}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-authenticator-app"]],standalone:!0,features:[e.\u0275\u0275ProvidersFeature([Mt]),e.\u0275\u0275StandaloneFeature],decls:4,vars:2,consts:[[4,"ngIf"],["nextStep",""],["ngbNav","",1,"nav","nav-pills","nav-fill","mb-3",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"opacity-75"],[1,"m-0"],["ngbNavContent",""],[3,"ngbNavItem","classList","disabled"],["role","tabpanel",1,"tab-pane","fade","show","active","w-100",3,"id"],[3,"ngbNavOutlet"],[1,"authenticator-step-1"],[1,"mb-1"],[1,"mb-3"],["id","setAuthenticator"],[1,"row","g-0"],[1,"text-end","mt-3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col"],[1,"card","border","h-100"],[1,"card-body"],[1,"d-flex","justify-content-center","p-3","pb-0"],[3,"qrData"],[1,"col-md-1"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"text-muted","py-3"],["id","sharedKey",1,"bg-light","rounded","px-3","py-2","mt-4"],[1,"fs-4","lh-lg"],["type","button","id","copySharedKey",1,"btn","btn-outline-primary","btn-sm","mt-3",3,"click"],[1,"authenticator-step-2"],[1,"row"],[3,"inputId","ngModel","label","ngModelChange"],[3,"id","buttonClass","click"],[1,"authenticator-step-3"],["id","recoveryCodes",1,"list-group","w-100"],[1,"list-group-item","p-3","d-flex","justify-content-between","align-items-start"],[1,"w-100"],[1,"text-end"],["id","printRecoverCodes","type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["id","copyRecoverCodes","type","button",1,"ms-1","btn","btn-outline-primary","btn-sm",3,"click"],[1,"bg-light","rounded","px-3","py-3","mt-3","w-100","text-center"],["id","recoveryCodesList",1,"fs-4","lh-lg"],[4,"ngFor","ngForOf"],[3,"id","disabled","buttonClass","click"],["id","reset-authenticator"],[1,"my-3"],["id","resetAuthenticator",3,"click"],["type","button",1,"btn","btn-primary","px-3",3,"id","click"],[1,"bi","bi-arrow-right","ms-2"]],template:function(i,o){1&i&&(e.\u0275\u0275template(0,Vr,32,29,"ng-container",0),e.\u0275\u0275template(1,jr,12,9,"ng-container",0),e.\u0275\u0275template(2,zr,4,6,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i&&(e.\u0275\u0275property("ngIf",!o.hasAuthenticator()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.hasAuthenticator()))},dependencies:[F.NgbNavModule,F.NgbNavContent,F.NgbNav,F.NgbNavItem,F.NgbNavItemRole,F.NgbNavLinkButton,F.NgbNavLinkBase,F.NgbNavOutlet,f.CoreModule,E.NgForOf,E.NgIf,E.NgTemplateOutlet,m.NgControlStatus,m.NgModel,f.LocalizationPipe,y.ThemeSharedModule,y.ButtonComponent,y.FormInputComponent,zi],encapsulation:2,changeDetection:0})}return n})(),Wt=(()=>{class n{constructor(t,i){this.manageProfileTabs=t,this.replaceableComponentsService=i,this.addComponentsToTabs=o=>{o.forEach(a=>{if(a.component)return;const s=this.replaceableComponentsService.get(a.name),c=s?s.component:no[a.name];c&&this.manageProfileTabs.patch(a.name,{component:c})})}}resolve(){return this.manageProfileTabs.visible$.pipe((0,C.tap)(this.addComponentsToTabs),(0,C.take)(1))}static#e=this.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(Ze.hY),e.\u0275\u0275inject(f.ReplaceableComponentsService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})();const no={"AbpAccount::ProfileTab:Picture":Ut,"AbpAccount::ProfileTab:Password":Vt,"AbpAccount::ProfileTab:PersonalInfo":zt,"AbpAccount::ProfileTab:AuthenticatorApp":Ui,"AbpAccount::ProfileTab:TwoFactor":Gt},ro=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:f.RouterOutletComponent,canActivate:[Ot],children:[{path:"login",component:f.ReplaceableRouteContainerComponent,canActivate:[Te],data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:xt}}},{path:"register",component:f.ReplaceableRouteContainerComponent,canActivate:[Te],data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:Et}}},{path:"forgot-password",component:f.ReplaceableRouteContainerComponent,canActivate:[Te],data:{replaceableComponent:{key:"Account.ForgotPasswordComponent",defaultComponent:yt}}},{path:"reset-password",component:f.ReplaceableRouteContainerComponent,canActivate:[Te],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.ResetPasswordComponent",defaultComponent:Pt}}},{path:"email-confirmation",component:f.ReplaceableRouteContainerComponent,data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.EmailConfirmationComponent",defaultComponent:bt}}},{path:"link-logged",component:f.ReplaceableRouteContainerComponent,data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.LinkLogged",defaultComponent:St}}},{path:"send-security-code",component:f.ReplaceableRouteContainerComponent,canActivate:[Ft],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.SendSecurityCode",defaultComponent:It}}},{path:"login-with-recovery-code",component:f.ReplaceableRouteContainerComponent,canActivate:[Bt],data:{replaceableComponent:{key:"Account.LoginWithRecoveryCodeComponent",defaultComponent:ji}}},{path:"manage",component:f.ReplaceableRouteContainerComponent,canActivate:[f.AuthGuard],resolve:{manageProfile:Wt},data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:At}}},{path:"security-logs",component:f.ReplaceableRouteContainerComponent,canActivate:[f.AuthGuard],data:{replaceableComponent:{key:"Account.MySecurityLogs",defaultComponent:$e}}},{path:"change-password",component:f.ReplaceableRouteContainerComponent,data:{replaceableComponent:{key:"Account.RefreshPasswordComponent",defaultComponent:qt}}}]}];let oo=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#i=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[D.RouterModule.forChild(ro),D.RouterModule]})}return n})();function Gi(n){return{redirectUrl:"/",...n}}let ao=(()=>{class n{static forChild(t){return{ngModule:n,providers:[{provide:We,useValue:t},{provide:"ACCOUNT_OPTIONS",useFactory:Gi,deps:[We]},{provide:Fi,useValue:t.entityActionContributors},{provide:Bi,useValue:t.toolbarActionContributors},{provide:Vi,useValue:t.entityPropContributors},Ot,Te,Wt,Be,Ft,Ve,Bt,{provide:jt,useValue:t.isPersonalSettingsChangedConfirmationActive??!0}]}}static forLazy(t={}){return new f.LazyModuleFactory(n.forChild(t))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#i=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[f.CoreModule,re.CommercialUiModule,oo,y.ThemeSharedModule,F.NgbDropdownModule,x.NgxValidateCoreModule,F.NgbPopoverModule,F.NgbDatepickerModule,F.NgbTooltipModule,q.PageModule,Gt]})}return n})()}}]);