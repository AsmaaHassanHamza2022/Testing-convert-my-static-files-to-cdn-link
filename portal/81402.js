(self.webpackChunkportal=self.webpackChunkportal||[]).push([[81402],{81402:(E,S,i)=>{i.r(S),i.d(S,{HRRequestModule:()=>re});var e=i(11705),x=i(28675),s=i(78570),d=i(81011),m=i(4125),b=i(15876);let g=(()=>{class n extends s.ListFilterService{constructor(t,a,r){super(),this.list=t,this._requestService=a,this._selectedFiltersBannerService=r,this._filterChanged$=new m.BehaviorSubject(void 0),this.filterChanged$=this._filterChanged$.asObservable()}init(t){this._changeHRCategoryTab$=new m.BehaviorSubject(t),this.changeHRCategoryTab$=this._changeHRCategoryTab$.asObservable()}getList(t){return this.isLoading=!0,this._requestService.getHrRequests({...t,...this._filters})?.pipe((0,m.finalize)(()=>this.isLoading=!1))}getRequestStatistics(){return this._requestService.getHrStatistics({...this._filters,serviceSubCategoryId:null})}refresh(t=!0){this.getData(t)}getData(t=!0){super.getData(t),this._filterChanged$.next(!0)}changeHRCategory(t){this._changeHRCategoryTab$.next(t)}getUsersLookUpLookup(t){return this._requestService.getUsersLookup(t)}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(d.ListService),e.\u0275\u0275inject(b.s),e.\u0275\u0275inject(s.SelectedFiltersBannerService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})();var u=i(62411),f=i(42595),y=i(37385),c=i(36394),p=i(92482),h=i(49095),q=i(74478),C=i(82830);function T(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",38),e.\u0275\u0275element(2,"input",39),e.\u0275\u0275elementStart(3,"label",40),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()()()),2&n){const t=o.$implicit;e.\u0275\u0275classProp("w-100",!t)("w-50",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t)("id","requestStatus"+t),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","requestStatus"+t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,8,t?"RequestService::RequestStatus:"+t:"TaskService::TaskFilter:All")," ")}}function D(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",9)(8,"div",10)(9,"label",13),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",15)(14,"label",16),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",17),e.\u0275\u0275template(18,T,6,10,"div",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",9)(20,"div",10)(21,"label",19),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",9)(26,"div",10)(27,"label",21),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"app-ng-select-auto-complete",22),e.\u0275\u0275listener("valueChanged",function(r){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.selectRequestFormDropDown(r,"requesterUserName"))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",9)(32,"div",10)(33,"label",23),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275reference(38);return e.\u0275\u0275resetView(r.toggle())}),e.\u0275\u0275element(37,"input",25,26),e.\u0275\u0275elementStart(39,"div",27),e.\u0275\u0275element(40,"i",28),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(41,"div",9)(42,"div",10)(43,"label",29),e.\u0275\u0275text(44),e.\u0275\u0275pipe(45,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275reference(48);return e.\u0275\u0275resetView(r.toggle())}),e.\u0275\u0275element(47,"input",30,31),e.\u0275\u0275elementStart(49,"div",27),e.\u0275\u0275element(50,"i",28),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(51,"div",9)(52,"div",10)(53,"label",32),e.\u0275\u0275text(54),e.\u0275\u0275pipe(55,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"div",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275reference(58);return e.\u0275\u0275resetView(r.toggle())}),e.\u0275\u0275element(57,"input",33,34),e.\u0275\u0275elementStart(59,"div",27),e.\u0275\u0275element(60,"i",28),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(61,"div",9)(62,"div",10)(63,"label",35),e.\u0275\u0275text(64),e.\u0275\u0275pipe(65,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275reference(68);return e.\u0275\u0275resetView(r.toggle())}),e.\u0275\u0275element(67,"input",36,37),e.\u0275\u0275elementStart(69,"div",27),e.\u0275\u0275element(70,"i",28),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,14,"RequestService::HRRequestFilter:RequestNo")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD058MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,16,"RequestService::HRRequestFilter:RequestTitle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD058MaxLength),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,18,"RequestService::HRRequestFilter:CurrentStatus")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.RequestStatusOption),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(23,20,"RequestService::HRRequestFilter:RequestStatusDetails")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD058MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,22,"RequestService::HRRequestFilter:CreatedBy")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchUsersFn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(35,24,"RequestService::HRRequestFilter:RequestDateFrom")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(45,26,"RequestService::HRRequestFilter:RequestDateTo")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(55,28,"RequestService::HRRequestFilter:CompletionDateFrom")),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(65,30,"RequestService::HRRequestFilter:CompletionDateTo"))}}function R(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",2),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submitFilterForm())}),e.\u0275\u0275elementStart(1,"div",3),e.\u0275\u0275template(2,D,71,32,"ng-template",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",5)(4,"button",6)(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.clearFilterForm())}),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.filtersForm)("validateOnSubmit",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!0),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(7,5,"::AdvancedFilter:Refresh")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,7,"::AdvancedFilter:Clear")," ")}}let L=(()=>{class n extends s.AbstractAdvancedFilterComponent{get _requestService(){return this.service}get tabForm(){return this.requestForm}get requestForm(){return this.filtersForm.controls.requestForm}constructor(){super(),this.ValidationConsts=p.ValidationConsts,this.RequestStatus=h.Z,this.RequestStatusOption=[null,...Object.values(h.Z).filter(t=>!1===isNaN(Number(t)))],this.searchUsersFn=this._searchUser.bind(this),this.service=(0,e.inject)(g)}ngOnInit(){super.ngOnInit(),this.selectedFiltersBannerService.init(this.requestForm,this.quickFilter),this._changeHRCategorySub()}initForm(){this.filtersForm=this.fb.group({tab:new s.FilterFormControl({filterTitle:""}),requestForm:this._buildRequestFormControl()}),this.loadUiStatusFilterForm(),this.loadUiStatusFormFilterValue("requestFormValue",this.requestForm)}resetForm(){this.tabForm.reset()}removeFilterFormControl(t){this.tabForm.get(t).setValue(null)}refreshFilters(t=!0,a=!1){this.filtersFormValue=this.filtersForm.getRawValue(),a&&this.tabForm.controls.serviceSubCategoryId.setValue(void 0);const r=this.tabForm.getRawValue();this.service.updateFilters({...r}),this.service.getData(t),this._requestService.changeHRCategory(this.tabForm.controls.serviceSubCategoryId.value)}saveExtraInfoStatus(){this.saveUiStatusFormFilterValue("requestFormValue",this.requestForm),super.saveExtraInfoStatus()}selectRequestFormDropDown(t,a){this.changeFilterValueForDropDown(t,a,this.requestForm)}clearFilterForm(){this.tabForm.reset()}_searchUser(t){return this._requestService.getUsersLookUpLookup(t)}_changeHRCategorySub(){const t=this._requestService.changeHRCategoryTab$.subscribe(a=>{const r=this.tabForm.controls.serviceSubCategoryId;r.value!==a&&(r.patchValue(a),this.refreshFilters())});this.addSubsciption(t)}_buildRequestFormControl(){return this.fb.group({requestNO:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:RequestNo"}),serviceName:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:RequestTitle",validatorOrOpts:[c.Validators.maxLength(p.ValidationConsts.FD058MaxLength),p.CustomValidators.InvalidCharacterValidator()]}),serviceSubCategoryId:new s.FilterFormControl({}),requestStatusCode:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:CurrentStatus",filterValueFun:t=>this.localizationService.instant("RequestService::RequestStatus:"+t)}),requestStatusDetails:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:RequestStatusDetails",validatorOrOpts:[c.Validators.maxLength(p.ValidationConsts.FD058MaxLength),p.CustomValidators.InvalidCharacterValidator()]}),requesterUserName:new s.FilterFormControl({filterTitle:"TaskService::HRRequestFilter:CreatedBy",filterValueFun:null}),startDateMin:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:RequestDateFrom"}),startDateMax:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:RequestDateTo"}),endDateMin:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:CompletionDateFrom"}),endDateMax:new s.FilterFormControl({filterTitle:"RequestService::HRRequestFilter:CompletionDateTo"})})}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-hr-request-filter"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:7,consts:[[3,"filterText","isShowFilters","advancedSearchText","isQuickSearch","filterTextChange","showAdvancedFilter"],["class","filters-form",3,"formGroup","validateOnSubmit","ngSubmit",4,"ngIf"],[1,"filters-form",3,"formGroup","validateOnSubmit","ngSubmit"],[1,"scroll-bar"],[3,"ngIf"],[1,"filter-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-close-bar",3,"click"],["formGroupName","requestForm",1,"row","gap-2"],[1,"col-12"],[1,"form-group"],["for","requestNO",1,"form-label"],["formControlName","requestNO",1,"form-control",3,"maxlength"],["for","serviceName",1,"form-label"],["formControlName","serviceName",1,"form-control",3,"maxlength"],[1,"col-12","form-group"],["for","requestStatusCode",1,"form-label"],[1,"d-flex","flex-wrap"],[3,"w-100","w-50",4,"ngFor","ngForOf"],["for","requestStatusDetails",1,"form-label"],["formControlName","requestStatusDetails",1,"form-control",3,"maxlength"],["for","requesterUserName",1,"form-label"],["formControlName","requesterUserName",3,"searchFn","valueChanged"],["for","startDateMin",1,"form-label"],[1,"date-picker-container",3,"click"],["name","datepicker","formControlName","startDateMin","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["startDateMin","ngbDatepicker"],[1,"date-picker-icon"],[1,"icon-calendar"],["for","startDateMax",1,"form-label"],["name","datepicker","formControlName","startDateMax","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["startDateMax","ngbDatepicker"],["for","endDateMin",1,"form-label"],["name","datepicker","formControlName","endDateMin","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["endDateMin","ngbDatepicker"],["for","endDateMax",1,"form-label"],["name","datepicker","formControlName","endDateMax","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["endDateMax","ngbDatepicker"],[1,"form-check","me-4"],["type","radio","name","requestStatusCode","formControlName","requestStatusCode",1,"form-check-input","input-check",3,"value","id"],[1,"form-label","text-nowrap",3,"for"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"app-sw-filter",0),e.\u0275\u0275listener("filterTextChange",function(_){return r.chnageFilterText(_)})("showAdvancedFilter",function(_){return _?r.showFilterSidebar():r.closeFilterSidebar()}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275template(2,R,11,9,"form",1),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275property("filterText",r.quickFilter.filterValue)("isShowFilters",r.isShowFilters)("advancedSearchText",e.\u0275\u0275pipeBind1(1,5,"RequestService::HRRequests:Filter"))("isQuickSearch",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.filtersForm))},dependencies:[u.NgForOf,u.NgIf,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.RadioControlValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.MaxLengthValidator,c.FormGroupDirective,c.FormControlName,c.FormGroupName,d.FormSubmitDirective,q.ValidationGroupDirective,q.ValidationDirective,p.NgSelectAutoCompleteComponent,p.SwFilterComponent,C.NgbInputDatepicker,d.LocalizationPipe],styles:[".scroll-bar[_ngcontent-%COMP%]{height:calc(100vh - 140px);overflow-y:auto;overflow-x:hidden}"]})}return n})();var F=i(27437),v=i(21786);function H(n,o){1&n&&e.\u0275\u0275element(0,"span",12)}function M(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.exportToExcel())}),e.\u0275\u0275element(2,"img",10),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,H,1,0,"span",11),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("alt",e.\u0275\u0275pipeBind1(3,3,"RequestService::HRRequestList:ExportData")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,"RequestService::HRRequestList:ExportData")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isExportToExcelBusy)}}function w(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(17);e.\u0275\u0275property("ngTemplateOutlet",t)}}function I(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(17);e.\u0275\u0275property("ngTemplateOutlet",t)}}function O(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(19);e.\u0275\u0275property("ngTemplateOutlet",t)}}function N(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(19);e.\u0275\u0275property("ngTemplateOutlet",t)}}function V(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(13);e.\u0275\u0275property("ngTemplateOutlet",t)}}function P(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(15);e.\u0275\u0275property("ngTemplateOutlet",t)}}function B(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(23);e.\u0275\u0275property("ngTemplateOutlet",t)}}function U(n,o){if(1&n&&e.\u0275\u0275elementContainer(0,25),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(21);e.\u0275\u0275property("ngTemplateOutlet",t)}}function z(n,o){if(1&n&&e.\u0275\u0275element(0,"app-request-status-badge",26),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275property("requestStatus",t)}}function k(n,o){if(1&n&&e.\u0275\u0275element(0,"app-empty",27),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275property("value",t)}}function j(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"b"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function A(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().value,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t,a.AppConsts.DateWithHourFormat)," ")}}function W(n,o){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext().value;e.\u0275\u0275textInterpolate1(" ",t," ")}}function G(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",28),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext().row,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.redirectToUrl(r.formURL))}),e.\u0275\u0275element(1,"i",29),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275property("disabled",!t.formURL)}}function $(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",16),e.\u0275\u0275template(4,w,1,1,"ng-container",17),e.\u0275\u0275template(5,I,1,1,"ng-container",17),e.\u0275\u0275template(6,O,1,1,"ng-container",17),e.\u0275\u0275template(7,N,1,1,"ng-container",17),e.\u0275\u0275template(8,V,1,1,"ng-container",17),e.\u0275\u0275template(9,P,1,1,"ng-container",17),e.\u0275\u0275template(10,B,1,1,"ng-container",17),e.\u0275\u0275template(11,U,1,1,"ng-container",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,z,1,1,"ng-template",null,19,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(14,k,1,1,"ng-template",null,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(16,j,2,1,"ng-template",null,21,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(18,A,3,4,"ng-template",null,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(20,W,1,1,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(22,G,2,1,"ng-template",null,24,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,9,t.name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",t.prop),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","requestNO"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","serviceName"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","startDate"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","endDate"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","requestStatusCode"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","requestStatusDetails"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","actionView")}}function K(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"ngx-datatable-column",13),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275template(2,$,24,11,"ng-template",14),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit;e.\u0275\u0275property("name",e.\u0275\u0275pipeBind1(1,8,t.name))("prop",t.prop)("flexGrow",t.flexGrow)("sortable",!1)("resizeable",!1)("draggable",!1)("maxWidth",t.maxWidth)("cellClass",t.cellClass)}}function Q(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-nodata-or-loading",30),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementStart(5,"div",31)(6,"app-pager",32),e.\u0275\u0275listener("pageNumberChanged",function(r){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onPageNumberChange(r))})("pageSizeChanged",function(r){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(5);return e.\u0275\u0275resetView(l.onPageSizeChange(r,_))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=o.rowCount,a=o.pageSize,r=o.curPage,l=e.\u0275\u0275nextContext();e.\u0275\u0275property("isLoadingData",l.service.isLoading)("isDataNotEmpty",l.data.items.length>0)("isDataFiltered",l.service.isFiltering)("nodataMessage",e.\u0275\u0275pipeBind1(1,10,"CMSService::NoNewRequests"))("nodataHint",e.\u0275\u0275pipeBind1(2,12,"CMSService::NoRequestsHint"))("noFilterResultMessage",e.\u0275\u0275pipeBind1(3,14,"CMSService::RequestsNoFilterResults"))("noFilterResultHint",e.\u0275\u0275pipeBind1(4,16,"CMSService::ChangeFilters")),e.\u0275\u0275advance(6),e.\u0275\u0275property("page",r)("size",a)("count",t)}}let Z=(()=>{class n{constructor(t,a,r,l,_){this.service=t,this._router=a,this._environmentService=r,this._requestService=l,this._toasterService=_,this.data={items:[],totalCount:0},this.AppConsts=p.AppConsts,this.StatusCodeEnum=h.Z,this._columns=[{name:"RequestService::HRRequestList:RequestNo",prop:"requestNO",flexGrow:2},{name:"RequestService::HRRequestList:RequestTitle",prop:"serviceName",flexGrow:3},{name:"RequestService::HRRequestList:ServiceName",prop:"serviceSubCategoryName",flexGrow:3},{name:"RequestService::HRRequestList:CurrentStatus",prop:"requestStatusCode",flexGrow:3},{name:"RequestService::HRRequestList:RequestStatusDetails",prop:"requestStatusDetails",flexGrow:3},{name:"RequestService::HRRequestList:CreatedBy",prop:"employeeName",flexGrow:3},{name:"RequestService::HRRequestList:RequestDate",prop:"startDate",flexGrow:3},{name:"RequestService::HRRequestList:CompletionDate",prop:"endDate",flexGrow:3},{name:"RequestService::HRRequestList:ActionView",prop:"actionView",flexGrow:1.4,maxWidth:46,cellClass:"d-responsive-none"}],this.columns=this._columns,this.isExportToExcelBusy=!1}ngOnInit(){this.sub$=this.service.list.hookToQuery(r=>(this.data.items=[],this.service.getList(r))).subscribe(r=>{this.data=r})}onPageSizeChange(t,a){a.limit=t,this.service.list.maxResultCount=t,this.service.list.page=0}onPageNumberChange(t){this.service.list.page=t-1}ngOnDestroy(){this.sub$?.unsubscribe()}redirectToUrl(t){if(t){const a=this._environmentService.getEnvironment().application.baseUrl;t.startsWith(a)?this._router.navigate([t.replace(a,"")]):window.location.href=t}}refresh(){this.service.refresh(!1)}exportToExcel(){this.isExportToExcelBusy=!0,this._requestService.getDownloadToken().pipe((0,m.switchMap)(({token:t})=>this._requestService.getHrListAsExcelFile({downloadToken:t,...this.service.getFilters()})),(0,m.finalize)(()=>this.isExportToExcelBusy=!1)).subscribe(t=>{this._toasterService.success("CMSService::SuccessfullyExportData"),(0,d.downloadBlob)(t,"UsersList.xlsx")})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(g),e.\u0275\u0275directiveInject(x.Router),e.\u0275\u0275directiveInject(d.EnvironmentService),e.\u0275\u0275directiveInject(b.s),e.\u0275\u0275directiveInject(F.ToasterService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-hr-request-list"]],decls:9,vars:9,consts:[[1,"card","mt-3","ngx-datatable-card"],[1,"card-body","p-3"],["class","mb-2",4,"ngIf"],[1,"ngx-datatable-container"],["default","",3,"rows","count","list","columnMode","limit"],["table",""],[3,"name","prop","flexGrow","sortable","resizeable","draggable","maxWidth","cellClass",4,"ngFor","ngForOf"],["ngx-datatable-footer-template",""],[1,"mb-2"],[1,"btn","btn-sm","btn-outline-primary","export-btn","d-flex","align-items-center",3,"click"],["src","../../../../../assets/images/export.svg",1,"me-1",3,"alt"],["class","spinner-border ms-1 spinner-border-sm","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"spinner-border","ms-1","spinner-border-sm"],[3,"name","prop","flexGrow","sortable","resizeable","draggable","maxWidth","cellClass"],["ngx-datatable-cell-template",""],[1,"column-label"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["columStatus",""],["columnEmpty",""],["columnBold",""],["columnDate",""],["valueOnly",""],["columnView",""],[3,"ngTemplateOutlet"],[3,"requestStatus"],[3,"value"],[1,"btn","btn-outline-primary","action-btn","p-1",3,"disabled","click"],[1,"icon-document-text"],["loaderImage","table.svg","nodataImage","tasks.svg","noFilterResultImage","no-filter-result.svg",3,"isLoadingData","isDataNotEmpty","isDataFiltered","nodataMessage","nodataHint","noFilterResultMessage","noFilterResultHint"],[1,"w-100","footer"],[3,"page","size","count","pageNumberChanged","pageSizeChanged"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,M,8,7,"div",2),e.\u0275\u0275elementStart(3,"div",3)(4,"ngx-datatable",4,5),e.\u0275\u0275template(6,K,3,10,"ngx-datatable-column",6),e.\u0275\u0275elementStart(7,"ngx-datatable-footer"),e.\u0275\u0275template(8,Q,7,18,"ng-template",7),e.\u0275\u0275elementEnd()()()()()),2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.data.items.length),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-empty",r.service.isLoading||0===r.data.items.length),e.\u0275\u0275property("rows",r.data.items)("count",r.data.totalCount)("list",r.service.list)("columnMode","flex")("limit",r.service.list.maxResultCount),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.columns))},dependencies:[u.NgForOf,u.NgIf,u.NgTemplateOutlet,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,v.DatatableComponent,v.DataTableColumnDirective,v.DataTableColumnCellDirective,v.DataTableFooterTemplateDirective,v.DatatableFooterDirective,F.NgxDatatableDefaultDirective,F.NgxDatatableListDirective,p.PagerComponent,p.NodataOrLoadingComponent,p.EmptyComponent,p.RequestStatusBadgeComponent,u.DatePipe,d.LocalizationPipe],styles:[".rating-img[_ngcontent-%COMP%]{width:1.25rem;margin-top:-10px}app-nodata-or-loading[_ngcontent-%COMP%]{min-height:270px}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.25}.export-btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:#5e1ad5}"]})}return n})();function J(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"span",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("( ",t.count," )")}}function X(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,_=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.changeHRCategory(null==l.category?null:l.category.id))}),e.\u0275\u0275element(1,"i"),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,J,2,1,"span",7),e.\u0275\u0275elementEnd()}if(2&n){const t=o.$implicit,a=e.\u0275\u0275nextContext();let r;e.\u0275\u0275classProp("active",(null!==(r=a.selectedHRCategoryId)&&void 0!==r?r:null)===(null==t.category?null:t.category.id)),e.\u0275\u0275advance(1),e.\u0275\u0275classMap(null==t.category?null:t.category.icon),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.category?t.category.displayName:e.\u0275\u0275pipeBind1(4,6,"RequestService::HRRequests:TabAll")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",void 0!==t.count)}}let Y=(()=>{class n{get selectedHRCategoryId(){return this._selectedHRCategoryId}constructor(t,a,r){this._requestService=t,this._appStatusService=a,this._activatedRoute=r,this.hrCategoriesWithCount=[],this._pageUi="app-request-filter"}ngOnInit(){this.hrCategories=this._activatedRoute.data.value.hrCategories.items,this.hrCategoriesWithCount=[{category:void 0,count:void 0},...this.hrCategories.map(a=>({category:a,count:void 0}))],this._uiStatus=this._appStatusService.loadStatus(this._pageUi);const t=this._uiStatus.members.filters?.requestForm?.serviceSubCategoryId;this._requestService.init(t),this._requestService.changeHRCategoryTab$.subscribe(a=>{this._selectedHRCategoryId=a}),this._requestService.filterChanged$.subscribe(a=>{a&&this._getStatistics()})}changeHRCategory(t){this._selectedHRCategoryId=t,this._requestService.changeHRCategory(t)}_getStatistics(){this._getStatistics$?.unsubscribe(),this._getStatistics$=this._requestService.getRequestStatistics().subscribe(t=>{this.hrCategoriesWithCount.forEach(a=>{a.count=t.find(r=>r.subCategoryId===a.category?.id)?.count??0}),this.hrCategoriesWithCount.find(a=>null==a.category).count=t.reduce((a,r)=>a+r.count,0)})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(g),e.\u0275\u0275directiveInject(s.AppStatusService),e.\u0275\u0275directiveInject(x.ActivatedRoute))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-hr-request"]],features:[e.\u0275\u0275ProvidersFeature([g,d.ListService,s.SelectedFiltersBannerService])],decls:10,vars:5,consts:[[3,"pageTitle","icon","oneLineResponsive"],[1,"tab-group"],[3,"track"],[1,"tab-container"],["class","tab-item sub-item",3,"active","click",4,"ngFor","ngForOf"],[1,"divider","my-3"],[1,"tab-item","sub-item",3,"click"],["class","ms-1",4,"ngIf"],[1,"ms-1"]],template:function(a,r){1&a&&(e.\u0275\u0275elementStart(0,"abp-page")(1,"app-page-header",0),e.\u0275\u0275element(2,"app-hr-request-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",1)(4,"ng-scrollbar",2)(5,"div",3),e.\u0275\u0275template(6,X,6,8,"div",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"app-selected-filters-banner"),e.\u0275\u0275element(8,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"app-hr-request-list"),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("pageTitle","RequestService::HRRequests:Title")("icon","Group")("oneLineResponsive",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("track","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.hrCategoriesWithCount))},dependencies:[u.NgForOf,u.NgIf,f.PageComponent,s.PageHeaderComponent,s.SelectedFiltersBannerComponent,y.NgScrollbar,L,Z,d.LocalizationPipe],styles:["ng-scrollbar[_ngcontent-%COMP%]{height:66px}ng-scrollbar.scroll-sub-tabs[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]  ng-scrollbar .scrollbar-control{visibility:hidden}[_nghost-%COMP%]  ng-scrollbar:hover .scrollbar-control{visibility:visible}"]})}return n})();var ee=i(55355);const te=[{path:"",component:Y,resolve:{hrCategories:()=>{const n=(0,e.inject)(ee.NgxSpinnerService),o=(0,e.inject)(b.s);return n.show(),o.getServiceSubCategoryLookup({maxResultCount:1e3,parentId:"ce0dcb2b-d1f7-f4c3-4f4d-3a0f057793fe"}).pipe((0,m.finalize)(()=>n.hide()))}}}];let ne=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[x.RouterModule.forChild(te),x.RouterModule]})}return n})();var ae=i(92134);let re=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[ne,ae.b,C.NgbRatingModule]})}return n})()},92134:(E,S,i)=>{i.d(S,{b:()=>D});var e=i(81011),s=i(92482),m=i(78570),g=i(37385),f=i(82830),c=i(31093),h=i(62411),C=i(11705);let D=(()=>{class R{static#e=this.\u0275fac=function(v){return new(v||R)};static#t=this.\u0275mod=C.\u0275\u0275defineNgModule({type:R});static#n=this.\u0275inj=C.\u0275\u0275defineInjector({imports:[e.CoreModule,s.SharedModule,m.AbpUtilsModule,g.NgScrollbarModule,e.CoreModule,m.AbpUtilsModule,s.SharedModule,f.NgbTooltipModule,c.NgSelectModule,h.CommonModule,g.NgScrollbarModule,f.NgbDropdownModule,f.NgbDatepickerModule]})}return R})()}}]);