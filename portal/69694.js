(self.webpackChunkportal=self.webpackChunkportal||[]).push([[69694],{69694:(nn,U,u)=>{u.r(U),u.d(U,{ConnectionStringsComponent:()=>I,DEFAULT_EDITIONS_ENTITY_ACTIONS:()=>ee,DEFAULT_EDITIONS_ENTITY_PROPS:()=>te,DEFAULT_EDITIONS_FORM_PROPS:()=>R,DEFAULT_EDITIONS_TOOLBAR_ACTIONS:()=>ne,DEFAULT_SAAS_CREATE_FORM_PROPS:()=>pe,DEFAULT_SAAS_EDIT_FORM_PROPS:()=>me,DEFAULT_SAAS_ENTITY_ACTIONS:()=>se,DEFAULT_SAAS_ENTITY_PROPS:()=>ce,DEFAULT_SAAS_TOOLBAR_ACTIONS:()=>le,DEFAULT_TENANTS_CREATE_FORM_PROPS:()=>N,DEFAULT_TENANTS_EDIT_FORM_PROPS:()=>oe,DEFAULT_TENANTS_ENTITY_ACTIONS:()=>ae,DEFAULT_TENANTS_ENTITY_PROPS:()=>ie,DEFAULT_TENANTS_TOOLBAR_ACTIONS:()=>re,EditionsComponent:()=>h,EditionsUsageWidgetComponent:()=>J,ImpersonateTenantModalService:()=>O,LatestTenantsWidgetComponent:()=>Z,SAAS_CREATE_FORM_PROP_CONTRIBUTORS:()=>k,SAAS_EDIT_FORM_PROP_CONTRIBUTORS:()=>j,SAAS_ENTITY_ACTION_CONTRIBUTORS:()=>P,SAAS_ENTITY_PROP_CONTRIBUTORS:()=>B,SAAS_TOOLBAR_ACTION_CONTRIBUTORS:()=>L,SaasExtensionsGuard:()=>z,SaasModule:()=>en,SetTenantPasswordModalComponent:()=>V,TenantsComponent:()=>v,defaultDateFormatRegex:()=>tn});var l=u(81011),m=u(27437),p=u(32709),e=u(11705),g=u(82942),f=u(32070),C=u(4125),b=u(74478),_=u(62411),s=u(36394),S=u(86418);let de=(()=>{class n{constructor(t){this.restService=t,this.apiName="AbpFeatureManagement",this.delete=(a,i)=>this.restService.request({method:"DELETE",url:"/api/feature-management/features",params:{providerName:a,providerKey:i}},{apiName:this.apiName}),this.get=(a,i)=>this.restService.request({method:"GET",url:"/api/feature-management/features",params:{providerName:a,providerKey:i}},{apiName:this.apiName}),this.update=(a,i,r)=>this.restService.request({method:"PUT",url:"/api/feature-management/features",params:{providerName:a,providerKey:i},body:r},{apiName:this.apiName})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(l.RestService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var d=u(82830),_e=u(76520);function ue(n,o){1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"AbpFeatureManagement::Features")))}function ge(n,o){1&n&&e.\u0275\u0275elementContainer(0)}const A=function(n){return{$implicit:n}};function fe(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",23)(2,"input",24),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(r.value=i)})("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext().$implicit,c=e.\u0275\u0275nextContext(6);return e.\u0275\u0275resetView(c.onCheckboxClick(i,r))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",25),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,ge,1,0,"ng-container",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext(3);const a=e.\u0275\u0275reference(6);e.\u0275\u0275advance(2),e.\u0275\u0275property("id",t.name)("ngModel",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("htmlFor",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.displayName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(6,A,t.description))}}function be(n,o){1&n&&e.\u0275\u0275elementContainer(0)}function ve(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",27)(2,"label",28),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",29),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(r.value=i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,be,1,0,"ng-container",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext(3);const a=e.\u0275\u0275reference(6);e.\u0275\u0275advance(2),e.\u0275\u0275property("htmlFor",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.displayName),e.\u0275\u0275advance(1),e.\u0275\u0275property("id",t.name)("ngModel",t.value)("abpFeatureManagementFreeText",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(7,A,t.description))}}function Se(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"option",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit;e.\u0275\u0275property("ngValue",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,(null==t.displayText?null:t.displayText.resourceName)+"::"+(null==t.displayText?null:t.displayText.name))," ")}}function he(n,o){1&n&&e.\u0275\u0275elementContainer(0)}function Te(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",27)(2,"label",28),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"select",30),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2).$implicit;return e.\u0275\u0275resetView(r.value=i)}),e.\u0275\u0275template(5,Se,3,4,"option",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,he,1,0,"ng-container",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275nextContext(3);const a=e.\u0275\u0275reference(6),i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("htmlFor",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.displayName),e.\u0275\u0275advance(1),e.\u0275\u0275property("id",t.name)("ngModel",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t.valueType.itemSource?null:t.valueType.itemSource.items)("ngForTrackBy",i.track.by("value")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(8,A,t.description))}}function Ce(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Te,7,10,"ng-container",6),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.valueType.itemSource||null==t.valueType.itemSource.items?null:t.valueType.itemSource.items.length)}}function ye(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.displayName)}}function xe(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(6);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275template(1,fe,6,8,"ng-container",21),e.\u0275\u0275template(2,ve,6,9,"ng-container",21),e.\u0275\u0275template(3,Ce,2,1,"ng-container",21),e.\u0275\u0275template(4,ye,2,1,"ng-container",22),e.\u0275\u0275elementEnd()}if(2&n){const t=o.$implicit,a=e.\u0275\u0275nextContext(6);e.\u0275\u0275property("ngStyle",t.style)("ngSwitch",null==t.valueType?null:t.valueType.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",a.valueTypes.ToggleStringValueType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",a.valueTypes.FreeTextStringValueType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",a.valueTypes.SelectionStringValueType)}}function Ee(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"h4"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"hr",18),e.\u0275\u0275template(3,xe,5,5,"div",19)),2&n){const t=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a.selectedGroupDisplayName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",a.features[t.name])("ngForTrackBy",a.track.by("id"))}}function Fe(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"li",15)(1,"a",16),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Ee,4,3,"ng-template",17),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit;e.\u0275\u0275property("ngbNavItem",t.displayName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.displayName)}}function Ie(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"small",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Ne(n,o){1&n&&e.\u0275\u0275template(0,Ie,2,1,"small",33),2&n&&e.\u0275\u0275property("ngIf",o.$implicit)}function Me(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",8)(2,"ul",9,10),e.\u0275\u0275listener("activeIdChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.selectedGroupDisplayName=i)}),e.\u0275\u0275template(4,Fe,4,2,"li",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,Ne,1,1,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(7,"div",13),e.\u0275\u0275element(8,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(3),a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("activeId",a.selectedGroupDisplayName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",a.groups)("ngForTrackBy",a.track.by("name")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbNavOutlet",t)}}function Ae(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AbpFeatureManagement::NoFeatureFoundMessage")," "))}function we(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275template(1,Me,9,4,"ng-container",6),e.\u0275\u0275template(2,Ae,3,3,"div",7),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.groups.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.groups.length)}}function De(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.resetToDefault())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("disabled",t.modalBusy),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"AbpFeatureManagement::ResetToDefault")," ")}}function Ve(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("disabled",t.modalBusy),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"AbpFeatureManagement::Save")," ")}}function Oe(n,o){if(1&n&&(e.\u0275\u0275template(0,De,3,4,"abp-button",36),e.\u0275\u0275elementStart(1,"button",37),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Ve,3,4,"abp-button",38)),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.groups.length),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,"AbpFeatureManagement::Cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.groups.length)}}const Re=function(){return{size:"lg"}};function Pe(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-modal",1),e.\u0275\u0275listener("visibleChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.visible=i)}),e.\u0275\u0275template(1,ue,3,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,we,3,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Oe,5,5,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("visible",t.visible)("busy",t.modalBusy)("options",e.\u0275\u0275pureFunction0(3,Re))}}function Le(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-feature-management",5),e.\u0275\u0275listener("visibleChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.visibleFeatures=i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("visible",t.visibleFeatures)("providerKey",t.providerKey)}}const Be=function(){return{value:"T"}},ke=function(n){return{value:n}},je=function(n){return{value:n,twoWay:!0}},ze=function(n,o,t){return{providerName:n,providerKey:o,visible:t}},Ue=function(n){return{visibleChange:n}},Ge=function(n,o){return{inputs:n,outputs:o,componentKey:"FeatureManagement.FeatureManagementComponent"}};function We(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Le,1,2,"abp-feature-management",4),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("abpReplaceableTemplate",e.\u0275\u0275pureFunction2(12,Ge,e.\u0275\u0275pureFunction3(6,ze,e.\u0275\u0275pureFunction0(1,Be),e.\u0275\u0275pureFunction1(2,ke,t.providerKey),e.\u0275\u0275pureFunction1(4,je,t.visibleFeatures)),e.\u0275\u0275pureFunction1(10,Ue,t.onVisibleFeaturesChange)))}}const G={numeric:"number",default:"text"};let W=(()=>{class n{set feature(t){this._feature=t,this.setInputType()}get feature(){return this._feature}setInputType(){const t=this.feature?.valueType?.validator?.name.toLowerCase();this.type=G[t]??G.default}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275dir=e.\u0275\u0275defineDirective({type:n,selectors:[["input","abpFeatureManagementFreeText",""]],hostVars:1,hostBindings:function(a,i){2&a&&e.\u0275\u0275hostProperty("type",i.type)},inputs:{feature:["abpFeatureManagementFreeText","feature"]},exportAs:["inputAbpFeatureManagementFreeText"]})}return n})();var x=function(n){return n.ToggleStringValueType="ToggleStringValueType",n.FreeTextStringValueType="FreeTextStringValueType",n.SelectionStringValueType="SelectionStringValueType",n}(x||{});let E=(()=>{class n{get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this.visibleChange.emit(t),t)&&this.openModal()}constructor(t,a,i,r,c){this.track=t,this.toasterService=a,this.service=i,this.configState=r,this.confirmationService=c,this.groups=[],this.valueTypes=x,this.visibleChange=new e.EventEmitter,this.modalBusy=!1}openModal(){if(!this.providerName)throw new Error("providerName is required.");this.getFeatures()}getFeatures(){this.service.get(this.providerName,this.providerKey).subscribe(t=>{t.groups?.length&&(this.groups=t.groups.map(({name:a,displayName:i})=>({name:a,displayName:i})),this.selectedGroupDisplayName=this.groups[0].displayName,this.features=t.groups.reduce((a,i)=>({...a,[i.name]:Ke(i.features,document.body.dir)}),{}))})}save(){if(this.modalBusy)return;const t=[];Object.keys(this.features).forEach(a=>{this.features[a].forEach(i=>{i.value!==i.initialValue&&t.push({name:i.name,value:`${i.value}`})})}),t.length?(this.modalBusy=!0,this.service.update(this.providerName,this.providerKey,{features:t}).pipe((0,f.finalize)(()=>this.modalBusy=!1)).subscribe(()=>{this.visible=!1,this.providerKey||this.configState.refreshAppState().subscribe()})):this.visible=!1}resetToDefault(){this.confirmationService.warn("AbpFeatureManagement::AreYouSureToResetToDefault","AbpFeatureManagement::AreYouSure").subscribe(t=>{t===m.Confirmation.Status.confirm&&this.service.delete(this.providerName,this.providerKey).subscribe(()=>{this.toasterService.success("AbpFeatureManagement::ResetedToDefault"),this.visible=!1,this.providerKey||this.configState.refreshAppState().subscribe()})})}onCheckboxClick(t,a){t?this.checkToggleAncestors(a):this.uncheckToggleDescendants(a)}uncheckToggleDescendants(t){this.findAllDescendantsOfByType(t,x.ToggleStringValueType).forEach(a=>this.setFeatureValue(a,!1))}checkToggleAncestors(t){this.findAllAncestorsOfByType(t,x.ToggleStringValueType).forEach(a=>this.setFeatureValue(a,!0))}findAllAncestorsOfByType(t,a){let i=this.findParentByType(t,a);const r=[];for(;i;)r.push(i),i=this.findParentByType(i,a);return r}findAllDescendantsOfByType(t,a){const i=[],r=[t];for(;r.length;){const c=r.pop(),y=this.findChildrenByType(c,a);i.push(...y),r.push(...y)}return i}findParentByType(t,a){return this.getCurrentGroup().find(i=>i.valueType.name===a&&i.name===t.parentName)}findChildrenByType(t,a){return this.getCurrentGroup().filter(i=>i.valueType.name===a&&i.parentName===t.name)}getCurrentGroup(){return this.features[this.selectedGroupDisplayName]??[]}setFeatureValue(t,a){t.value=a}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(l.TrackByService),e.\u0275\u0275directiveInject(m.ToasterService),e.\u0275\u0275directiveInject(de),e.\u0275\u0275directiveInject(l.ConfigStateService),e.\u0275\u0275directiveInject(m.ConfirmationService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-feature-management"]],inputs:{providerKey:"providerKey",providerName:"providerName",visible:"visible"},outputs:{visibleChange:"visibleChange"},exportAs:["abpFeatureManagement"],decls:1,vars:1,consts:[[3,"visible","busy","options","visibleChange",4,"ngIf"],[3,"visible","busy","options","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[1,"row"],[4,"ngIf"],["class","col",4,"ngIf"],[1,"col-md-4"],["ngbNav","","orientation","vertical",1,"nav-pills",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf","ngForTrackBy"],["descTmp",""],[1,"col-md-8"],[3,"ngbNavOutlet"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2","mb-3"],["class","mt-2",3,"ngStyle","ngSwitch","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-2",3,"ngStyle","ngSwitch","keyup.enter"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","ngModel","ngModelChange"],[1,"form-check-label",3,"htmlFor"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mb-3","form-group"],[1,"form-label",3,"htmlFor"],["type","text",1,"form-control",3,"id","ngModel","abpFeatureManagementFreeText","ngModelChange"],[1,"form-select",3,"id","ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngValue"],["class","d-block form-text text-muted",4,"ngIf"],[1,"d-block","form-text","text-muted"],[1,"col"],["iconClass","fa fa-refresh","aria-hidden","true",3,"disabled","click",4,"ngIf"],["abpClose","","type","button",1,"btn","btn-secondary"],["iconClass","fa fa-check","aria-hidden","true",3,"disabled","click",4,"ngIf"],["iconClass","fa fa-refresh","aria-hidden","true",3,"disabled","click"],["iconClass","fa fa-check","aria-hidden","true",3,"disabled","click"]],template:function(a,i){1&a&&e.\u0275\u0275template(0,Pe,7,4,"abp-modal",0),2&a&&e.\u0275\u0275property("ngIf",i.visible)},dependencies:[_.NgForOf,_.NgIf,_.NgTemplateOutlet,_.NgStyle,_.NgSwitch,_.NgSwitchCase,_.NgSwitchDefault,s.NgSelectOption,s.\u0275NgSelectMultipleOption,s.DefaultValueAccessor,s.CheckboxControlValueAccessor,s.SelectControlValueAccessor,s.NgControlStatus,s.NgModel,m.ButtonComponent,m.ModalComponent,m.ModalCloseDirective,d.NgbNavContent,d.NgbNav,d.NgbNavItem,d.NgbNavItemRole,d.NgbNavLink,d.NgbNavLinkBase,d.NgbNavOutlet,W,l.LocalizationPipe],encapsulation:2})}return n})();function Ke(n,o){const t=`margin-${"rtl"===o?"right":"left"}.px`;return n.map(a=>{const i=a.valueType?.name===x.ToggleStringValueType?"true"===(a.value||"").toLowerCase():a.value;return{...a,value:i,initialValue:i,style:{[t]:20*a.depth}}})}let K=(()=>{class n{constructor(){this.visibleFeatures=!1,this.onVisibleFeaturesChange=t=>{this.visibleFeatures=t}}openFeaturesModal(){this.visibleFeatures=!0}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-feature-management-tab"]],decls:8,vars:7,consts:[[1,"text-wrap"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-cog"],[4,"ngIf"],["providerName","T",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],["providerName","T",3,"visible","providerKey","visibleChange"]],template:function(a,i){1&a&&(e.\u0275\u0275elementStart(0,"p",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",1),e.\u0275\u0275listener("click",function(){return i.openFeaturesModal()}),e.\u0275\u0275element(4,"i",2),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,We,2,15,"ng-container",3)),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,3,"AbpFeatureManagement::ManageHostFeaturesText")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,5,"AbpFeatureManagement::ManageHostFeatures"),"\n"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.visibleFeatures))},dependencies:[_.NgIf,l.ReplaceableTemplateDirective,E,l.LocalizationPipe],encapsulation:2})}return n})();const $e=[{provide:e.APP_INITIALIZER,useFactory:function Ye(n){return()=>{n.add([{name:"AbpFeatureManagement::Permission:FeatureManagement",order:104,requiredPolicy:"FeatureManagement.ManageHostFeatures",component:K}])}},deps:[_e.SettingTabsService],multi:!0}];let He=(()=>{class n{static forRoot(){return{ngModule:n,providers:[$e]}}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.CoreModule,m.ThemeSharedModule,d.NgbNavModule]})}return n})();var w=u(42595),Qe=u(30973),F=u(38026),$=u(28675);function qe(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,null!=t.selected&&t.selected.id?"Saas::Edit":"Saas::NewEdition"))}}function Xe(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",11),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275elementStart(1,"div",12),e.\u0275\u0275element(2,"abp-extensible-form",13),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.editionForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("selectedRecord",t.selected)}}function Je(n,o){if(1&n&&e.\u0275\u0275template(0,Xe,3,2,"form",10),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.editionForm)}}function Ze(n,o){1&n&&(e.\u0275\u0275elementStart(0,"button",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"abp-button",15),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"Saas::Cancel")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"AbpIdentity::Save")))}function et(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-feature-management",16),e.\u0275\u0275listener("visibleChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.visibleFeatures=i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("visible",t.visibleFeatures)("providerKey",t.providerKey)}}const tt=function(){return{value:"E"}},D=function(n){return{value:n}},Y=function(n){return{value:n,twoWay:!0}},H=function(n,o,t){return{providerName:n,providerKey:o,visible:t}},Q=function(n){return{visibleChange:n}},q=function(n,o){return{inputs:n,outputs:o,componentKey:"FeatureManagement.FeatureManagementComponent"}};function nt(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",4)(1,"label",10),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",11),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"Saas::DisplayName:Default")))}function at(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"option",24),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.databaseName," ")}}function it(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,at,2,2,"option",23),e.\u0275\u0275elementContainerEnd()),2&n){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.connectionString)}}function ot(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"strong"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"hr"),e.\u0275\u0275elementStart(4,"div",29)(5,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(i.close())}),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2).index,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.removeDbConnectionString(i))}),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd()()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,3,"AbpUi::AreYouSure")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,5,"AbpUi::Cancel")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,7,"AbpUi::Yes")," "))}function rt(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,ot,11,9,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(8,"button",26,27),e.\u0275\u0275element(10,"i",28),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275reference(7),a=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a.databaseName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a.connectionString),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbPopover",t)}}function st(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,rt,11,3,"tr",9),e.\u0275\u0275elementContainerEnd()),2&n){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.connectionString)}}function lt(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",12)(2,"div",13)(3,"div",4)(4,"label",14),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"select",15),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.selectedDatabase=i)}),e.\u0275\u0275template(8,it,2,1,"ng-container",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",17)(10,"div",4)(11,"label",18),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"input",19),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.databaseConnectionString=i)})("keyup.enter",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.addDatabaseConnectionString())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",20)(16,"button",21),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.addDatabaseConnectionString())}),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",12)(20,"table",22)(21,"thead")(22,"tr")(23,"th"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"th"),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th"),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(32,"tbody"),e.\u0275\u0275template(33,st,2,1,"ng-container",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,11,"Saas::DisplayName:DatabaseName")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.selectedDatabase),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.databases),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,13,"Saas::DisplayName:ConnectionString")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.databaseConnectionString),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!t.databaseConnectionString||!t.selectedDatabase),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(18,15,"Saas::AddDatabaseConnectionString")," "),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(25,17,"Saas::DisplayName:DatabaseName")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(28,19,"Saas::DisplayName:ConnectionString")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(31,21,"Saas::Actions")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.databases)}}function ct(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",3),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.formSubmit.emit())}),e.\u0275\u0275elementStart(2,"div",4)(3,"div",5)(4,"input",6),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSharedDatabaseChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",7),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,nt,5,3,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,lt,34,23,"ng-container",9),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,4,"Saas::DisplayName:UseSharedDatabase")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.form.get("useSharedDatabase").value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.databases?null:t.databases.length)&&!t.form.get("useSharedDatabase").value)}}function pt(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275element(1,"i",33),e.\u0275\u0275elementEnd())}function mt(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind1(2,2,"AbpIdentity::SetPassword")," - ",t.tenantName,"")}}function dt(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",5,6),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275reference(1),r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.save(i))}),e.\u0275\u0275elementStart(2,"div",7)(3,"label",8),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",9),e.\u0275\u0275pipe(7,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",7)(9,"label",10),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",11),e.\u0275\u0275element(13,"input",12),e.\u0275\u0275elementStart(14,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.fieldTextType=!i.fieldTextType)}),e.\u0275\u0275element(15,"i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.generatePassword())}),e.\u0275\u0275pipe(17,"abpLocalization"),e.\u0275\u0275element(18,"i",15),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.form)("markAsDirtyWhenSubmit",!1),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,10,"Saas::UserName")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(7,12,"Saas::UserNameTooltip")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,14,"Saas::Password")),e.\u0275\u0275advance(3),e.\u0275\u0275property("type",t.fieldTextType?"text":"password"),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("fa fa-eye",t.fieldTextType?"":"-slash",""),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(17,16,"AbpIdentity::GenerateRandomPasswordTooltip"))}}function _t(n,o){if(1&n&&e.\u0275\u0275template(0,dt,19,18,"form",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form)}}function ut(n,o){1&n&&(e.\u0275\u0275elementStart(0,"button",16),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"abp-button",17),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"Saas::Cancel")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"Saas::Save")))}const gt=function(){return{size:"md"}};function ft(n,o){1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Saas::LoginWithThisTenant")))}function bt(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",5),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275elementStart(1,"div",6)(2,"label",7),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",8),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.formGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"Saas::UserName"),"")}}function vt(n,o){if(1&n&&e.\u0275\u0275template(0,bt,6,4,"form",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.formGroup)}}function St(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.visibleChange(!1))}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",10),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"Saas::Cancel")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"Saas::Login")," "))}const ht=["tenantModalTemplate"],Tt=["connectionStringModalTemplate"];function Ct(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit;e.\u0275\u0275property("ngValue",t.key),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"Saas::Enum:TenantActivationState."+t.key)," ")}}function yt(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.selectedModalContent.title))}}function xt(n,o){1&n&&e.\u0275\u0275elementContainer(0)}function Et(n,o){if(1&n&&e.\u0275\u0275template(0,xt,1,0,"ng-container",31),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngTemplateOutlet",null==t.selectedModalContent?null:t.selectedModalContent.template)}}function Ft(n,o){1&n&&(e.\u0275\u0275elementStart(0,"abp-button",36),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"AbpIdentity::Save")))}function It(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",t.isDisabledSaveButton),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,2,"AbpIdentity::Save"))}}function Nt(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"button",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(3,33),e.\u0275\u0275template(4,Ft,3,3,"abp-button",34),e.\u0275\u0275template(5,It,3,4,"abp-button",35),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,"Saas::Cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",null==t.selectedModalContent?null:t.selectedModalContent.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","saveTenant"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","saveConnStr")}}function Mt(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-set-tenant-password-modal",39),e.\u0275\u0275listener("modalVisibleChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.closeSetTenantPasswordModal())}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("modalVisible",t.isVisibleSetTenantPasswordModal)("tenantId",t.selectedTenantId)("tenantName",t.selectedTenantNameForSetTenantPasswordModal)}}function At(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Mt,1,3,"abp-set-tenant-password-modal",38),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("abpReplaceableTemplate",t.setTenantReplaceableTemplateOptions)}}function wt(n,o){1&n&&e.\u0275\u0275elementContainer(0)}function Dt(n,o){1&n&&e.\u0275\u0275elementContainer(0)}function Vt(n,o){if(1&n&&e.\u0275\u0275template(0,Dt,1,0,"ng-container",31),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(4);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Ot(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-connection-strings",49),e.\u0275\u0275listener("formSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275elementEnd()}}const X=function(n){return{formSubmit:n}},Rt=function(n,o){return{outputs:n,componentKey:o}};function Pt(n,o){if(1&n&&e.\u0275\u0275template(0,Ot,1,0,"abp-connection-strings",48),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("abpReplaceableTemplate",e.\u0275\u0275pureFunction2(3,Rt,e.\u0275\u0275pureFunction1(1,X,t.save),t.connectionStringsReplacementKey))}}function Lt(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"ul",42,43)(2,"li",44)(3,"a",45),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Vt,1,1,"ng-template",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"li",44)(8,"a",45),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Pt,1,6,"ng-template",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(12,"div",47)),2&n){const t=e.\u0275\u0275reference(1);e.\u0275\u0275property("destroyOnHide",!1),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"Saas::TenantBaseInfo")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,6,"Saas::ConnectionStrings")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngbNavOutlet",t)}}function Bt(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",51),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275element(1,"abp-extensible-form",52),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("formGroup",t.tenantForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("selectedRecord",t.selected)}}function kt(n,o){if(1&n&&e.\u0275\u0275template(0,Bt,2,2,"form",50),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.tenantForm)}}function jt(n,o){if(1&n&&(e.\u0275\u0275template(0,wt,1,0,"ng-container",31),e.\u0275\u0275template(1,Lt,13,8,"ng-template",null,40,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,kt,1,1,"ng-template",null,41,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275reference(2),a=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngTemplateOutlet",null!=i.selected&&i.selected.id?a:t)}}function zt(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-connection-strings",54),e.\u0275\u0275listener("formSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.save())}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selectedTenant",t.selected)}}const Ut=function(n){return{selectedTenant:n}},Gt=function(n,o,t){return{inputs:n,outputs:o,componentKey:t}};function Wt(n,o){if(1&n&&e.\u0275\u0275template(0,zt,1,1,"abp-connection-strings",53),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("abpReplaceableTemplate",e.\u0275\u0275pureFunction3(7,Gt,e.\u0275\u0275pureFunction1(3,Ut,e.\u0275\u0275pureFunction1(1,D,t.selected)),e.\u0275\u0275pureFunction1(5,X,t.save),t.connectionStringsReplacementKey))}}function Kt(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"abp-feature-management",55),e.\u0275\u0275listener("visibleChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.visibleFeatures=i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("visible",t.visibleFeatures)("providerKey",t.providerKey)}}const $t=function(){return{size:"lg"}},Yt=function(){return{value:"T"}};function Ht(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",5)(7,"div",6),e.\u0275\u0275element(8,"abp-chart",7,8),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"Saas::EditionUsageStatistics")),e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t.chartData)("width",t.width)("height",t.height)}}function Qt(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"th"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=o.$implicit,a=o.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.editionName)}}function qt(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",5)(7,"div")(8,"table",6)(9,"thead")(10,"tr")(11,"th"),e.\u0275\u0275text(12,"#"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"tbody"),e.\u0275\u0275template(20,Qt,7,3,"tr",7),e.\u0275\u0275elementEnd()()()()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,7,"Saas::LatestTenants")),e.\u0275\u0275advance(3),e.\u0275\u0275styleProp("min-height",t.minHeight,"px"),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,9,"Saas::Name")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,11,"Saas::EditionName")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.data)("ngForTrackBy",t.trackByFn)}}let h=(()=>{class n{constructor(t,a,i,r){this.list=t,this.confirmationService=a,this.service=i,this.injector=r,this.data={items:[],totalCount:0},this.plans$=new C.BehaviorSubject([]),this.visibleFeatures=!1,this.modalBusy=!1,this.onVisibleFeaturesChange=c=>{this.visibleFeatures=c}}ngOnInit(){this.hookToQuery()}hookToQuery(){this.list.hookToQuery(t=>this.service.getList(t)).subscribe(t=>this.data=t)}createEditionForm(){this.getPlanLookup(()=>{const t=new p.FormPropData(this.injector,this.selected);this.editionForm=(0,p.generateFormFromProps)(t)})}onAddEdition(){this.selected={},this.createEditionForm(),this.isModalVisible=!0}onEditEdition(t){this.service.get(t).subscribe(a=>{this.selected=a,this.createEditionForm(),this.isModalVisible=!0})}save(){if(!this.editionForm.valid)return;this.modalBusy=!0;const{id:t}=this.selected;(t?this.service.update(t,{...this.selected,...this.editionForm.value}):this.service.create(this.editionForm.value)).pipe((0,f.finalize)(()=>this.modalBusy=!1)).subscribe(()=>{this.list.get(),this.isModalVisible=!1})}delete({id:t,displayName:a}){this.confirmationService.warn("Saas::EditionDeletionConfirmationMessage","Saas::AreYouSure",{messageLocalizationParams:[a]}).subscribe(i=>{i===m.Confirmation.Status.confirm&&this.service.delete(t).subscribe(()=>this.list.get())})}openFeaturesModal(t){this.providerKey=t,setTimeout(()=>{this.visibleFeatures=!0},0)}getPlanLookup(t){this.service.getPlanLookup().subscribe(a=>{this.plans$.next(a),t()})}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(l.ListService),e.\u0275\u0275directiveInject(m.ConfirmationService),e.\u0275\u0275directiveInject(g.EditionService),e.\u0275\u0275directiveInject(e.Injector))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-editions"]],features:[e.\u0275\u0275ProvidersFeature([l.ListService,{provide:p.EXTENSIONS_IDENTIFIER,useValue:"Saas.EditionsComponent"}])],decls:14,vars:25,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","Saas",3,"list"],[1,"card"],[3,"data","recordsTotal","list"],[3,"visible","busy","visibleChange","disappear"],["abpHeader",""],["abpBody",""],["abpFooter",""],["providerName","E",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],["id","editionForm","validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["id","editionForm","validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2"],[3,"selectedRecord"],["abpClose","","type","button",1,"btn","btn-secondary"],["iconClass","fa fa-check","buttonType","submit","formName","editionForm"],["providerName","E",3,"visible","providerKey","visibleChange"]],template:function(a,i){1&a&&(e.\u0275\u0275elementStart(0,"abp-page",0),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275element(3,"abp-advanced-entity-filters",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275element(5,"abp-extensible-table",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"abp-modal",5),e.\u0275\u0275listener("visibleChange",function(c){return i.isModalVisible=c})("disappear",function(){return i.createEditionForm()}),e.\u0275\u0275template(7,qe,3,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(9,Je,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(11,Ze,6,6,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,et,1,2,"abp-feature-management",9)),2&a&&(e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,9,"Saas::Editions"))("toolbar",i.data.items),e.\u0275\u0275advance(3),e.\u0275\u0275property("list",i.list),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",i.data.items)("recordsTotal",i.data.totalCount)("list",i.list),e.\u0275\u0275advance(1),e.\u0275\u0275property("visible",i.isModalVisible)("busy",i.modalBusy),e.\u0275\u0275advance(7),e.\u0275\u0275property("abpReplaceableTemplate",e.\u0275\u0275pureFunction2(22,q,e.\u0275\u0275pureFunction3(16,H,e.\u0275\u0275pureFunction0(11,tt),e.\u0275\u0275pureFunction1(12,D,i.providerKey),e.\u0275\u0275pureFunction1(14,Y,i.visibleFeatures)),e.\u0275\u0275pureFunction1(20,Q,i.onVisibleFeaturesChange))))},dependencies:[b.ValidationGroupDirective,_.NgIf,s.\u0275NgNoValidate,s.NgControlStatusGroup,s.FormGroupDirective,l.FormSubmitDirective,l.ReplaceableTemplateDirective,p.ExtensibleFormComponent,p.ExtensibleTableComponent,S.AdvancedEntityFiltersComponent,m.ButtonComponent,m.ModalComponent,m.ModalCloseDirective,E,w.PageComponent,l.LocalizationPipe],encapsulation:2})}return n})(),I=(()=>{class n{constructor(t,a){this.fb=t,this.service=a,this.formSubmit=new e.EventEmitter,this.form=this.fb.group({useSharedDatabase:[!0],defaultConnectionString:[null]})}ngOnInit(){this.getInitialData()}getInitialData(){this.loading=!0,(this.selectedTenant?this.getConnectionStrings():this.getDatabases()).pipe((0,f.finalize)(()=>this.loading=!1)).subscribe()}selectFirstDatabase(){this.selectedDatabase=this.databases?.find(t=>!t.connectionString)}getDatabases(){return this.service.getDatabases().pipe((0,f.tap)(t=>{this.databases=(t.databases||[]).map(a=>({id:"",databaseName:a,connectionString:null,extraProperties:null})),this.selectFirstDatabase()}))}getConnectionStrings(){return this.service.getConnectionStrings(this.selectedTenant.id).pipe((0,f.tap)(t=>{this.form.setValue({useSharedDatabase:!t.default&&!t.databases.some(a=>!!a.connectionString),defaultConnectionString:t.default}),this.databases=t.databases,this.selectFirstDatabase()}))}onSharedDatabaseChange(){const t=this.form.get("defaultConnectionString");this.form.patchValue({defaultConnectionString:null}),t.updateValueAndValidity()}addDatabaseConnectionString(){if(!this.databaseConnectionString)return;const t=this.databases.findIndex(a=>a.databaseName===this.selectedDatabase.databaseName);this.databases[t].connectionString=this.databaseConnectionString,this.databaseConnectionString=null,this.selectFirstDatabase()}removeDbConnectionString(t){this.databases[t].connectionString=null}getInput(){const{useSharedDatabase:t,defaultConnectionString:a}=this.form.value;return t?{extraProperties:void 0,id:"",default:null,databases:[]}:{extraProperties:void 0,id:"",default:a,databases:this.databases.filter(i=>i.connectionString)}}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(s.UntypedFormBuilder),e.\u0275\u0275directiveInject(g.TenantService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-connection-strings"]],inputs:{selectedTenant:"selectedTenant"},outputs:{formSubmit:"formSubmit"},decls:4,vars:2,consts:[[1,"mt-2"],[4,"ngIf","ngIfElse"],["loadingTmp",""],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-check","mb-2"],["id","useSharedDatabase","type","checkbox","formControlName","useSharedDatabase","autofocus","",1,"form-check-input",3,"ngModelChange"],["for","useSharedDatabase",1,"form-check-label"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["for","defaultConnectionString",1,"form-label"],["type","text","id","defaultConnectionString","formControlName","defaultConnectionString",1,"form-control"],[1,"form-row"],[1,"form-group","col-md-3"],["for","database-name",1,"form-label"],["id","database-name","name","database-name",1,"form-select","form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"mb-3","col-md-7"],["for","connection-string",1,"form-label"],["type","text","id","connection-string","name","connection-string",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"mb-3","col-md-2","mt-4","d-grid"],["id","add-database-connection-string","type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"table"],[3,"ngValue",4,"ngIf"],[3,"ngValue"],["popContent",""],["placement","left",1,"btn","btn-sm","btn-danger",3,"ngbPopover"],["popover","ngbPopover"],["aria-hidden","true",1,"fas","fa-trash"],[1,"text-end"],[1,"btn","btn-sm","btn-light","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"text-center"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","fa-lg"]],template:function(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,ct,10,6,"ng-container",1),e.\u0275\u0275template(2,pt,2,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){const r=e.\u0275\u0275reference(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.loading)("ngIfElse",r)}},dependencies:[b.ValidationGroupDirective,b.ValidationDirective,_.NgForOf,_.NgIf,s.\u0275NgNoValidate,s.NgSelectOption,s.\u0275NgSelectMultipleOption,s.DefaultValueAccessor,s.CheckboxControlValueAccessor,s.SelectControlValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.NgModel,s.FormGroupDirective,s.FormControlName,l.AutofocusDirective,l.FormSubmitDirective,d.NgbPopover,l.LocalizationPipe],encapsulation:2})}return n})(),V=(()=>{class n{constructor(t,a,i){this.fb=t,this.tenantService=a,this.toaster=i,this.modalVisible=!1,this.tenantId="",this.modalVisibleChange=new e.EventEmitter,this.fieldTextType=!1}buildForm(){this.form=this.fb.group({adminName:["admin",[s.Validators.required]],password:["",[s.Validators.required]]})}save(t){if(this.form.invalid)return;const{adminName:a,password:i}=this.form.value;this.modalBusy=!0,this.tenantService.setPassword(this.tenantId,{username:a,password:i}).subscribe(()=>{this.toaster.success("AbpIdentity::PasswordChangedMessage"),t.resetForm(),this.modalVisibleChange.emit()}).add(()=>this.modalBusy=!1)}onModalVisibleChange(t){t||this.modalVisibleChange.emit()}ngOnChanges({modalVisible:t}){t&&t.currentValue&&this.buildForm()}generatePassword(){const t=(0,l.generatePassword)();this.form.controls.password.setValue(t)}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(g.TenantService),e.\u0275\u0275directiveInject(m.ToasterService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-set-tenant-password-modal"]],inputs:{modalVisible:"modalVisible",tenantName:"tenantName",tenantId:"tenantId"},outputs:{modalVisibleChange:"modalVisibleChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:7,vars:4,consts:[[3,"visible","busy","options","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["id","setPasswordForm","validateOnSubmit","",3,"formGroup","markAsDirtyWhenSubmit","ngSubmit",4,"ngIf"],["id","setPasswordForm","validateOnSubmit","",3,"formGroup","markAsDirtyWhenSubmit","ngSubmit"],["ngForm","ngForm"],[1,"mb-3"],["for","adminName",1,"form-label"],["type","text","id","adminName","name","adminName","formControlName","adminName",1,"form-control",3,"ngbTooltip"],["for","password",1,"form-label"],["validationStyle","","validationTarget","",1,"input-group"],["id","password","name","password","formControlName","password","autofocus","",1,"form-control","flex-fill",3,"type"],["type","button",1,"btn","btn-secondary",3,"click"],["id","generate-random-password-button","type","button",1,"btn","btn-primary",3,"ngbTooltip","click"],["aria-hidden","true",1,"fa","fa-refresh"],["type","button","abpClose","",1,"btn","btn-secondary"],["iconClass","fa fa-check","buttonType","submit","formName","setPasswordForm"]],template:function(a,i){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(c){return i.modalVisible=c})("visibleChange",function(c){return i.onModalVisibleChange(c)}),e.\u0275\u0275template(1,mt,3,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,_t,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,ut,6,6,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("visible",i.modalVisible)("busy",i.modalBusy)("options",e.\u0275\u0275pureFunction0(3,gt))},dependencies:[b.ValidationGroupDirective,b.ValidationStyleDirective,b.ValidationTargetDirective,b.ValidationDirective,_.NgIf,s.\u0275NgNoValidate,s.DefaultValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,l.AutofocusDirective,l.FormSubmitDirective,m.ButtonComponent,m.ModalComponent,m.ModalCloseDirective,d.NgbTooltip,l.LocalizationPipe],encapsulation:2})}return n})(),O=(()=>{class n{constructor(){this.store=new l.InternalStore({tenantId:null,isVisible:void 0}),this.isVisible$=this.store.sliceState(t=>t.isVisible)}get tenantId(){return this.store.state.tenantId}setValue(t){this.store.patch({isVisible:t})}setTenantId(t){this.store.patch({tenantId:t})}hide(){this.setValue(!1),this.setTenantId(null)}show(t){this.setValue(!0),this.setTenantId(t)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xt=(()=>{class n{constructor(t,a,i,r,c){this.service=t,this.fb=a,this.impersonationService=i,this.subscription=r,this.confirmation=c,this.defaultTenantUserName="admin",this.buildForm()}get isVisible$(){return this.service.isVisible$}visibleChange(t){void 0===t||t||(this.service.setValue(t),this.reset())}save(){if(this.formGroup.invalid)return;const i=this.impersonationService.impersonateTenant(this.service.tenantId,this.formGroup.value.tenantUserName);this.subscription.addOne(i,()=>this.success(),r=>{this.error(r)})}success(){this.reset()}reset(){this.service.hide(),this.formGroup.reset({tenantUserName:this.defaultTenantUserName})}buildForm(){this.formGroup=this.fb.group({tenantUserName:[this.defaultTenantUserName,[s.Validators.required]]})}error(t){this.subscription.addOne(this.confirmation.error(t.error.error_description,t.error.error,{hideCancelBtn:!0,yesText:"AbpUi::Ok"})),console.error(t.error)}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(O),e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(Qe.ImpersonationService),e.\u0275\u0275directiveInject(l.SubscriptionService),e.\u0275\u0275directiveInject(m.ConfirmationService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-impersonate-tenant-modal"]],features:[e.\u0275\u0275ProvidersFeature([l.SubscriptionService])],decls:8,vars:3,consts:[[3,"visible","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["id","impersonateTenantForm",3,"formGroup","ngSubmit",4,"ngIf"],["id","impersonateTenantForm",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","tenantUserName",1,"form-label"],["type","text","name","tenantUserName","id","tenantUserName","formControlName","tenantUserName",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["form","impersonateTenantForm","type","submit",1,"btn","btn-primary"]],template:function(a,i){1&a&&(e.\u0275\u0275elementStart(0,"abp-modal",0),e.\u0275\u0275listener("visibleChange",function(c){return i.visibleChange(c)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,ft,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,vt,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,St,6,6,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275property("visible",e.\u0275\u0275pipeBind1(1,1,i.isVisible$))},dependencies:[b.ValidationGroupDirective,b.ValidationDirective,_.NgIf,s.\u0275NgNoValidate,s.DefaultValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,l.FormSubmitDirective,m.ModalComponent,_.AsyncPipe,l.LocalizationPipe],encapsulation:2})}return n})(),v=(()=>{class n{get hasSelectedTenant(){return!!this.selected.id}get isDisabledSaveButton(){return!!this.selectedModalContent&&(!("saveConnStr"!==this.selectedModalContent.type||!this.connectionStringsRef?.form.invalid)||"saveTenant"===this.selectedModalContent.type&&this.tenantForm&&this.tenantForm.invalid)}constructor(t,a,i,r,c,y,M){this.list=t,this.confirmationService=a,this.service=i,this.fb=r,this.injector=c,this.toaster=y,this.editionService=M,this.data={items:[],totalCount:0},this.selectedModalContent={},this.visibleFeatures=!1,this.isVisibleSetTenantPasswordModal=!1,this.selectedTenantId="",this.selectedTenantNameForSetTenantPasswordModal="",this.modalBusy=!1,this.emptyOption={label:"Saas::All",value:""},this.connectionStringsReplacementKey="Saas.ConnectionStringsComponent",this.setTenantPasswordReplacementKey="Saas.SetTenantPasswordComponent",this.activationStateOptions=g.tenantActivationStateOptions,this.setTenantReplaceableTemplateOptions=null,this.onVisibleFeaturesChange=T=>{this.visibleFeatures=T},this.closeSetTenantPasswordModal=()=>{this.isVisibleSetTenantPasswordModal=!1,this.selectedTenantNameForSetTenantPasswordModal="",this.selectedTenantId="",this.setTenantReplaceableTemplateOptions=null}}ngOnInit(){this.buildForm(),this.hookToQuery()}clearFilters(){this.formFilters.reset()}hookToQuery(){this.list.hookToQuery(t=>{const a={...this.formFilters.value,...this.formFilters.value.times};return this.service.getList({...t,...a})}).subscribe(t=>this.data=t)}createTenantForm(){return this.editionService.getList({maxResultCount:1e3}).pipe((0,f.tap)(t=>{this.editions=t.items;const a=new p.FormPropData(this.injector,this.selected);this.tenantForm=(0,p.generateFormFromProps)(a)}))}openModal(t,a,i){this.selectedModalContent={title:t,template:a,type:i},this.isModalVisible=!0}onEditConnectionString(t){this.selected=t,this.openModal("Saas::ConnectionStrings",this.connectionStringModalTemplate,"saveConnStr")}onAddTenant(){this.selected={},this.createTenantForm().subscribe(()=>this.openModal("Saas::NewTenant",this.tenantModalTemplate,"saveTenant"))}onEditTenant(t){this.service.get(t).subscribe(a=>{this.selected=a,this.createTenantForm().subscribe(()=>this.openModal("Saas::Edit",this.tenantModalTemplate,"saveTenant"))})}save(){const{type:t}=this.selectedModalContent;t&&("saveTenant"===t?this.saveTenant():"saveConnStr"===t&&this.saveConnectionString())}saveConnectionString(){this.modalBusy||this.connectionStringsRef.form.invalid||this.service.updateConnectionStrings(this.selected.id,this.connectionStringsRef.getInput()).pipe((0,f.finalize)(()=>this.modalBusy=!1)).subscribe(()=>{this.isModalVisible=!1,this.list.get()})}saveTenant(){if(!this.tenantForm.valid||this.modalBusy)return;this.modalBusy=!0;const{activationEndDate:t}=this.tenantForm.value,a={...this.tenantForm.value,...t&&{activationEndDate:new Date(t).toLocalISOString()},...!this.selected.id&&{connectionStrings:this.connectionStringsRef.getInput()}},{id:i}=this.selected;(i?this.service.update(i,{...this.selected,...a}):this.service.create(a)).pipe((0,f.finalize)(()=>this.modalBusy=!1)).subscribe(()=>{this.list.get(),this.isModalVisible=!1})}delete(t,a){this.confirmationService.warn("Saas::TenantDeletionConfirmationMessage","Saas::AreYouSure",{messageLocalizationParams:[a]}).subscribe(i=>{i===m.Confirmation.Status.confirm&&this.service.delete(t).subscribe(()=>this.list.get())})}onSharedDatabaseChange(t){t||setTimeout(()=>{const a=document.getElementById("defaultConnectionString");a&&a.focus()},0)}openFeaturesModal(t){this.providerKey=t,setTimeout(()=>{this.visibleFeatures=!0},0)}openSetTenantPasswordModal(t,a){this.isVisibleSetTenantPasswordModal=!0,this.selectedTenantNameForSetTenantPasswordModal=a,this.selectedTenantId=t,this.setTenantReplaceableTemplateOptions={outputs:{modalVisibleChange:this.closeSetTenantPasswordModal},inputs:{modalVisible:{value:this.isVisibleSetTenantPasswordModal},tenantId:{value:this.selectedTenantId},tenantName:{value:this.selectedTenantNameForSetTenantPasswordModal}},componentKey:this.setTenantPasswordReplacementKey}}applyDatabaseMigrations(t){this.service.applyDatabaseMigrations(t).subscribe(()=>this.toaster.info("AbpIdentity::DatabaseMigrationQueuedAndWillBeApplied","",{life:6e3}))}buildForm(){this.formFilters=this.fb.group({getEditionNames:[null,[]],editionId:[null,[]],times:[{}],activationState:[null,[]]})}getData(){this.formFilters.invalid&&this.formFilters.touched||this.list.get()}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(l.ListService),e.\u0275\u0275directiveInject(m.ConfirmationService),e.\u0275\u0275directiveInject(g.TenantService),e.\u0275\u0275directiveInject(s.UntypedFormBuilder),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(m.ToasterService),e.\u0275\u0275directiveInject(g.EditionService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-tenants"]],viewQuery:function(a,i){if(1&a&&(e.\u0275\u0275viewQuery(I,5),e.\u0275\u0275viewQuery(ht,5),e.\u0275\u0275viewQuery(Tt,5)),2&a){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.connectionStringsRef=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.tenantModalTemplate=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.connectionStringModalTemplate=r.first)}},features:[e.\u0275\u0275ProvidersFeature([l.ListService,{provide:p.EXTENSIONS_IDENTIFIER,useValue:"Saas.TenantsComponent"},{provide:d.NgbDateAdapter,useClass:p.DateAdapter}])],decls:58,vars:51,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","Saas",3,"list"],[3,"formGroup"],["filterForm",""],[1,"row"],[1,"col-12","col-sm-3"],[1,"mb-3"],["for","editionIdFilter",1,"form-label"],["cid","editionIdFilter","formControlName","editionId",3,"emptyOption","getFn"],[1,"form-label",3,"ngbTooltip"],["aria-hidden","true",1,"fa","fa-info-circle"],["formControlName","times","startDateProp","fromDate","endDateProp","toDate"],["for","activationState",1,"form-label"],["id","activationState","formControlName","activationState",1,"form-select","form-control"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-12","col-sm-auto","align-self-end","mb-3"],[1,"col-6","col-sm-auto","d-grid"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"card"],[3,"data","recordsTotal","list"],[3,"visible","busy","options","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[4,"ngIf"],["tenantModalTemplate",""],["connectionStringModalTemplate",""],["providerName","T",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],[4,"ngTemplateOutlet"],["abpClose","","type","button",1,"btn","btn-secondary"],[3,"ngSwitch"],["iconClass","fa fa-check","buttonType","submit","formName","editOrCreateForm",4,"ngSwitchCase"],["iconClass","fa fa-check",3,"disabled","click",4,"ngSwitchCase"],["iconClass","fa fa-check","buttonType","submit","formName","editOrCreateForm"],["iconClass","fa fa-check",3,"disabled","click"],[3,"modalVisible","tenantId","tenantName","modalVisibleChange",4,"abpReplaceableTemplate"],[3,"modalVisible","tenantId","tenantName","modalVisibleChange"],["createTenantTmp",""],["tenantFormTmp",""],["ngbNav","",1,"nav-tabs",3,"destroyOnHide"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"formSubmit",4,"abpReplaceableTemplate"],[3,"formSubmit"],["class","py-2","id","editOrCreateForm","validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["id","editOrCreateForm","validateOnSubmit","",1,"py-2",3,"formGroup","ngSubmit"],[3,"selectedRecord"],[3,"selectedTenant","formSubmit",4,"abpReplaceableTemplate"],[3,"selectedTenant","formSubmit"],["providerName","T",3,"visible","providerKey","visibleChange"]],template:function(a,i){1&a&&(e.\u0275\u0275elementStart(0,"abp-page",0),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275elementStart(2,"div",1)(3,"abp-advanced-entity-filters",2)(4,"abp-advanced-entity-filters-form")(5,"form",3,4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"abp-lookup-select",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",6)(15,"div",7)(16,"label",10),e.\u0275\u0275pipe(17,"abpLocalization"),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275element(20,"i",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"abp-date-range-picker",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",6)(23,"div",7)(24,"label",13),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"select",14),e.\u0275\u0275element(28,"option",15),e.\u0275\u0275template(29,Ct,3,4,"option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"div",17)(31,"div",5)(32,"div",18)(33,"button",19),e.\u0275\u0275listener("click",function(){return i.clearFilters()}),e.\u0275\u0275elementStart(34,"span"),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"abpLocalization"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",18)(38,"button",20),e.\u0275\u0275listener("click",function(){return i.getData()}),e.\u0275\u0275elementStart(39,"span"),e.\u0275\u0275text(40),e.\u0275\u0275pipe(41,"abpLocalization"),e.\u0275\u0275elementEnd()()()()()()()()(),e.\u0275\u0275elementStart(42,"div",21),e.\u0275\u0275element(43,"abp-extensible-table",22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(44,"abp-modal",23),e.\u0275\u0275listener("visibleChange",function(c){return i.isModalVisible=c}),e.\u0275\u0275template(45,yt,3,3,"ng-template",null,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(47,Et,1,1,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(49,Nt,6,6,"ng-template",null,26,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(51,At,2,1,"ng-container",27),e.\u0275\u0275template(52,jt,5,1,"ng-template",null,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(54,Wt,1,11,"ng-template",null,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(56,Kt,1,2,"abp-feature-management",30),e.\u0275\u0275element(57,"abp-impersonate-tenant-modal")),2&a&&(e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,22,"Saas::Tenants"))("toolbar",i.data.items),e.\u0275\u0275advance(3),e.\u0275\u0275property("list",i.list),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.formFilters),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,24,"Saas::Edition")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("emptyOption",i.emptyOption)("getFn",i.editionService.getList),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(17,26,"Saas::EditionEndDateToolTip")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(19,28,"Saas::DisplayName:ExpirationDate")," "),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(26,30,"Saas::DisplayName:ActivationState")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",i.activationStateOptions),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(36,32,"AbpUi::Clear")),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",i.formFilters.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(41,34,"AbpUi::Refresh")),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",i.data.items)("recordsTotal",i.data.totalCount)("list",i.list),e.\u0275\u0275advance(1),e.\u0275\u0275property("visible",i.isModalVisible)("busy",i.modalBusy)("options",e.\u0275\u0275pureFunction0(36,$t)),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",i.setTenantReplaceableTemplateOptions),e.\u0275\u0275advance(5),e.\u0275\u0275property("abpReplaceableTemplate",e.\u0275\u0275pureFunction2(48,q,e.\u0275\u0275pureFunction3(42,H,e.\u0275\u0275pureFunction0(37,Yt),e.\u0275\u0275pureFunction1(38,D,i.providerKey),e.\u0275\u0275pureFunction1(40,Y,i.visibleFeatures)),e.\u0275\u0275pureFunction1(46,Q,i.onVisibleFeaturesChange))))},dependencies:[b.ValidationGroupDirective,b.ValidationDirective,_.NgForOf,_.NgIf,_.NgTemplateOutlet,_.NgSwitch,_.NgSwitchCase,s.\u0275NgNoValidate,s.NgSelectOption,s.\u0275NgSelectMultipleOption,s.SelectControlValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,l.FormSubmitDirective,l.ReplaceableTemplateDirective,S.LookupSelectComponent,S.DateRangePickerComponent,p.ExtensibleFormComponent,p.ExtensibleTableComponent,S.AdvancedEntityFiltersComponent,S.AdvancedEntityFiltersFormComponent,m.ButtonComponent,m.ModalComponent,m.ModalCloseDirective,E,w.PageComponent,d.NgbNavContent,d.NgbNav,d.NgbNavItem,d.NgbNavItemRole,d.NgbNavLink,d.NgbNavLinkBase,d.NgbNavOutlet,d.NgbTooltip,I,V,Xt,l.LocalizationPipe],encapsulation:2})}return n})(),J=(()=>{class n{constructor(t,a){this.permissionService=t,this.service=a,this.data={},this.initialized=new C.BehaviorSubject(this),this.width=273,this.height=136,this.chartData={},this.draw=()=>{this.permissionService.getGrantedPolicy("Saas.Editions")&&this.service.getUsageStatistics().subscribe(i=>{this.data=i.data,this.setChartData()})}}setChartData(){if(!this.data||"{}"===JSON.stringify(this.data))return void(this.chartData={});const t=Object.keys(this.data);setTimeout(()=>{this.chartData={labels:t,datasets:[{data:t.map(a=>this.data[a]),backgroundColor:(0,F.getRandomBackgroundColor)(Object.keys(this.data).length)}]},this.chart.refresh()},0)}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(l.PermissionService),e.\u0275\u0275directiveInject(g.EditionService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-editions-usage-widget"]],viewQuery:function(a,i){if(1&a&&e.\u0275\u0275viewQuery(F.ChartComponent,5),2&a){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.chart=r.first)}},inputs:{width:"width",height:"height"},outputs:{initialized:"initialized"},features:[e.\u0275\u0275ProvidersFeature([l.SubscriptionService])],decls:1,vars:1,consts:[["class","abp-widget-wrapper",4,"abpPermission"],[1,"abp-widget-wrapper"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"row"],["type","pie",1,"w-100",3,"data","width","height"],["chart",""]],template:function(a,i){1&a&&e.\u0275\u0275template(0,Ht,10,6,"div",0),2&a&&e.\u0275\u0275property("abpPermission","Saas.Editions")},dependencies:[l.PermissionDirective,F.ChartComponent,l.LocalizationPipe],encapsulation:2})}return n})(),Z=(()=>{class n{constructor(t,a){this.service=t,this.permissionService=a,this.minHeight=136,this.trackByFn=(i,r)=>r.id,this.draw=()=>{this.permissionService.getGrantedPolicy("Saas.Tenants")&&this.service.getList({getEditionNames:!0,maxResultCount:6,skipCount:0,sorting:"CreationTime desc"}).subscribe(i=>this.data=i.items)}}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275directiveInject(g.TenantService),e.\u0275\u0275directiveInject(l.PermissionService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["abp-latest-tenants-widget"]],inputs:{minHeight:"minHeight"},decls:1,vars:1,consts:[["class","abp-widget-wrapper","data-widget-name","SaasLatestTenantsWidget","data-refresh-url","SaasWidgets/LatestTenants",4,"abpPermission"],["data-widget-name","SaasLatestTenantsWidget","data-refresh-url","SaasWidgets/LatestTenants",1,"abp-widget-wrapper"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table","table-hover","table-sm"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(a,i){1&a&&e.\u0275\u0275template(0,qt,21,13,"div",0),2&a&&e.\u0275\u0275property("abpPermission","Saas.Tenants")},dependencies:[_.NgForOf,l.PermissionDirective,l.LocalizationPipe],encapsulation:2})}return n})();const ee=p.EntityAction.createMany([{text:"Saas::Edit",action:n=>{n.getInjected(h).onEditEdition(n.record.id)},permission:"Saas.Editions.Update"},{text:"Saas::Features",action:n=>{n.getInjected(h).openFeaturesModal(n.record.id)},permission:"Saas.Editions.ManageFeatures"},{text:"Saas::ChangeHistory",action:n=>{n.getInjected(S.SHOW_ENTITY_HISTORY)(n.record.id,"Volo.Saas.Editions.Edition")},permission:"AuditLogging.ViewChangeHistory:Volo.Saas.Edition",visible:n=>!!n.getInjected(S.SHOW_ENTITY_HISTORY,null)},{text:"Saas::Delete",action:n=>{n.getInjected(h).delete(n.record)},permission:"Saas.Editions.Delete"}]),te=p.EntityProp.createMany([{type:"string",name:"displayName",displayName:"Saas::EditionName",sortable:!0}]),R=p.FormProp.createMany([{type:"string",name:"displayName",displayName:"Saas::EditionName",validators:()=>[s.Validators.required,s.Validators.maxLength(256)]},{type:"enum",name:"planId",displayName:"Saas::PlanId",visible:n=>!!n.getInjected(h).plans$.value.length,options:n=>n.getInjected(h).plans$.pipe((0,f.map)(t=>[{key:"-",value:null}].concat(t.map(a=>({key:a.name,value:a.id})))))}]),ne=p.ToolbarAction.createMany([{text:"Saas::NewEdition",action:n=>{n.getInjected(h).onAddEdition()},permission:"Saas.Editions.Create",icon:"fa fa-plus"}]),ae=p.EntityAction.createMany([{text:"Saas::Edit",action:n=>{n.getInjected(v).onEditTenant(n.record.id)},permission:"Saas.Tenants.Update"},{text:"Saas::ConnectionStrings",action:n=>{n.getInjected(v).onEditConnectionString(n.record)},permission:"Saas.Tenants.ManageConnectionStrings"},{text:"Saas::ApplyDatabaseMigrations",action:n=>{n.getInjected(v).applyDatabaseMigrations(n.record.id)},permission:"Saas.Tenants.ManageConnectionStrings",visible:n=>n.record.hasDefaultConnectionString},{text:"Saas::Features",action:n=>{n.getInjected(v).openFeaturesModal(n.record.id)},permission:"Saas.Tenants.ManageFeatures"},{text:"Saas::ChangeHistory",action:n=>{n.getInjected(S.SHOW_ENTITY_HISTORY)(n.record.id,"Volo.Saas.Tenants.Tenant")},permission:"AuditLogging.ViewChangeHistory:Volo.Saas.Tenant",visible:n=>!!n.getInjected(S.SHOW_ENTITY_HISTORY,null)},{text:"Saas::LoginWithThisTenant",action:n=>{n.getInjected(O).show(n.record.id)},permission:"Saas.Tenants.Impersonation",visible:n=>{const t=n.getInjected(l.ConfigStateService).getDeep("currentUser.impersonatorUserId");return(n.record.activationState==g.TenantActivationState.Active||n.record.activationState==g.TenantActivationState.ActiveWithLimitedTime&&new Date(n.record.activationEndDate)>new Date)&&null===t}},{text:"Saas::ChangePassword",action:n=>{n.getInjected(v).openSetTenantPasswordModal(n.record.id,n.record.name)},permission:"Saas.Tenants.SetPassword"},{text:"Saas::Delete",action:n=>{n.getInjected(v).delete(n.record.id,n.record.name)},permission:"Saas.Tenants.Delete"}]),ie=p.EntityProp.createMany([{type:"string",name:"name",displayName:"Saas::TenantName",sortable:!0,columnWidth:300},{type:"string",name:"editionName",displayName:"Saas::EditionName",columnWidth:300},{type:"datetime",name:"editionEndDateUtc",displayName:"Saas::EditionEndDateUtc",columnWidth:300,tooltip:"Saas::EditionEndDateToolTip"},{type:"string",name:"activationState",displayName:"Saas::ActivationState",columnWidth:300,valueResolver:n=>{const o=n.getInjected(l.LocalizationService),t=n.getInjected(l.ConfigStateService),a=n.getInjected(e.LOCALE_ID),{shortDatePattern:i,shortTimePattern:r}=t.getDeep("localization.currentCulture.dateTimeFormat");let c="";switch(n.record.activationState){case g.TenantActivationState.Active:return c=o.instant("Saas::Enum:TenantActivationState.Active"),(0,C.of)(c);case g.TenantActivationState.ActiveWithLimitedTime:return c=`${o.instant("Saas::Enum:TenantActivationState.ActiveWithLimitedTime")} (${(0,_.formatDate)(n.record.activationEndDate,`${i} ${r.replace("tt","a")}`,a)})`,(0,C.of)(c);case g.TenantActivationState.Passive:return c=o.instant("Saas::Enum:TenantActivationState.Passive"),(0,C.of)(c)}}}]),N=p.FormProp.createMany([{type:"string",name:"name",id:"name",displayName:"Saas::TenantName",validators:()=>[s.Validators.required,s.Validators.maxLength(256)]},{type:"string",name:"editionId",displayName:"Saas::Edition",id:"edition",disabled:n=>{const o=n.record.editionEndDateUtc;return o&&new Date(o).getTime()<(new Date).getTime()},options:n=>{const o=n.getInjected(v).editions,a=n.getInjected(l.LocalizationService).instant("Saas::All");return(0,C.of)([{key:a,value:null},...o.map(i=>({key:i.displayName,value:i.id}))])}},{type:"email",name:"adminEmailAddress",displayName:"Saas::DisplayName:AdminEmailAddress",id:"admin-email-address",validators:()=>[s.Validators.required,s.Validators.maxLength(256),s.Validators.email],formText:"Saas::DisplayName:AdminEmailAddressFormText"},{type:"passwordinputgroup",name:"adminPassword",displayName:"Saas::DisplayName:AdminPassword",id:"admin-password",autocomplete:"new-password",validators:n=>[s.Validators.required,...(0,m.getPasswordValidators)({get:n.getInjected})]},{type:"string",name:"activationState",displayName:"Saas::DisplayName:ActivationState",id:"activation-state",validators:()=>[s.Validators.required],defaultValue:g.TenantActivationState.Active,options:n=>{const o=n.getInjected(l.LocalizationService);return(0,C.of)([{key:o.instant("Saas::Enum:TenantActivationState.Active"),value:g.TenantActivationState.Active},{key:o.instant("Saas::Enum:TenantActivationState.ActiveWithLimitedTime"),value:g.TenantActivationState.ActiveWithLimitedTime},{key:o.instant("Saas::Enum:TenantActivationState.Passive"),value:g.TenantActivationState.Passive}])}},{type:"datetime",name:"activationEndDate",displayName:"Saas::DisplayName:ActivationEndDate",id:"activation-end-date",visible:n=>{const{tenantForm:o}=n.getInjected(v);return o.get("activationState").value===g.TenantActivationState.ActiveWithLimitedTime}}]),oe=[...N.slice(0,2),...N.slice(-2)],re=p.ToolbarAction.createMany([{text:"Saas::NewTenant",action:n=>{n.getInjected(v).onAddTenant()},permission:"Saas.Tenants.Create",icon:"fa fa-plus"}]),se={"Saas.EditionsComponent":ee,"Saas.TenantsComponent":ae},le={"Saas.EditionsComponent":ne,"Saas.TenantsComponent":re},ce={"Saas.EditionsComponent":te,"Saas.TenantsComponent":ie},pe={"Saas.EditionsComponent":R,"Saas.TenantsComponent":N},me={"Saas.EditionsComponent":R,"Saas.TenantsComponent":oe},P=new e.InjectionToken("SAAS_ENTITY_ACTION_CONTRIBUTORS"),L=new e.InjectionToken("SAAS_TOOLBAR_ACTION_CONTRIBUTORS"),B=new e.InjectionToken("SAAS_ENTITY_PROP_CONTRIBUTORS"),k=new e.InjectionToken("SAAS_CREATE_FORM_PROP_CONTRIBUTORS"),j=new e.InjectionToken("SAAS_EDIT_FORM_PROP_CONTRIBUTORS");let z=(()=>{class n{constructor(t){this.injector=t}canActivate(){const t=this.injector.get(p.ExtensionsService),a=this.injector.get(P,null)||{},i=this.injector.get(L,null)||{},r=this.injector.get(B,null)||{},c=this.injector.get(k,null)||{},y=this.injector.get(j,null)||{},M=this.injector.get(l.ConfigStateService);return(0,p.getObjectExtensionEntitiesFromStore)(M,"Saas").pipe((0,f.map)(T=>({"Saas.EditionsComponent":T.Edition,"Saas.TenantsComponent":T.Tenant})),(0,p.mapEntitiesToContributors)(M,"Saas"),(0,f.tap)(T=>{(0,p.mergeWithDefaultActions)(t.entityActions,se,a),(0,p.mergeWithDefaultActions)(t.toolbarActions,le,i),(0,p.mergeWithDefaultProps)(t.entityProps,ce,T.prop,r),(0,p.mergeWithDefaultProps)(t.createFormProps,pe,T.createForm,c),(0,p.mergeWithDefaultProps)(t.editFormProps,me,T.editForm,y)}),(0,f.mapTo)(!0))}static#e=this.\u0275fac=function(a){return new(a||n)(e.\u0275\u0275inject(e.Injector))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}return n})();const Jt=[{path:"",redirectTo:"tenants",pathMatch:"full"},{path:"",component:l.RouterOutletComponent,canActivate:[l.AuthGuard,l.PermissionGuard,z],children:[{path:"tenants",component:l.ReplaceableRouteContainerComponent,data:{requiredPolicy:"Saas.Tenants",replaceableComponent:{key:"Saas.TenantsComponent",defaultComponent:v}}},{path:"editions",component:l.ReplaceableRouteContainerComponent,data:{requiredPolicy:"Saas.Editions",replaceableComponent:{key:"Saas.EditionsComponent",defaultComponent:h}}}]}];let Zt=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[$.RouterModule.forChild(Jt),$.RouterModule]})}return n})(),en=(()=>{class n{static forChild(t={}){return{ngModule:n,providers:[{provide:P,useValue:t.entityActionContributors},{provide:L,useValue:t.toolbarActionContributors},{provide:B,useValue:t.entityPropContributors},{provide:k,useValue:t.createFormPropContributors},{provide:j,useValue:t.editFormPropContributors},z]}}static forLazy(t={}){return new l.LazyModuleFactory(n.forChild(t))}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[Zt,b.NgxValidateCoreModule,l.CoreModule,S.CommercialUiModule,m.ThemeSharedModule,d.NgbDropdownModule,He,w.PageModule,F.ChartModule,d.NgbNavModule,d.NgbPopoverModule,S.AdvancedEntityFiltersModule,d.NgbDatepickerModule,d.NgbTooltipModule]})}return n})();const tn=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])*$/}}]);