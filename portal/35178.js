(self.webpackChunkportal=self.webpackChunkportal||[]).push([[35178],{97882:(w,x,o)=>{o.r(x),o.d(x,{ApprovedDocumentLibraryModule:()=>ie});var _=o(28675),p=o(81011),c=o(78570),S=o(4125),v=o(87881),y=o(66035),C=o(32903),b=o(27437),m=o(92482),e=o(11705),s=o(36394),I=o(42595),f=o(21786),A=o(82830),g=o(36503),F=o(13087),D=o(62411),h=o(74478),M=o(31093);function L(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(),l=e.\u0275\u0275reference(32);return e.\u0275\u0275resetView(a.resetDatepicker(l,"publishDateMin"))}),e.\u0275\u0275elementEnd()}}function E(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(),l=e.\u0275\u0275reference(42);return e.\u0275\u0275resetView(a.resetDatepicker(l,"publishDateMax"))}),e.\u0275\u0275elementEnd()}}let N=(()=>{class i extends c.AbstractAdvancedFilterComponent{constructor(t){super(!0),this._targetAudienceService=t,this.allTypes=[],this.searchSectorFn=this._searchSector.bind(this),this.searchDepartmentFn=this._searchDepartment.bind(this)}ngOnInit(){this._getStatus(),this._getTypeLookup(),super.ngOnInit(),this.buildControlValueChanges()}initForm(){this.filtersForm=this.fb.group({sectorId:new c.FilterFormControl({filterTitle:"CMSService::DocumentSector",validatorOrOpts:[],filterValueFun:null}),mainDepartmentId:new c.FilterFormControl({filterTitle:"CMSService::Documents:GeneralAdministration",validatorOrOpts:[],filterValueFun:null}),documentCategory:new c.FilterFormControl({filterTitle:"CMSService::DocumentType",validatorOrOpts:[],filterValueFun:t=>this.allTypes.find(n=>n.id==t).displayName}),status:new c.FilterFormControl({filterTitle:"CMSService::Documents:PublishStatus",validatorOrOpts:[],filterValueFun:t=>this.PublishStatus.find(n=>n.id==t).displayName}),publishDateMin:new c.FilterFormControl({filterTitle:"CMSService::Documents:PublishDateFrom",validatorOrOpts:[]}),publishDateMax:new c.FilterFormControl({filterTitle:"CMSService::Documents:PublishDateTo",validatorOrOpts:[]})})}buildControlValueChanges(){const t=this.filtersForm.controls.sectorId;t.valueChanges.pipe((0,S.startWith)(t.value),(0,S.pairwise)()).subscribe(([n,a])=>{n!=a&&this.filtersForm.controls.mainDepartmentId.setValue(void 0)})}_searchSector(t){return this._targetAudienceService.getCstSectorLookUpByInput(t)}_searchDepartment(t){const n=this.filtersForm.controls.sectorId.value;return n?this._targetAudienceService.getCstGeneralDepartmentsBySectorIdBySectorIdAndInput(n,t):(0,S.of)([])}_getTypeLookup(){const t=Object.values(g.b).filter(n=>!1===isNaN(Number(n))).map(n=>({id:n,displayName:this.localizationService.instant("CMSService::Enum:DocumentCategory:"+n)}));this.allTypes=t}_getStatus(){this.PublishStatus=[{id:1,displayName:this.localizationService.instant("CMSService::Enum:Status:"+v.q.Active)},{id:2,displayName:this.localizationService.instant("CMSService::Enum:Status:"+v.q.Inactive)}]}static#e=this.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(F.d))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-approved-document-library-filters"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:54,vars:40,consts:[[3,"filterText","isShowFilters","searchInputText","advancedSearchText","filterTextChange","showAdvancedFilter"],[1,"filters-form",3,"formGroup","validateOnSubmit","ngSubmit"],[1,"scroll-bar"],[1,"row"],[1,"form-group","col-12","mt-3"],[1,"form-label"],["formControlName","sectorId",3,"searchFn","valueChanged"],[1,"form-group","col-12","mt-2"],["formControlName","mainDepartmentId",3,"searchFn","valueChanged"],[1,"mb-1","form-label"],["formControlName","documentCategory","bindLabel","displayName","bindValue","id",3,"items"],["formControlName","status","bindLabel","displayName","bindValue","id",3,"items"],[1,"form-group","mt-2"],[1,"date-picker-container",3,"click"],["name","datepicker","formControlName","publishDateMin","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["PublishDateFrom","ngbDatepicker"],[1,"date-picker-icon"],["class","icon-x mx-1",3,"click",4,"ngIf"],[1,"icon-calendar"],["name","datepicker","formControlName","publishDateMax","ngbDatepicker","","datepickerClass","filter-calendar",1,"form-control"],["PublishDateTo","ngbDatepicker"],[1,"filter-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-close-bar",3,"click"],[1,"icon-x","mx-1",3,"click"]],template:function(n,a){if(1&n){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-sw-filter",0),e.\u0275\u0275listener("filterTextChange",function(u){return a.chnageFilterText(u)})("showAdvancedFilter",function(u){return u?a.showFilterSidebar():a.closeFilterSidebar()}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275elementStart(3,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return a.submitFilterForm()}),e.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"app-ng-select-auto-complete",6),e.\u0275\u0275listener("valueChanged",function(u){return a.changeFilterValueForDropDown(u,"sectorId")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",7)(12,"label",5),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"app-ng-select-auto-complete",8),e.\u0275\u0275listener("valueChanged",function(u){return a.changeFilterValueForDropDown(u,"mainDepartmentId")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",7)(17,"label",9),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"ng-select",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",7)(22,"label",9),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"ng-select",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",12)(27,"label",5),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const u=e.\u0275\u0275reference(32);return e.\u0275\u0275resetView(u.toggle())}),e.\u0275\u0275element(31,"input",14,15),e.\u0275\u0275elementStart(33,"div",16),e.\u0275\u0275template(34,L,1,0,"i",17),e.\u0275\u0275element(35,"i",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(36,"div",12)(37,"label",5),e.\u0275\u0275text(38),e.\u0275\u0275pipe(39,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const u=e.\u0275\u0275reference(42);return e.\u0275\u0275resetView(u.toggle())}),e.\u0275\u0275element(41,"input",19,20),e.\u0275\u0275elementStart(43,"div",16),e.\u0275\u0275template(44,E,1,0,"i",17),e.\u0275\u0275element(45,"i",18),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(46,"div",21)(47,"button",22)(48,"span"),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"button",23),e.\u0275\u0275listener("click",function(){return a.filtersForm.reset()}),e.\u0275\u0275text(52),e.\u0275\u0275pipe(53,"abpLocalization"),e.\u0275\u0275elementEnd()()()()}2&n&&(e.\u0275\u0275property("filterText",a.quickFilter.filterValue)("isShowFilters",a.isShowFilters)("searchInputText",e.\u0275\u0275pipeBind1(1,20,"CMSService::Documents:Search"))("advancedSearchText",e.\u0275\u0275pipeBind1(2,22,"CMSService::Documents:FilterDocuments")),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",a.filtersForm)("validateOnSubmit",!0),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,24,"CMSService::DocumentSector")),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",a.searchSectorFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,26,"CMSService::Documents:GeneralAdministration")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",a.searchDepartmentFn),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,28,"CMSService::DocumentType")),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",a.allTypes),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,30,"CMSService::Documents:PublishStatus")),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",a.PublishStatus),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,32,"CMSService::Documents:PublishDateFrom")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",a.filtersForm.controls.publishDateMin.value),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(39,34,"CMSService::Documents:PublishDateTo")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",a.filtersForm.controls.publishDateMax.value),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,36,"::AdvancedFilter:Refresh")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(53,38,"::AdvancedFilter:Clear")," "))},dependencies:[D.NgIf,s.\u0275NgNoValidate,s.DefaultValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,p.FormSubmitDirective,h.ValidationGroupDirective,h.ValidationDirective,m.NgSelectAutoCompleteComponent,m.SwFilterComponent,M.NgSelectComponent,A.NgbInputDatepicker,p.LocalizationPipe]})}return i})();function V(i,r){1&i&&(e.\u0275\u0275elementStart(0,"button",18),e.\u0275\u0275element(1,"img",19),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"CMSService::Documents:AddDocument")," "))}function P(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span",21),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&i){const t=r.column,n=r.rowIndex,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",a.list.page*a.list.maxResultCount+n+1,"")}}function B(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span",22),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&i){const t=r.column,n=r.row;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("ngbTooltip",n.fileName),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.fileName," ")}}function O(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"abpLocalization")),2&i){const t=r.column,n=r.row;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,2,"CMSService::Enum:DocumentCategory:"+n.documentCategory)," ")}}function z(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(2)),2&i){const t=r.column,n=r.row;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.sectorName," ")}}function k(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(2)),2&i){const t=r.column,n=r.row;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.mainDepartmentName," ")}}function R(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date")),2&i){const t=r.column,n=r.row,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(3,2,n.publishDate,a.AppConsts.DateOnlyFormat)," ")}}function G(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",26)(1,"input",27),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().row,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.statusChange(a,l))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext().row,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.status===n.Status.Active)("id",t.id)}}function U(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",23),e.\u0275\u0275template(3,G,2,2,"div",24),e.\u0275\u0275elementStart(4,"label",25),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"abpLocalization"),e.\u0275\u0275elementEnd()()),2&i){const t=r.column,n=r.row,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(2),e.\u0275\u0275property("abpPermission","CMSService.Documents.Approve"),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,4,n.status===a.Status.Active?"CMSService::SERVICES:active":"CMSService::SERVICES:inActive"))}}function j(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(2)),2&i){const t=r.column,n=r.row;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.userName," ")}}function W(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"button",33),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275element(2,"i",34),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().row;e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,2,"CMSService::Documents:Download")),e.\u0275\u0275property("disabled",0===t.fileAttachmentId)}}function K(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().row,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.edit(null==a?null:a.id))}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275element(2,"i",36),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,1,"AbpUi::Edit"))}function H(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().row,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.deleteDocument(null==a?null:a.id))}),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275element(2,"i",38),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,1,"AbpUi::Delete"))}function Y(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",28)(3,"app-base64-file-preview",29),e.\u0275\u0275pipe(4,"attachmentFile"),e.\u0275\u0275template(5,W,3,4,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,K,3,3,"div",31),e.\u0275\u0275template(8,H,3,3,"div",32),e.\u0275\u0275elementEnd()),2&i){const t=r.column,n=r.row,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(2),e.\u0275\u0275property("previewMode",a.PreviewModeEnum.Link)("base64File",e.\u0275\u0275pipeBind3(4,5,null==n?null:n.fileAttachmentId,a.entity,"cms-service/documents")),e.\u0275\u0275advance(4),e.\u0275\u0275property("abpPermission","CMSService.Documents.Edit"),e.\u0275\u0275advance(1),e.\u0275\u0275property("abpPermission","CMSService.Documents.Delete")}}function Z(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-nodata-or-loading",39),e.\u0275\u0275pipe(1,"abpLocalization"),e.\u0275\u0275pipe(2,"abpLocalization"),e.\u0275\u0275pipe(3,"abpLocalization"),e.\u0275\u0275pipe(4,"abpLocalization"),e.\u0275\u0275elementStart(5,"div",40)(6,"app-pager",41),e.\u0275\u0275listener("pageNumberChanged",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onPageNumberChange(a))})("pageSizeChanged",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(),d=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(l.onPageSizeChange(a,d))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=r.rowCount,n=r.pageSize,a=r.curPage,l=e.\u0275\u0275nextContext();e.\u0275\u0275property("isLoadingData",l.service.isLoading)("isDataNotEmpty",l.service.data.items.length>0)("isDataFiltered",l.service.isFiltering)("nodataMessage",e.\u0275\u0275pipeBind1(1,10,"CMSService::NoDocumentsCurrently"))("nodataHint",e.\u0275\u0275pipeBind1(2,12,"CMSService::YouCanAddNewDocument"))("noFilterResultMessage",e.\u0275\u0275pipeBind1(3,14,"CMSService::DocumentsNoFilterResult"))("noFilterResultHint",e.\u0275\u0275pipeBind1(4,16,"CMSService::ChangeFilters")),e.\u0275\u0275advance(6),e.\u0275\u0275property("page",a)("size",n)("count",t)}}function $(i){return new c.ListFilterService((t,n)=>i.getList({...t,requestStatus:C.e.Approved},n))}let J=(()=>{class i extends c.AbstractListComponent{constructor(t,n,a,l){super(),this.service=t,this.documentService=n,this._toasterService=a,this._permissionService=l,this.PreviewModeEnum=c.PreviewModeEnum,this.AppConsts=m.AppConsts,this.Status=v.q}ngOnInit(){"ar"===this.localizationService.currentLang?this.entity="ArDocumentAttachment":"en"===this.localizationService.currentLang&&(this.entity="EnDocumentAttachment"),this.confirmDelete=this._permissionService.getGrantedPolicy("CMSService.Documents.Approve")?"CMSService::Documents:ConfirmDelete008":"CMSService::Documents:ConfirmDelete009"}deleteDocument(t){this.confirmationService.warn("::CONF002","::DeleteConfimation",void 0,{yesSeverity:"error",yesText:"::DeleteConfimation:SaveButton"}).pipe((0,S.filter)(n=>n===c.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this.documentService.delete(t).subscribe(()=>{this._toasterService.success(this.confirmDelete),this.list.get()})})}statusChange(t,n){t.preventDefault(),n&&this.warnConfirmation(n)}warnConfirmation(t){const n=t.status!==v.q.Active,a=this.localizationService.instant("CMSService::Enum:DocumentCategory:"+t.documentCategory);this.confirmationService.warn(n?"CMSService::Documents:CONF007":"CMSService::Documents:CONF008",n?"CMSService::Documents:Activate":"CMSService::Documents:Deactivate",void 0,{yesSeverity:n?"success":"error",yesText:n?"CMSService::Documents:YesConfirmActivate":"CMSService::Documents:YesConfirmDeactivate",messageLocalizationParams:[t.fileName,a]}).subscribe(l=>{l===c.SWConfirmation.SWStatus.confirm&&(n?this.documentService.activate(t.id):this.documentService.deactivate(t.id)).subscribe({next:()=>{t.status=n?v.q.Active:v.q.Inactive,this.toasterService.success(n?"CMSService::Documents:ActivateAlert":"CMSService::Documents:DeactivateAlert")}})})}static#e=this.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(c.ListFilterService),e.\u0275\u0275directiveInject(y.Z),e.\u0275\u0275directiveInject(b.ToasterService),e.\u0275\u0275directiveInject(p.PermissionService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-approved-document-library"]],features:[e.\u0275\u0275ProvidersFeature([p.ListService,c.SelectedFiltersBannerService,{provide:c.ListFilterService,useFactory:$,deps:[y.Z]}]),e.\u0275\u0275InheritDefinitionFeature],decls:38,vars:43,consts:[[3,"pageTitle","icon"],[1,"card","mt-3","ngx-datatable-card"],[1,"card-body","p-3"],["class","btn-add","routerLink","create",4,"abpPermission"],[1,"ngx-datatable-container"],["default","",3,"rows","count","list","columnMode"],["table",""],["name","#",1,"text-bold",3,"flexGrow"],["ngx-datatable-cell-template",""],["prop","fileName",1,"text-bold",3,"name","flexGrow"],["prop","documentCategory",3,"name","flexGrow"],["prop","sectorName",3,"name","flexGrow"],["prop","mainDepartmentName",3,"name","flexGrow"],["prop","publishDate",3,"name","flexGrow"],["prop","status",3,"name","flexGrow"],["prop","userName",3,"name","flexGrow"],["headerClass","d-header-none",3,"flexGrow","sortable","name"],["ngx-datatable-footer-template","","ngx-datatable-footer-template",""],["routerLink","create",1,"btn-add"],["src","../../../../../assets/images/plus-circle-add.svg","alt","",1,"me-2"],[1,"column-label"],[1,"text-bold"],["container","body",1,"text-bold",3,"ngbTooltip"],[1,"d-flex"],["class","form-check form-switch",4,"abpPermission"],[1,"form-check-label","px-1",3,"for"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","id","click"],[1,"table-actions"],[3,"previewMode","base64File"],["customLinkTemplate",""],["class","btn btn-outline-primary btn-action-edit","placement","top","container","body",3,"ngbTooltip","click",4,"abpPermission"],["class","btn btn-outline-danger","placement","top","container","body",3,"ngbTooltip","click",4,"abpPermission"],["role","button","placement","top","container","body",1,"btn","btn-outline-primary","action-btn",3,"ngbTooltip","disabled"],[1,"icon-download"],["placement","top","container","body",1,"btn","btn-outline-primary","btn-action-edit",3,"ngbTooltip","click"],[1,"icon-pencil"],["placement","top","container","body",1,"btn","btn-outline-danger",3,"ngbTooltip","click"],[1,"icon-trash"],["loaderImage","table.svg","nodataImage","books.svg","nodataLink","/cmsAdmin/approvedDocumentLibrary/create","noFilterResultImage","no-filter-result.svg",3,"isLoadingData","isDataNotEmpty","isDataFiltered","nodataMessage","nodataHint","noFilterResultMessage","noFilterResultHint"],[1,"w-100","footer"],[3,"page","size","count","pageNumberChanged","pageSizeChanged"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"abp-page")(1,"app-page-header",0),e.\u0275\u0275element(2,"app-approved-document-library-filters"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"app-selected-filters-banner"),e.\u0275\u0275elementStart(4,"div",1)(5,"div",2),e.\u0275\u0275template(6,V,4,3,"button",3),e.\u0275\u0275elementStart(7,"div",4)(8,"ngx-datatable",5,6)(10,"ngx-datatable-column",7),e.\u0275\u0275template(11,P,4,2,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"ngx-datatable-column",9),e.\u0275\u0275pipe(13,"abpLocalization"),e.\u0275\u0275template(14,B,4,3,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"ngx-datatable-column",10),e.\u0275\u0275pipe(16,"abpLocalization"),e.\u0275\u0275template(17,O,4,4,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"ngx-datatable-column",11),e.\u0275\u0275pipe(19,"abpLocalization"),e.\u0275\u0275template(20,z,3,2,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"ngx-datatable-column",12),e.\u0275\u0275pipe(22,"abpLocalization"),e.\u0275\u0275template(23,k,3,2,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"ngx-datatable-column",13),e.\u0275\u0275pipe(25,"abpLocalization"),e.\u0275\u0275template(26,R,4,5,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"ngx-datatable-column",14),e.\u0275\u0275pipe(28,"abpLocalization"),e.\u0275\u0275template(29,U,7,6,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"ngx-datatable-column",15),e.\u0275\u0275pipe(31,"abpLocalization"),e.\u0275\u0275template(32,j,3,2,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"ngx-datatable-column",16),e.\u0275\u0275pipe(34,"abpLocalization"),e.\u0275\u0275template(35,Y,9,9,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"ngx-datatable-footer"),e.\u0275\u0275template(37,Z,7,18,"ng-template",17),e.\u0275\u0275elementEnd()()()()()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("pageTitle","CMSService::ApprovedDocumentLibrary")("icon","library-icon"),e.\u0275\u0275advance(5),e.\u0275\u0275property("abpPermission","CMSService.Documents.Create"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-empty",a.service.isLoading||0===a.service.data.items.length),e.\u0275\u0275property("rows",a.service.data.items)("count",a.service.data.totalCount)("list",a.list)("columnMode","flex"),e.\u0275\u0275advance(2),e.\u0275\u0275property("flexGrow",1),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("name",e.\u0275\u0275pipeBind1(13,27,"CMSService::DocumentFileName")),e.\u0275\u0275property("flexGrow",4),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("name",e.\u0275\u0275pipeBind1(16,29,"CMSService::DocumentType")),e.\u0275\u0275property("flexGrow",2),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("name",e.\u0275\u0275pipeBind1(19,31,"CMSService::DocumentSector")),e.\u0275\u0275property("flexGrow",2),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("name",e.\u0275\u0275pipeBind1(22,33,"CMSService::Documents:mainDepartment")),e.\u0275\u0275property("flexGrow",2),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("name",e.\u0275\u0275pipeBind1(25,35,"CMSService::DocumentCreationTime")),e.\u0275\u0275property("flexGrow",2),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("name",e.\u0275\u0275pipeBind1(28,37,"CMSService::Documents:PublishStatus")),e.\u0275\u0275property("flexGrow",2),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("name",e.\u0275\u0275pipeBind1(31,39,"CMSService::DocumentUsername")),e.\u0275\u0275property("flexGrow",2),e.\u0275\u0275advance(3),e.\u0275\u0275property("flexGrow",3)("sortable",!1)("name",e.\u0275\u0275pipeBind1(34,41,"AbpUi::Actions")))},dependencies:[_.RouterLink,s.CheckboxControlValueAccessor,s.NgControlStatus,s.NgModel,p.PermissionDirective,I.PageComponent,f.DatatableComponent,f.DataTableColumnDirective,f.DataTableColumnCellDirective,f.DataTableFooterTemplateDirective,f.DatatableFooterDirective,b.NgxDatatableDefaultDirective,b.NgxDatatableListDirective,c.PageHeaderComponent,c.Base64FilePerviewComponent,c.SelectedFiltersBannerComponent,m.PagerComponent,m.NodataOrLoadingComponent,A.NgbTooltip,N,D.DatePipe,p.LocalizationPipe,c.AttachmentPipe],styles:[".text-bold[_ngcontent-%COMP%]{font-weight:700}.column-label[_ngcontent-%COMP%]{display:none}app-nodata-or-loading[_ngcontent-%COMP%]{min-height:230px}"]})}return i})();var Q=o(86662);function X(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const a=e.\u0275\u0275reference(59),l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.resetDatepicker(a,"publishDate"))}),e.\u0275\u0275elementEnd()}}function q(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",2),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.submitForm())}),e.\u0275\u0275elementStart(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"input",7),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.supportEn(a.currentTarget.checked))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"label",8),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"hr"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9)(11,"div",10)(12,"label",11),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"input",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",9)(17,"div",10)(18,"label",13),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"input",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",9)(23,"div",10)(24,"label",15),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"app-attachment",16),e.\u0275\u0275listener("attachmentUpdated",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.arAttachmentIdUpdated(a))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"div",17)(29,"div",18)(30,"label",19),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"app-attachment",20),e.\u0275\u0275listener("attachmentUpdated",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.enAttachmentIdUpdated(a))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(34,"div",17)(35,"div",18)(36,"label",21),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"app-ng-select-auto-complete",22),e.\u0275\u0275listener("valueChanged",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.selectSectorFormDropDown(a))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(40,"div",17)(41,"div",18)(42,"label",21),e.\u0275\u0275text(43),e.\u0275\u0275pipe(44,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"app-ng-select-auto-complete",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",17)(47,"div",18)(48,"label",21),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(51,"ng-select",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",25)(53,"div",18)(54,"label",21),e.\u0275\u0275text(55),e.\u0275\u0275pipe(56,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275reference(59);return e.\u0275\u0275resetView(a.toggle())}),e.\u0275\u0275element(58,"input",27,28),e.\u0275\u0275elementStart(60,"div",29),e.\u0275\u0275template(61,X,1,0,"i",30),e.\u0275\u0275element(62,"i",31),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(63,"div",18)(64,"label",32),e.\u0275\u0275text(65),e.\u0275\u0275pipe(66,"abpLocalization"),e.\u0275\u0275elementStart(67,"span",33),e.\u0275\u0275text(68),e.\u0275\u0275pipe(69,"abpLocalization"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"textarea",34),e.\u0275\u0275text(71,"          "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(72,"hr"),e.\u0275\u0275elementStart(73,"div",35)(74,"button",36)(75,"span"),e.\u0275\u0275text(76),e.\u0275\u0275pipe(77,"abpLocalization"),e.\u0275\u0275pipe(78,"abpLocalization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(79,"img",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"button",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelForm())}),e.\u0275\u0275text(81),e.\u0275\u0275pipe(82,"abpLocalization"),e.\u0275\u0275elementEnd()()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form)("validateOnSubmit",!0),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,36,"::SupportEn")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,38,"CMSService::Documents:ArDocumentName")),e.\u0275\u0275advance(2),e.\u0275\u0275property("minLength",t.ValidationConsts.FD012MinLength)("maxLength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(20,40,"CMSService::Documents:EnDocumentName")),e.\u0275\u0275advance(2),e.\u0275\u0275property("minLength",t.ValidationConsts.FD012MinLength)("maxLength",t.ValidationConsts.FD012MaxLength),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(26,42,"CMSService::Documents:ArAttachment")),e.\u0275\u0275advance(2),e.\u0275\u0275property("isRequired",!0)("maxFilesCount",1)("acceptTypes",t.ValidationConsts.FD053FileExtension)("maxFileSize",t.ValidationConsts.FD053FileSize)("entity",t.AttachmentEntities.DocumentsArAttachmentEntities.entity)("moduleName",t.AttachmentEntities.DocumentsArAttachmentEntities.module),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(32,44,"CMSService::Documents:EnAttachment")),e.\u0275\u0275advance(2),e.\u0275\u0275property("isRequired",t.isSupportEnglish)("maxFilesCount",1)("acceptTypes",t.ValidationConsts.FD053FileExtension)("maxFileSize",t.ValidationConsts.FD053FileSize)("entity",t.AttachmentEntities.DocumentsEnAttachmentEntities.entity)("moduleName",t.AttachmentEntities.DocumentsEnAttachmentEntities.module),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(38,46,"CMSService::DocumentSector")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchSectorFn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(44,48,"CMSService::Documents:GeneralAdministration")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchFn",t.searchDepartmentFn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(50,50,"CMSService::DocumentType")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",t.allTypes),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(56,52,"CMSService::Documents:PublishDate")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.form.controls.publishDate.value),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(66,54,"CMSService::Documemts:Notes")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(69,56,"::Optional")),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",t.ValidationConsts.FD027MaxLength),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.id?e.\u0275\u0275pipeBind1(77,58,"AbpUi::Edit"):e.\u0275\u0275pipeBind1(78,60,"CMSService::Documents:Add")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(82,62,"CMSService::Documents:Cancel")," ")}}let T=(()=>{class i extends c.AbstractFormComponent{constructor(t,n,a,l,d,u,ae,oe,re,le){super(),this._fb=t,this._localizationService=n,this._documentService=a,this._toasterService=l,this._confirmationService=d,this._router=u,this._activatedRoute=ae,this._targetAudienceService=oe,this._permissionService=re,this._lookupService=le,this.mainDepartment=[],this.allTypes=[],this.ValidationConsts=m.ValidationConsts,this.AttachmentEntities=m.AttachmentEntities,this.isSupportEnglish=!1,this.searchSectorFn=this._searchSector.bind(this),this.searchDepartmentFn=this._searchDepartment.bind(this)}ngOnInit(){this._activatedRoute.params.subscribe(t=>{this.id=t.id,this.id?this._getDataById(this.id):this._initForm()}),this._getTypeLookup()}_getUserSectorAndDepartment(){this._permissionService.getGrantedPolicy("CMSService.Documents.Approve")?this.successMessage=this.id?"CMSService::Documents:EditINFO008":"CMSService::Documents:INFO008":(this.successMessage=this.id?"CMSService::Documents:EditINFO009":"CMSService::Documents:INFO009",this._lookupService.getUserData().subscribe(t=>{this.id||this.form.controls.sectorId.setValue(t.sectorId),this.form.controls.sectorId.disable(),this.selectedSectorid=t.sectorId,this.form.updateValueAndValidity()}))}_getDataById(t){this.sub$=this._documentService.get(t).subscribe(n=>{this.document=n,this.selectedSectorid=n.sectorId,this._initForm()})}_initForm(){this.form=this._fb.group({fileNameAr:[this.id?this.document?.fileNameAr:void 0,[m.CustomValidators.RequiredValidator(),m.CustomValidators.InvalidCharacterValidator(),s.Validators.minLength(m.ValidationConsts.FD012MinLength),s.Validators.maxLength(m.ValidationConsts.FD012MaxLength)]],arFileAttachmentId:[this.id?this.document?.arFileAttachmentId:0],arFileAttachmentFile:[void 0],fileNameEn:[this.id?this.document?.fileNameEn:void 0,[m.CustomValidators.InvalidCharacterValidator(),s.Validators.minLength(m.ValidationConsts.FD012MinLength),s.Validators.maxLength(m.ValidationConsts.FD012MaxLength)]],enFileAttachmentFile:[void 0],enFileAttachmentId:[this.id?this.document?.enFileAttachmentId:0],sectorId:[this.id?this.document?.sectorId:void 0,[s.Validators.required]],hasEnglish:[!!this.id&&this.document?.hasEnglish],mainDepartmentId:[this.id?this.document?.mainDepartmentId:void 0,[s.Validators.required]],documentCategory:[this.id?this.document?.documentCategory:void 0,[s.Validators.required]],publishDate:[this.id?this.document?.publishDate:void 0,[s.Validators.required]],note:[this.id?this.document?.note:void 0]}),this.supportEn(!!this.id&&this.document?.hasEnglish),this._getUserSectorAndDepartment()}supportEn(t){this.isSupportEnglish=t,this.setControlProps("enFileAttachmentId",t),this.setControlProps("fileNameEn",t)}_searchSector(t){return this._targetAudienceService.getCstSectorLookUpByInput(t)}selectSectorFormDropDown(t){this.selectedSectorid=t?.id,this.form.controls.mainDepartmentId.setValue(void 0)}_searchDepartment(t){return this.selectedSectorid?this._targetAudienceService.getCstGeneralDepartmentsBySectorIdBySectorIdAndInput(this.selectedSectorid,t):(0,S.of)([])}_getTypeLookup(){const t=Object.values(g.b).filter(n=>!1===isNaN(Number(n))).map(n=>({id:n,displayName:this._localizationService.instant("CMSService::Enum:DocumentCategory:"+n)}));this.allTypes=t}submitForm(){if(this.form.invalid)return this._toasterService.warn("CMSService::FormValidationWarining"),void this.scrollToFirstInvalidControl();this.sub$=this._confirmationService.warn(this.id?"::CONF003":"::CONF001","::AreYouSure",void 0,{yesSeverity:"success"}).pipe((0,S.filter)(t=>t===c.SWConfirmation.SWStatus.confirm)).subscribe(()=>{(this.id?this._documentService.update(+this.id,this.form.getRawValue()):this._documentService.create(this.form.getRawValue())).subscribe(()=>{this._toasterService.success(this.successMessage),this._goToApprovedDocumentPage()})})}_goToApprovedDocumentPage(){this._router.navigate(["../"+(this.id?"../":"")],{relativeTo:this._activatedRoute})}cancelForm(){this._confirmationService.warn("::CONF004","::AreYouSure",void 0,{yesSeverity:"error"}).pipe((0,S.filter)(t=>t===c.SWConfirmation.SWStatus.confirm)).subscribe(()=>{this._goToApprovedDocumentPage()})}arAttachmentIdUpdated(t){this.form.get("arFileAttachmentFile").setValue(t.files.toString())}enAttachmentIdUpdated(t){this.form.get("enFileAttachmentFile").setValue(t.files.toString())}ngOnDestroy(){this.sub$?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(p.LocalizationService),e.\u0275\u0275directiveInject(y.Z),e.\u0275\u0275directiveInject(b.ToasterService),e.\u0275\u0275directiveInject(c.SWConfirmationService),e.\u0275\u0275directiveInject(_.Router),e.\u0275\u0275directiveInject(_.ActivatedRoute),e.\u0275\u0275directiveInject(F.d),e.\u0275\u0275directiveInject(p.PermissionService),e.\u0275\u0275directiveInject(Q.T))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-add-document"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[[3,"pageTitle","icon","isParentRoute"],[3,"formGroup","validateOnSubmit","ngSubmit",4,"ngIf"],[3,"formGroup","validateOnSubmit","ngSubmit"],[1,"card"],[1,"card-body"],[1,"row"],[1,"form-group","w-100"],["id","support","type","checkbox","formControlName","hasEnglish",1,"forn-control","me-1","form-check-input",3,"change"],["for","support",1,"form-label"],[1,"col-lg-6","col-md-12"],[1,"form-group","mb-2"],["for","fileNameAr",1,"form-label"],["id","fileNameAr","dir","rtl","type","text","formControlName","fileNameAr",1,"form-control",3,"minLength","maxLength"],["for","fileNameEn",1,"form-label"],["id","fileNameEn","type","text","formControlName","fileNameEn","dir","ltr",1,"form-control",3,"minLength","maxLength"],["for","AttachmentAr",1,"form-label"],["id","AttachmentAr","name","AttachmentAr","formControlName","arFileAttachmentId",3,"isRequired","maxFilesCount","acceptTypes","maxFileSize","entity","moduleName","attachmentUpdated"],[1,"col-lg-6","col-md-12","mb-2"],[1,"form-group"],["for","AttachmentEn",1,"form-label"],["id","AttachmentEn","name","AttachmentEn","formControlName","enFileAttachmentId",3,"isRequired","maxFilesCount","acceptTypes","maxFileSize","entity","moduleName","attachmentUpdated"],[1,"form-label"],["formControlName","sectorId",3,"searchFn","valueChanged"],["formControlName","mainDepartmentId",3,"searchFn"],["formControlName","documentCategory","bindLabel","displayName","bindValue","id",3,"items"],[1,"col-lg-6"],[1,"date-picker-container",3,"click"],["name","datepicker","formControlName","publishDate","ngbDatepicker","",1,"form-control"],["publishDate","ngbDatepicker"],[1,"date-picker-icon"],["class","icon-x mx-1",3,"click",4,"ngIf"],[1,"icon-calendar"],["for","notes",1,"form-label"],[1,"optional-field"],["rows","5","id","notes","formControlName","note",1,"form-control",3,"maxlength"],[1,"btn-actions"],[1,"btn","btn-primary","me-2"],["src","../../../../../assets/images/checkIcon.png","alt","",1,"ms-2"],["type","button",1,"btn-cancel",3,"click"],[1,"icon-x","mx-1",3,"click"]],template:function(n,a){1&n&&(e.\u0275\u0275element(0,"app-page-header",0),e.\u0275\u0275template(1,q,83,64,"form",1)),2&n&&(e.\u0275\u0275property("pageTitle",a.id?"CMSService::Documents:EditDocument":"CMSService::Documents:AddDocument")("icon","library-icon")("isParentRoute",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.form))},dependencies:[D.NgIf,s.\u0275NgNoValidate,s.DefaultValueAccessor,s.CheckboxControlValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.MaxLengthValidator,s.FormGroupDirective,s.FormControlName,p.FormSubmitDirective,h.ValidationGroupDirective,h.ValidationDirective,c.PageHeaderComponent,c.AttachmentComponent,m.NgSelectAutoCompleteComponent,M.NgSelectComponent,A.NgbInputDatepicker,p.LocalizationPipe],encapsulation:2})}return i})();const ee=[{path:"",component:J,canActivate:[p.PermissionGuard],data:{requiredPolicy:"CMSService.Documents"}},{path:"create",component:T,canActivate:[p.PermissionGuard],data:{requiredPolicy:"CMSService.Documents.Create"}},{path:"update/:id",component:T,canActivate:[p.PermissionGuard],data:{requiredPolicy:"CMSService.Documents.Edit"}}];let te=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[_.RouterModule.forChild(ee),_.RouterModule]})}return i})();var ne=o(92134);let ie=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[te,ne.b]})}return i})()},92134:(w,x,o)=>{o.d(x,{b:()=>D});var _=o(81011),c=o(92482),v=o(78570),C=o(37385),m=o(82830),s=o(31093),f=o(62411),g=o(11705);let D=(()=>{class h{static#e=this.\u0275fac=function(E){return new(E||h)};static#t=this.\u0275mod=g.\u0275\u0275defineNgModule({type:h});static#n=this.\u0275inj=g.\u0275\u0275defineInjector({imports:[_.CoreModule,c.SharedModule,v.AbpUtilsModule,C.NgScrollbarModule,_.CoreModule,v.AbpUtilsModule,c.SharedModule,m.NgbTooltipModule,s.NgSelectModule,f.CommonModule,C.NgScrollbarModule,m.NgbDropdownModule,m.NgbDatepickerModule]})}return h})()}}]);